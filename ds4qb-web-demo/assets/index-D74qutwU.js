var lt=Object.defineProperty;var He=i=>{throw TypeError(i)};var ct=(i,n,t)=>n in i?lt(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t;var re=(i,n,t)=>ct(i,typeof n!="symbol"?n+"":n,t),Oe=(i,n,t)=>n.has(i)||He("Cannot "+t);var u=(i,n,t)=>(Oe(i,n,"read from private field"),t?t.call(i):n.get(i)),O=(i,n,t)=>n.has(i)?He("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(i):n.set(i,t),L=(i,n,t,a)=>(Oe(i,n,"write to private field"),a?a.call(i,t):n.set(i,t),t),P=(i,n,t)=>(Oe(i,n,"access private method"),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();const ft="modulepreload",ut=function(i,n){return new URL(i,n).href},$e={},ke=function(n,t,a){let o=Promise.resolve();if(t&&t.length>0){const f=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=Promise.allSettled(t.map(m=>{if(m=ut(m,a),m in $e)return;$e[m]=!0;const v=m.endsWith(".css"),e=v?'[rel="stylesheet"]':"";if(!!a)for(let c=f.length-1;c>=0;c--){const d=f[c];if(d.href===m&&(!v||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${e}`))return;const s=document.createElement("link");if(s.rel=v?"stylesheet":ft,v||(s.as="script"),s.crossOrigin="",s.href=m,g&&s.setAttribute("nonce",g),document.head.appendChild(s),v)return new Promise((c,d)=>{s.addEventListener("load",c),s.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return o.then(f=>{for(const h of f||[])h.status==="rejected"&&l(h.reason);return n().catch(l)})};var Q,Re,Y,J,te;(function(i){i[i.CTRL_SYNC=0]="CTRL_SYNC",i[i.GET_SECTOR_COUNT=1]="GET_SECTOR_COUNT",i[i.GET_SECTOR_SIZE=2]="GET_SECTOR_SIZE",i[i.GET_BLOCK_SIZE=3]="GET_BLOCK_SIZE",i[i.CTRL_TRIM=4]="CTRL_TRIM"})(Q||(Q={})),function(i){i[i.FAT=1]="FAT",i[i.FAT32=2]="FAT32",i[i.EXFAT=4]="EXFAT",i[i.ANY=7]="ANY",i[i.SFD=8]="SFD"}(Re||(Re={})),function(i){i[i.OK=0]="OK",i[i.DISK_ERR=1]="DISK_ERR",i[i.INT_ERR=2]="INT_ERR",i[i.NOT_READY=3]="NOT_READY",i[i.NO_FILE=4]="NO_FILE",i[i.NO_PATH=5]="NO_PATH",i[i.INVALID_NAME=6]="INVALID_NAME",i[i.DENIED=7]="DENIED",i[i.EXIST=8]="EXIST",i[i.INVALID_OBJECT=9]="INVALID_OBJECT",i[i.WRITE_PROTECTED=10]="WRITE_PROTECTED",i[i.INVALID_DRIVE=11]="INVALID_DRIVE",i[i.NOT_ENABLED=12]="NOT_ENABLED",i[i.NO_FILESYSTEM=13]="NO_FILESYSTEM",i[i.MKFS_ABORTED=14]="MKFS_ABORTED",i[i.TIMEOUT=15]="TIMEOUT",i[i.LOCKED=16]="LOCKED",i[i.NOT_ENOUGH_CORE=17]="NOT_ENOUGH_CORE",i[i.TOO_MANY_OPEN_FILES=18]="TOO_MANY_OPEN_FILES",i[i.INVALID_PARAMETER=19]="INVALID_PARAMETER"}(Y||(Y={})),function(i){i[i.RDO=1]="RDO",i[i.HID=2]="HID",i[i.SYS=4]="SYS",i[i.DIR=16]="DIR",i[i.ARC=32]="ARC"}(J||(J={})),function(i){i[i.READ=1]="READ",i[i.WRITE=2]="WRITE",i[i.OPEN_EXISTING=0]="OPEN_EXISTING",i[i.CREATE_NEW=4]="CREATE_NEW",i[i.CREATE_ALWAYS=8]="CREATE_ALWAYS",i[i.OPEN_ALWAYS=16]="OPEN_ALWAYS",i[i.OPEN_APPEND=48]="OPEN_APPEND"}(te||(te={}));const K=24;function E(i,n,t){const a=n();if(a!==Y.OK)throw t==null||t(),new Ne(i,a)}var oe,we;class Ge{constructor(n,t){O(this,oe);O(this,we);L(this,oe,n),L(this,we,t)}get ptr(){return u(this,oe)}get cSize(){return u(this,we).view.getUint16(u(this,oe)+10,!0)}}oe=new WeakMap,we=new WeakMap;var ie,ae;class dt{constructor(n,t){O(this,ie);O(this,ae);L(this,ie,n),L(this,ae,t)}get heap(){return new Uint8Array(u(this,ie).buffer)}get view(){return new DataView(u(this,ie).buffer)}allocString(n){if(n==null)return 0;const t=new TextEncoder().encode(n),a=this.alloc(t.length+1),o=this.heap.subarray(a,a+t.length+1);return o.set(t),o[o.length-1]=0,a}alloc(n){return u(this,ae).malloc(n)}free(n){u(this,ae).free(n)}decodeString(n,t){const a=this.heap.subarray(n,n+t),o=a.indexOf(0),l=o>=0?a.subarray(0,o):a;return new TextDecoder().decode(l)}enterScope(n){const t=[],a={alloc:o=>{const l=this.alloc(o);return t.unshift(l),l},allocString:o=>{const l=this.allocString(o);return t.unshift(l),l}};try{return n(a)}finally{for(const o of t)this.free(o)}}}ie=new WeakMap,ae=new WeakMap;class ue{constructor(n,t,a,o){re(this,"size");re(this,"date");re(this,"attrib");re(this,"name");this.size=n,this.date=t,this.attrib=a,this.name=o}static fromFilInfo(n){const t=new DataView(n.buffer,n.byteOffset,n.byteLength),a=t.getUint32(0,!0),o=t.getUint16(4,!0),l=1980+((65024&o)>>9),f=((480&o)>>5)-1,h=31&o,g=t.getUint16(6,!0),m=new Date(l,f,h,(63488&g)>>11,(2016&g)>>5,2*(31&g)),v=n[8],e=n.subarray(9,22),r=e.indexOf(0),s=r>=0?e.subarray(0,r):e,c=new TextDecoder().decode(s);return new ue(a,m,v,c)}get isReadOnly(){return!!(this.attrib&J.RDO)}get isDirectory(){return!!(this.attrib&J.DIR)}get isHidden(){return!!(this.attrib&J.HID)}get isArchive(){return!!(this.attrib&J.ARC)}get isSystem(){return!!(this.attrib&J.SYS)}}class Ne extends Error{constructor(t,a){super(`Error ${t}: ${Y[a]} (${a})`);re(this,"result");Object.setPrototypeOf(this,Ne.prototype),this.result=a}}var D,R,U;class _t{constructor(n,t,a){O(this,D);O(this,R);O(this,U);L(this,D,n),L(this,R,t),L(this,U,a)}get fp(){return u(this,D)}read(n,t){const a=u(this,R).f_read,o=u(this,D),l=t??n.length;return u(this,U).enterScope(f=>{const h=f.alloc(l),g=f.alloc(4);E("reading file",()=>a(o,h,l,g));const m=u(this,U).view.getUint32(g,!0);return n.set(u(this,U).heap.subarray(h,h+m)),m})}write(n,t){return u(this,U).enterScope(a=>{const o=t??n.length,l=a.alloc(o),f=a.alloc(4);return u(this,U).heap.subarray(l,l+o).set(n),E("writing file",()=>u(this,R).f_write(u(this,D),l,o,f)),u(this,U).view.getUint32(f,!0)})}close(){try{E("closing file",()=>u(this,R).f_close(u(this,D)))}finally{u(this,R).free(u(this,D))}}sync(){E("syncing disk",()=>u(this,R).f_sync(u(this,D)))}lseek(n){E("seeking",()=>u(this,R).f_lseek(u(this,D),n))}rewind(){this.lseek(0)}truncate(){E("truncating file",()=>u(this,R).f_truncate(u(this,D)))}expand(n,t){E("expanding file",()=>u(this,R).f_expand(u(this,D),n,t))}gets(n){return u(this,U).enterScope(t=>{const a=t.alloc(n+1);return E("reading string from file",()=>u(this,R).f_gets(a,n,u(this,D))),u(this,U).decodeString(a,n+1)})}putc(n){const t=n%256;return u(this,R).f_putc(t,u(this,D))}puts(n){const t=u(this,R).f_puts;return u(this,U).enterScope(a=>{const o=a.allocString(n);return t(o,u(this,D))})}tell(){return u(this,R).f_tell(u(this,D))}eof(n){return u(this,R).f_eof(u(this,D))}size(){return u(this,R).f_size(u(this,D))}error(n){return u(this,R).f_error(u(this,D))}}D=new WeakMap,R=new WeakMap,U=new WeakMap;var $,Z,V;class ze{constructor(n,t,a){O(this,$);O(this,Z);O(this,V);L(this,$,n),L(this,Z,t),L(this,V,a)}get dp(){return u(this,$)}close(){E("closing directory",()=>u(this,Z).f_closedir(u(this,$))),u(this,V).free(u(this,$))}read(){return u(this,V).enterScope(n=>{const t=n.alloc(K);E("reading directory",()=>u(this,Z).f_readdir(u(this,$),t));const a=u(this,V).heap.subarray(t,t+K);return ue.fromFilInfo(a)})}rewind(){E("rewinding directory",()=>u(this,Z).f_readdir(u(this,$),0))}findNext(){return u(this,V).enterScope(n=>{const t=n.alloc(K);E("searching directory for next match",()=>u(this,Z).f_findnext(u(this,$),t));const a=u(this,V).heap.subarray(t,t+K);return ue.fromFilInfo(a)})}*[Symbol.iterator](){let n;for(this.rewind();(n=this.read()).name!=="";)yield n}}$=new WeakMap,Z=new WeakMap,V=new WeakMap;var b,I;const Ue=class Ue{constructor(n,t){O(this,b);O(this,I);L(this,b,n),L(this,I,t)}static async create(n,t){const a=new WebAssembly.Memory({initial:8}),o=function(g,m,v){const e=0|(v??512),r=m.byteLength/e|0;return{env:{memory:g,disk_initialize:s=>Y.OK,disk_status:s=>Y.OK,disk_read:(s,c,d,p)=>{const _=m.subarray(d*e,(d+p)*e);return new Uint8Array(g.buffer).set(_,c),Y.OK},disk_write:(s,c,d,p)=>{const _=new Uint8Array(g.buffer).subarray(c,c+p*e);return m.set(_,d*e),Y.OK},disk_ioctl:(s,c,d)=>{const p=new DataView(g.buffer);switch(c){case Q.CTRL_SYNC:break;case Q.GET_SECTOR_SIZE:p.setUint16(d,e,!0);break;case Q.GET_SECTOR_COUNT:p.setUint32(d,r,!0);break;case Q.GET_BLOCK_SIZE:return 1;case Q.CTRL_TRIM:}return Y.OK},get_fattime:()=>{const s=new Date;return(s.getFullYear()-1980)%128<<25|s.getMonth()+1<<21|s.getDay()<<16|s.getHours()<<11|s.getMinutes()<<5|s.getSeconds()>>1}}}}(a,n,t),l=await async function(g){if(typeof window<"u"){const d=import.meta.url,p=d.substring(0,d.lastIndexOf("/")+1);return await WebAssembly.instantiateStreaming(fetch(`${p}/ff.wasm`),g)}const{readFile:m}=await ke(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),{join:v,dirname:e}=await ke(async()=>{const{join:d,dirname:p}=await import("./__vite-browser-external-BIHI7g3E.js");return{join:d,dirname:p}},[],import.meta.url),{fileURLToPath:r}=await ke(async()=>{const{fileURLToPath:d}=await import("./__vite-browser-external-BIHI7g3E.js");return{fileURLToPath:d}},[],import.meta.url),s=v(e(r(import.meta.url)),"ff.wasm"),c=await m(s);return await WebAssembly.instantiate(c,g)}(o),f=l.instance.exports,h=new dt(a,f);return new Ue(h,f)}fdisk(n,t){u(this,b).enterScope(a=>{const o=a.alloc(512),l=a.alloc(4*n.length);for(let f=0;f<n.length;f++)u(this,b).view.setUint32(l+4*f,n[f]);E("partitioning disk",()=>u(this,I).f_fdisk(t??0,l,o))})}mkfs(n){u(this,b).enterScope(t=>{const a=t.allocString((n==null?void 0:n.path)??"");let o=0;if(n!=null){o=t.alloc(16);const f=u(this,b).view;f.setUint8(o,(n==null?void 0:n.fmt)??0),f.setUint8(o+1,(n==null?void 0:n.nFat)??0),f.setUint32(o+2,(n==null?void 0:n.align)??0,!0),f.setUint32(o+6,(n==null?void 0:n.nRoot)??0,!0),f.setUint32(o+10,(n==null?void 0:n.auSize)??0,!0)}const l=t.alloc(4096);E("formatting disk",()=>u(this,I).f_mkfs(a,o,l,4096))})}mount(n,t){const a=o=>u(this,b).alloc(o);return u(this,b).enterScope(o=>{const l=a(560);for(let h=0;h<560;h++)u(this,b).heap[l+h]=0;const f=o.allocString(n??"");return E("mounting workspace",()=>u(this,I).f_mount(l,f,t??0),()=>u(this,b).free(l)),new Ge(l,u(this,b))})}unmount(n){return u(this,b).enterScope(t=>{try{const a=t.allocString(n??"");E("unmounting workspace",()=>u(this,I).f_mount(0,a,0))}finally{}})}open(n,t){return u(this,b).enterScope(a=>{const o=a.allocString(n),l=u(this,b).alloc(576);return E("opening file",()=>u(this,I).f_open(l,o,t),()=>u(this,b).free(l)),new _t(l,u(this,I),u(this,b))})}session(n,t=""){this.mount(t);try{return n()}finally{this.unmount(t)}}readFile(n){const t=this.stat(n),a=new Uint8Array(t.size),o=this.open(n,te.READ);try{return o.read(a),a}finally{o.close()}}writeFile(n,t){const a=this.open(n,te.WRITE|te.OPEN_ALWAYS);try{a.write(t)}finally{a.close()}}openDir(n){return u(this,b).enterScope(t=>{const a=t.allocString(n),o=u(this,b).alloc(64);return E("opening directory",()=>u(this,I).f_opendir(o,a),()=>u(this,b).free(o)),new ze(o,u(this,I),u(this,b))})}findFirst(n,t){return u(this,b).enterScope(a=>{const o=a.allocString(n),l=a.allocString(t),f=a.alloc(K),h=u(this,b).alloc(64);E("searching directory",()=>u(this,I).f_findfirst(h,f,o,l));const g=u(this,b).heap.subarray(f,f+K);return[new ze(h,u(this,I),u(this,b)),ue.fromFilInfo(g)]})}*find(n,t){let a,o;for([a,o]=this.findFirst(n,t);o.name!=="";)yield o,o=a.findNext()}stat(n){return u(this,b).enterScope(t=>{const a=t.allocString(n),o=t.alloc(K);E("getting file information",()=>u(this,I).f_stat(a,o));const l=u(this,b).heap.subarray(o,o+K);return ue.fromFilInfo(l)})}unlink(n){u(this,b).enterScope(t=>{const a=t.allocString(n);E("deleting file or directory",()=>u(this,I).f_unlink(a))})}rename(n,t){u(this,b).enterScope(a=>{const o=a.allocString(n),l=a.allocString(t);E("renaming file or directory",()=>u(this,I).f_rename(o,l))})}chmod(n,t,a){u(this,b).enterScope(o=>{const l=o.allocString(n);E("changing file or directory permissions",()=>u(this,I).f_chmod(l,t,a))})}utime(n,t){u(this,b).enterScope(a=>{const o=a.allocString(n),l=a.alloc(24),f=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDay();u(this,b).view.setUint16(l+4,f,!0);const h=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>>1;u(this,b).view.setUint16(l+6,h,!0),E("changing timestamp of file or directory",()=>u(this,I).f_utime(o,l))})}mkdir(n){u(this,I).f_mkdir,u(this,b).enterScope(t=>{const a=t.allocString(n);E("creating directory",()=>u(this,I).f_mkdir(a))})}chdir(n){u(this,b).enterScope(t=>{const a=t.allocString(n);E("changing current directory",()=>u(this,I).f_chdir(a))})}chdrive(n){u(this,b).enterScope(t=>{const a=t.allocString(n);E("changing current drive",()=>u(this,I).f_chdrive(a))})}getcwd(){return u(this,b).enterScope(n=>{const t=n.alloc(260);return E("getting current directory",()=>u(this,I).f_getcwd(t,260)),u(this,b).decodeString(t,260)})}getFree(n){return u(this,b).enterScope(t=>{const a=t.allocString(n??""),o=t.alloc(4),l=t.alloc(4);return E("getting free space on drive",()=>u(this,I).f_getfree(a,o,l)),[u(this,b).view.getUint32(o,!0),new Ge(l,u(this,b))]})}getLabel(n){return u(this,b).enterScope(t=>{const a=t.allocString(n??""),o=t.alloc(13);u(this,b).heap[o+12]=0;const l=t.alloc(4);return E("getting volume label",()=>u(this,I).f_getlabel(a,o,l)),[u(this,b).decodeString(o,13),u(this,b).view.getUint32(l,!0)]})}setLabel(n){u(this,b).enterScope(t=>{const a=t.allocString(n);E("setting volume label",()=>u(this,I).f_setlabel(a))})}setCP(n){const t=u(this,I).f_setcp;E("setting active code page",()=>t(n))}};b=new WeakMap,I=new WeakMap;let Se=Ue;function je(i){return i.arrayBuffer?i.arrayBuffer():new Promise((n,t)=>{const a=new FileReader;a.addEventListener("loadend",()=>{n(a.result)}),a.addEventListener("error",t),a.readAsArrayBuffer(i)})}async function pt(i){const n=await je(i);return new Uint8Array(n)}function Qe(i){return typeof Blob<"u"&&i instanceof Blob}function ye(i){return typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer}const ht=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function mt(i){return i.byteOffset===0&&i.byteLength===i.buffer.byteLength}class We{constructor(n){this.typedArray=n instanceof ArrayBuffer||ye(n)?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}async getLength(){return this.typedArray.byteLength}async read(n,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+n,t)}}class Ve{constructor(n){this.blob=n}async getLength(){return this.blob.size}async read(n,t){const a=this.blob.slice(n,n+t),o=await je(a);return new Uint8Array(o)}async sliceAsBlob(n,t,a=""){return this.blob.slice(n,n+t,a)}}function gt(i,n){var t=Uint8Array;if(i[0]==3&&i[1]==0)return n||new t(0);var a=yt,o=Je,l=vt,f=et,h=n==null;h&&(n=new t(i.length>>>2<<3));for(var g=0,m=0,v=0,e=0,r=0,s=0,c=0,d=0,p=0,_,y;g==0;){if(g=a(i,p,1),m=a(i,p+1,2),p+=3,m==0){p&7&&(p+=8-(p&7));var A=(p>>>3)+4,T=i[A-4]|i[A-3]<<8;h&&(n=Le(n,d+T)),n.set(new t(i.buffer,i.byteOffset+A,T),d),p=A+T<<3,d+=T;continue}if(h&&(n=Le(n,d+(1<<17))),m==1&&(_=w.flmap,y=w.fdmap,s=511,c=31),m==2){v=o(i,p,5)+257,e=o(i,p+5,5)+1,r=o(i,p+10,4)+4,p+=14;for(var S=0;S<38;S+=2)w.itree[S]=0,w.itree[S+1]=0;for(var F=1,S=0;S<r;S++){var X=o(i,p+S*3,3);w.itree[(w.ordr[S]<<1)+1]=X,X>F&&(F=X)}p+=3*r,me(w.itree,F),ge(w.itree,F,w.imap),_=w.lmap,y=w.dmap,p=l(w.imap,(1<<F)-1,v+e,i,p,w.ttree);var j=qe(w.ttree,0,v,w.ltree);s=(1<<j)-1;var x=qe(w.ttree,v,e,w.dtree);c=(1<<x)-1,me(w.ltree,j),ge(w.ltree,j,_),me(w.dtree,x),ge(w.dtree,x,y)}for(;;){var _e=_[f(i,p)&s];p+=_e&15;var z=_e>>>4;if(!(z>>>8))n[d++]=z;else{if(z==256)break;var pe=d+z-254;if(z>264){var ne=w.ldef[z-257];pe=d+(ne>>>3)+o(i,p,ne&7),p+=ne&7}var W=y[f(i,p)&c];p+=W&15;var xe=W>>>4,Ie=w.ddef[xe],be=(Ie>>>4)+a(i,p,Ie&15);for(p+=Ie&15,h&&(n=Le(n,d+(1<<17)));d<pe;)n[d]=n[d++-be],n[d]=n[d++-be],n[d]=n[d++-be],n[d]=n[d++-be];d=pe}}}return n.length==d?n:n.slice(0,d)}function Le(i,n){var t=i.length;if(n<=t)return i;var a=new Uint8Array(Math.max(t<<1,n));return a.set(i,0),a}function vt(i,n,t,a,o,l){for(var f=Je,h=et,g=0;g<t;){var m=i[h(a,o)&n];o+=m&15;var v=m>>>4;if(v<=15)l[g]=v,g++;else{var e=0,r=0;v==16?(r=3+f(a,o,2),o+=2,e=l[g-1]):v==17?(r=3+f(a,o,3),o+=3):v==18&&(r=11+f(a,o,7),o+=7);for(var s=g+r;g<s;)l[g]=e,g++}}return o}function qe(i,n,t,a){for(var o=0,l=0,f=a.length>>>1;l<t;){var h=i[l+n];a[l<<1]=0,a[(l<<1)+1]=h,h>o&&(o=h),l++}for(;l<f;)a[l<<1]=0,a[(l<<1)+1]=0,l++;return o}function me(i,n){for(var t=i.length,a,o,l,f,h,g=w.bl_count,f=0;f<=n;f++)g[f]=0;for(f=1;f<t;f+=2)g[i[f]]++;var m=w.next_code;for(a=0,g[0]=0,o=1;o<=n;o++)a=a+g[o-1]<<1,m[o]=a;for(l=0;l<t;l+=2)h=i[l+1],h!=0&&(i[l]=m[h],m[h]++)}function ge(i,n,t){for(var a=i.length,o=w.rev15,l=0;l<a;l+=2)if(i[l+1]!=0)for(var f=l>>1,h=i[l+1],g=f<<4|h,m=n-h,v=i[l]<<m,e=v+(1<<m);v!=e;){var r=o[v]>>>15-n;t[r]=g,v++}}function Ye(i,n){for(var t=w.rev15,a=15-n,o=0;o<i.length;o+=2){var l=i[o]<<n-i[o+1];i[o]=t[l]>>>a}}function Je(i,n,t){return(i[n>>>3]|i[(n>>>3)+1]<<8)>>>(n&7)&(1<<t)-1}function yt(i,n,t){return(i[n>>>3]|i[(n>>>3)+1]<<8|i[(n>>>3)+2]<<16)>>>(n&7)&(1<<t)-1}function et(i,n){return(i[n>>>3]|i[(n>>>3)+1]<<8|i[(n>>>3)+2]<<16)>>>(n&7)}const w=function(){var i=Uint16Array,n=Uint32Array;return{next_code:new i(16),bl_count:new i(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new i(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new i(512),fltree:[],fdmap:new i(32),fdtree:[],lmap:new i(32768),ltree:[],ttree:[],dmap:new i(32768),dtree:[],imap:new i(512),itree:[],rev15:new i(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new i(65536),prev:new i(32768)}}();(function(){for(var i=32768,n=0;n<i;n++){var t=n;t=(t&2863311530)>>>1|(t&1431655765)<<1,t=(t&3435973836)>>>2|(t&858993459)<<2,t=(t&4042322160)>>>4|(t&252645135)<<4,t=(t&4278255360)>>>8|(t&16711935)<<8,w.rev15[n]=(t>>>16|t<<16)>>>17}function a(o,l,f){for(;l--!=0;)o.push(0,f)}for(var n=0;n<32;n++)w.ldef[n]=w.of0[n]<<3|w.exb[n],w.ddef[n]=w.df0[n]<<4|w.dxb[n];a(w.fltree,144,8),a(w.fltree,112,9),a(w.fltree,24,7),a(w.fltree,8,8),me(w.fltree,9),ge(w.fltree,9,w.flmap),Ye(w.fltree,9),a(w.fdtree,32,5),me(w.fdtree,5),ge(w.fdtree,5,w.fdmap),Ye(w.fdtree,5),a(w.itree,19,0),a(w.ltree,286,0),a(w.dtree,30,0),a(w.ttree,320,0)})();const Xe={table:function(){for(var i=new Uint32Array(256),n=0;n<256;n++){for(var t=n,a=0;a<8;a++)t&1?t=3988292384^t>>>1:t=t>>>1;i[n]=t}return i}(),update:function(i,n,t,a){for(var o=0;o<a;o++)i=Xe.table[(i^n[t+o])&255]^i>>>8;return i},crc:function(i,n,t){return Xe.update(4294967295,i,n,t)^4294967295}};function wt(i,n){return gt(i,n)}const Ze={numWorkers:1,workerURL:"",useWorkers:!1};let At=0;const Te=[];function De(i){return new Promise((n,t)=>{const a=new Worker(i);a.onmessage=o=>{o.data==="start"?(a.onerror=void 0,a.onmessage=void 0,n(a)):t(new Error(`unexpected message: ${o.data}`))},a.onerror=t})}function bt(i,n){return i.require?i.require(n):{}}(function(){if(ht){const{Worker:i}=bt(module,"worker_threads");return{async createWorker(n){return new i(n)},addEventListener(n,t){n.on("message",a=>{t({target:n,data:a})})},async terminate(n){await n.terminate()}}}else return{async createWorker(i){try{return await De(i)}catch{console.warn("could not load worker:",i)}let n;try{const t=await fetch(i,{mode:"cors"});if(!t.ok)throw new Error(`could not load: ${i}`);n=await t.text(),i=URL.createObjectURL(new Blob([n],{type:"application/javascript"}));const a=await De(i);return Ze.workerURL=i,a}catch{console.warn("could not load worker via fetch:",i)}if(n!==void 0)try{i=`data:application/javascript;base64,${btoa(n)}`;const t=await De(i);return Ze.workerURL=i,t}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(i,n){i.addEventListener("message",n)},async terminate(i){i.terminate()}}})();function Tt(i,n,t,a){const o=new Uint8Array(n);wt(i,o),a(t?new Blob([o],{type:t}):o.buffer)}async function St(){if(Te.length!==0)for(;Te.length;){const{src:i,uncompressedSize:n,type:t,resolve:a}=Te.shift();let o=i;Qe(i)&&(o=await pt(i)),Tt(o,n,t,a)}}function tt(i,n,t){return new Promise((a,o)=>{Te.push({src:i,uncompressedSize:n,type:t,resolve:a,reject:o,id:At++}),St()})}function Et(i,n){const t=i&31,a=(i>>5&15)-1,o=(i>>9&127)+1980,l=0,f=(n&31)*2,h=n>>5&63,g=n>>11&31;return new Date(o,a,t,g,h,f,l)}class xt{constructor(n,t){this._reader=n,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=Et(t.lastModFileDate,t.lastModFileTime),this.isDirectory=t.uncompressedSize===0&&t.name.endsWith("/"),this.encrypted=!!(t.generalPurposeBitFlag&1),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(n="application/octet-stream"){return await Ct(this._reader,this._rawEntry,n)}async arrayBuffer(){return await Mt(this._reader,this._rawEntry)}async text(){const n=await this.arrayBuffer();return ve(new Uint8Array(n))}async json(){const n=await this.text();return JSON.parse(n)}}const Pe=22,It=65535,Ot=101010256,kt=101075792;async function de(i,n,t){return await i.read(n,t)}async function Fe(i,n,t,a){return i.sliceAsBlob?await i.sliceAsBlob(n,t,a):await i.read(n,t)}const Lt={unsigned(){return 0}};function B(i,n){return i[n]+i[n+1]*256}function C(i,n){return i[n]+i[n+1]*256+i[n+2]*65536+i[n+3]*16777216}function ee(i,n){return C(i,n)+C(i,n+4)*4294967296}const Dt=new TextDecoder;function ve(i,n){return ye(i.buffer)&&(i=new Uint8Array(i)),Dt.decode(i)}async function Pt(i,n){const t=Math.min(Pe+It,n),a=n-t,o=await de(i,a,t);for(let l=t-Pe;l>=0;--l){if(C(o,l)!==Ot)continue;const f=new Uint8Array(o.buffer,o.byteOffset+l,o.byteLength-l),h=B(f,4);if(h!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${h}`);const g=B(f,10),m=C(f,12),v=C(f,16),e=B(f,20),r=f.length-Pe;if(e!==r)throw new Error(`invalid comment length. expected: ${r}, actual: ${e}`);const s=new Uint8Array(f.buffer,f.byteOffset+22,e),c=ve(s);return g===65535||v===4294967295?await Ft(i,a+l,c,s):await nt(i,v,m,g,c,s)}throw new Error("could not find end of central directory. maybe not zip file")}const Rt=117853008;async function Ft(i,n,t,a){const o=n-20,l=await de(i,o,20);if(C(l,0)!==Rt)throw new Error("invalid zip64 end of central directory locator signature");const f=ee(l,8),h=await de(i,f,56);if(C(h,0)!==kt)throw new Error("invalid zip64 end of central directory record signature");const g=ee(h,32),m=ee(h,40),v=ee(h,48);return nt(i,v,m,g,t,a)}const Bt=33639248;async function nt(i,n,t,a,o,l){let f=0;const h=await de(i,n,t),g=[];for(let v=0;v<a;++v){const e=h.subarray(f,f+46),r=C(e,0);if(r!==Bt)throw new Error(`invalid central directory file header signature: 0x${r.toString(16)}`);const s={versionMadeBy:B(e,4),versionNeededToExtract:B(e,6),generalPurposeBitFlag:B(e,8),compressionMethod:B(e,10),lastModFileTime:B(e,12),lastModFileDate:B(e,14),crc32:C(e,16),compressedSize:C(e,20),uncompressedSize:C(e,24),fileNameLength:B(e,28),extraFieldLength:B(e,30),fileCommentLength:B(e,32),internalFileAttributes:B(e,36),externalFileAttributes:C(e,38),relativeOffsetOfLocalHeader:C(e,42)};if(s.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");f+=46;const c=h.subarray(f,f+s.fileNameLength+s.extraFieldLength+s.fileCommentLength);s.nameBytes=c.slice(0,s.fileNameLength),s.name=ve(s.nameBytes);const d=s.fileNameLength+s.extraFieldLength,p=c.slice(s.fileNameLength,d);s.extraFields=[];let _=0;for(;_<p.length-3;){const A=B(p,_+0),T=B(p,_+2),S=_+4,F=S+T;if(F>p.length)throw new Error("extra field length exceeds extra field buffer size");s.extraFields.push({id:A,data:p.slice(S,F)}),_=F}if(s.commentBytes=c.slice(d,d+s.fileCommentLength),s.comment=ve(s.commentBytes),f+=c.length,s.uncompressedSize===4294967295||s.compressedSize===4294967295||s.relativeOffsetOfLocalHeader===4294967295){const A=s.extraFields.find(F=>F.id===1);if(!A)throw new Error("expected zip64 extended information extra field");const T=A.data;let S=0;if(s.uncompressedSize===4294967295){if(S+8>T.length)throw new Error("zip64 extended information extra field does not include uncompressed size");s.uncompressedSize=ee(T,S),S+=8}if(s.compressedSize===4294967295){if(S+8>T.length)throw new Error("zip64 extended information extra field does not include compressed size");s.compressedSize=ee(T,S),S+=8}if(s.relativeOffsetOfLocalHeader===4294967295){if(S+8>T.length)throw new Error("zip64 extended information extra field does not include relative header offset");s.relativeOffsetOfLocalHeader=ee(T,S),S+=8}}const y=s.extraFields.find(A=>A.id===28789&&A.data.length>=6&&A.data[0]===1&&C(A.data,1),Lt.unsigned(s.nameBytes));if(y&&(s.fileName=ve(y.data.slice(5))),s.compressionMethod===0){let A=s.uncompressedSize;if(s.generalPurposeBitFlag&1&&(A+=12),s.compressedSize!==A)throw new Error(`compressed size mismatch for stored file: ${s.compressedSize} != ${A}`)}g.push(s)}return{zip:{comment:o,commentBytes:l},entries:g.map(v=>new xt(i,v))}}async function rt(i,n){if(n.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");const t=await de(i,n.relativeOffsetOfLocalHeader,30),a=await i.getLength(),o=C(t,0);if(o!==67324752)throw new Error(`invalid local file header signature: 0x${o.toString(16)}`);const l=B(t,26),f=B(t,28),h=n.relativeOffsetOfLocalHeader+t.length+l+f;let g;if(n.compressionMethod===0)g=!1;else if(n.compressionMethod===8)g=!0;else throw new Error(`unsupported compression method: ${n.compressionMethod}`);const m=h,v=m+n.compressedSize;if(n.compressedSize!==0&&v>a)throw new Error(`file data overflows file bounds: ${m} +  ${n.compressedSize}  > ${a}`);return{decompress:g,fileDataStart:m}}async function Mt(i,n){const{decompress:t,fileDataStart:a}=await rt(i,n);if(!t){const f=await de(i,a,n.compressedSize);return mt(f)?f.buffer:f.slice().buffer}const o=await Fe(i,a,n.compressedSize);return await tt(o,n.uncompressedSize)}async function Ct(i,n,t){const{decompress:a,fileDataStart:o}=await rt(i,n);if(!a){const h=await Fe(i,o,n.compressedSize,t);return Qe(h)?h:new Blob([ye(h.buffer)?new Uint8Array(h):h],{type:t})}const l=await Fe(i,o,n.compressedSize);return await tt(l,n.uncompressedSize,t)}async function Nt(i){let n;if(typeof Blob<"u"&&i instanceof Blob)n=new Ve(i);else if(i instanceof ArrayBuffer||i&&i.buffer&&i.buffer instanceof ArrayBuffer)n=new We(i);else if(ye(i)||ye(i.buffer))n=new We(i);else if(typeof i=="string"){const a=await fetch(i);if(!a.ok)throw new Error(`failed http request ${i}, status: ${a.status}: ${a.statusText}`);const o=await a.blob();n=new Ve(o)}else if(typeof i.getLength=="function"&&typeof i.read=="function")n=i;else throw new Error("unsupported source type");const t=await n.getLength();if(t>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${t}. Only file sizes up 4503599627370496 bytes are supported`);return await Pt(n,t)}var se,Ae,Ee,ot;class Ut{constructor(){O(this,Ee);O(this,se,{});O(this,Ae,new Set)}toFatPath(n){const o=(n.startsWith("/")||n.startsWith("\\")?n.substring(1):n).split(/[\\/]/).map(l=>l.toUpperCase()).map(l=>{if(!u(this,se)[l]){const f=P(this,Ee,ot).call(this,l);u(this,se)[l]=f}return u(this,se)[l]});return console.log("SANITIZING:",n,o.join("\\")),o.join("\\")}}se=new WeakMap,Ae=new WeakMap,Ee=new WeakSet,ot=function(n){const t=n.replace(/[\\/:*?"<>|]/g,""),a=t.lastIndexOf("."),o=(a===-1?t:t.slice(0,a)).slice(0,8),l=(a===-1?"":t.slice(a+1)).slice(0,3);let f=`${o}.${l}`.replace(/\.$/,""),h=1;for(;u(this,Ae).has(f);){const g=`~${h}`;f=`${o.slice(0,8-g.length)}${g}.${l}`.replace(/\.$/,""),h++}return u(this,Ae).add(f),f};async function Ht(i){const t=await(await fetch(i)).arrayBuffer();return new Uint8Array(t)}async function $t(i){const n=new Uint8Array(i),t=await Se.create(n);return t.mkfs({fmt:Re.FAT,nFat:2,auSize:2048}),{image:n,disk:t}}async function it(i){if("url"in i)return await Ht(i.url);if("array"in i)return i.array;if("buffer"in i)return new Uint8Array(i.buffer);throw new Error("Unrecognized contents")}async function Gt(i,n){const t=await it(i),a=await Se.create(t);return a.session(()=>{if(n&&n.length>0){const o=a.readFile("AUTOEXEC.BAT"),f=[new TextDecoder().decode(o),"C:",...n].join(`\r
`),h=new TextEncoder().encode(f);a.writeFile("AUTOEXEC.BAT",h)}}),t}function zt(i){const n=i.split("/"),t=[];let a="";for(let o=0;o<n.length-1;o++)a=a?`${a}/${n[o]}`:n[o],t.push(a);return t}async function Wt(i){const n=await it(i),t=await Nt(n),a=await Promise.all(t.entries.map(async m=>({name:m.name,contents:m.name.endsWith("/")?null:new Uint8Array(await m.arrayBuffer())}))),o=1<<25,{image:l,disk:f}=await $t(o);f.mount();const h=new Ut,g=new Set;for(const{name:m,contents:v}of a)try{if(v===null){const e=m.endsWith("/")?m.substring(0,m.length-1):m;g.has(e)||(f.mkdir(h.toFatPath(e)),g.add(e))}else{for(const e of zt(m)){const r=e.endsWith("/")?e.substring(0,e.length-1):e;g.has(r)||(f.mkdir(h.toFatPath(r)),g.add(r))}if(!g.has(m)){g.add(m);const e=f.open(h.toFatPath(m),te.WRITE|te.CREATE_NEW);e.write(v),e.close()}}}catch(e){console.log(`Failed to create '${m}':`,e)}return f.unmount(),{image:l,disk:f,pathMap:h}}var he=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Be={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(i){(function(){var n=function(){this.init()};n.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var r=this||t;if(e=parseFloat(e),r.ctx||v(),typeof e<"u"&&e>=0&&e<=1){if(r._volume=e,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var s=0;s<r._howls.length;s++)if(!r._howls[s]._webAudio)for(var c=r._howls[s]._getSoundIds(),d=0;d<c.length;d++){var p=r._howls[s]._soundById(c[d]);p&&p._node&&(p._node.volume=p._volume*e)}return r}return r._volume},mute:function(e){var r=this||t;r.ctx||v(),r._muted=e,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e?0:r._volume,t.ctx.currentTime);for(var s=0;s<r._howls.length;s++)if(!r._howls[s]._webAudio)for(var c=r._howls[s]._getSoundIds(),d=0;d<c.length;d++){var p=r._howls[s]._soundById(c[d]);p&&p._node&&(p._node.muted=e?!0:p._muted)}return r},stop:function(){for(var e=this||t,r=0;r<e._howls.length;r++)e._howls[r].stop();return e},unload:function(){for(var e=this||t,r=e._howls.length-1;r>=0;r--)e._howls[r].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,v()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var r=new Audio;typeof r.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var r=new Audio;r.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,r=null;try{r=typeof Audio<"u"?new Audio:null}catch{return e}if(!r||typeof r.canPlayType!="function")return e;var s=r.canPlayType("audio/mpeg;").replace(/^no$/,""),c=e._navigator?e._navigator.userAgent:"",d=c.match(/OPR\/(\d+)/g),p=d&&parseInt(d[0].split("/")[1],10)<33,_=c.indexOf("Safari")!==-1&&c.indexOf("Chrome")===-1,y=c.match(/Version\/(.*?) /),A=_&&y&&parseInt(y[1],10)<15;return e._codecs={mp3:!!(!p&&(s||r.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!s,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!A&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!A&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(s){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var c=new Audio;c._unlocked=!0,e._releaseHtml5Audio(c)}catch{e.noAudio=!0;break}for(var d=0;d<e._howls.length;d++)if(!e._howls[d]._webAudio)for(var p=e._howls[d]._getSoundIds(),_=0;_<p.length;_++){var y=e._howls[d]._soundById(p[_]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}e._autoResume();var A=e.ctx.createBufferSource();A.buffer=e._scratchBuffer,A.connect(e.ctx.destination),typeof A.start>"u"?A.noteOn(0):A.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),A.onended=function(){A.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var T=0;T<e._howls.length;T++)e._howls[T]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var r=new Audio().play();return r&&typeof Promise<"u"&&(r instanceof Promise||typeof r.then=="function")&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var r=this||t;return e._unlocked&&r._html5AudioPool.push(e),r},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!t.usingWebAudio)){for(var r=0;r<e._howls.length;r++)if(e._howls[r]._webAudio){for(var s=0;s<e._howls[r]._sounds.length;s++)if(!e._howls[r]._sounds[s]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var c=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(c,c)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!t.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var t=new n,a=function(e){var r=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}r.init(e)};a.prototype={init:function(e){var r=this;return t.ctx||v(),r._autoplay=e.autoplay||!1,r._format=typeof e.format!="string"?e.format:[e.format],r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src=typeof e.src!="string"?e.src:[e.src],r._volume=e.volume!==void 0?e.volume:1,r._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=e.onend?[{fn:e.onend}]:[],r._onfade=e.onfade?[{fn:e.onfade}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._onstop=e.onstop?[{fn:e.onstop}]:[],r._onmute=e.onmute?[{fn:e.onmute}]:[],r._onvolume=e.onvolume?[{fn:e.onvolume}]:[],r._onrate=e.onrate?[{fn:e.onrate}]:[],r._onseek=e.onseek?[{fn:e.onseek}]:[],r._onunlock=e.onunlock?[{fn:e.onunlock}]:[],r._onresume=[],r._webAudio=t.usingWebAudio&&!r._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&r._preload!=="none"&&r.load(),r},load:function(){var e=this,r=null;if(t.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var s=0;s<e._src.length;s++){var c,d;if(e._format&&e._format[s])c=e._format[s];else{if(d=e._src[s],typeof d!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}c=/^data:audio\/([^;,]+);/i.exec(d),c||(c=/\.([^.]+)$/.exec(d.split("?",1)[0])),c&&(c=c[1].toLowerCase())}if(c||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),c&&t.codecs(c)){r=e._src[s];break}}if(!r){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=r,e._state="loading",window.location.protocol==="https:"&&r.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&f(e),e},play:function(e,r){var s=this,c=null;if(typeof e=="number")c=e,e=null;else{if(typeof e=="string"&&s._state==="loaded"&&!s._sprite[e])return null;if(typeof e>"u"&&(e="__default",!s._playLock)){for(var d=0,p=0;p<s._sounds.length;p++)s._sounds[p]._paused&&!s._sounds[p]._ended&&(d++,c=s._sounds[p]._id);d===1?e=null:c=null}}var _=c?s._soundById(c):s._inactiveSound();if(!_)return null;if(c&&!e&&(e=_._sprite||"__default"),s._state!=="loaded"){_._sprite=e,_._ended=!1;var y=_._id;return s._queue.push({event:"play",action:function(){s.play(y)}}),y}if(c&&!_._paused)return r||s._loadQueue("play"),_._id;s._webAudio&&t._autoResume();var A=Math.max(0,_._seek>0?_._seek:s._sprite[e][0]/1e3),T=Math.max(0,(s._sprite[e][0]+s._sprite[e][1])/1e3-A),S=T*1e3/Math.abs(_._rate),F=s._sprite[e][0]/1e3,X=(s._sprite[e][0]+s._sprite[e][1])/1e3;_._sprite=e,_._ended=!1;var j=function(){_._paused=!1,_._seek=A,_._start=F,_._stop=X,_._loop=!!(_._loop||s._sprite[e][2])};if(A>=X){s._ended(_);return}var x=_._node;if(s._webAudio){var _e=function(){s._playLock=!1,j(),s._refreshBuffer(_);var W=_._muted||s._muted?0:_._volume;x.gain.setValueAtTime(W,t.ctx.currentTime),_._playStart=t.ctx.currentTime,typeof x.bufferSource.start>"u"?_._loop?x.bufferSource.noteGrainOn(0,A,86400):x.bufferSource.noteGrainOn(0,A,T):_._loop?x.bufferSource.start(0,A,86400):x.bufferSource.start(0,A,T),S!==1/0&&(s._endTimers[_._id]=setTimeout(s._ended.bind(s,_),S)),r||setTimeout(function(){s._emit("play",_._id),s._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?_e():(s._playLock=!0,s.once("resume",_e),s._clearTimer(_._id))}else{var z=function(){x.currentTime=A,x.muted=_._muted||s._muted||t._muted||x.muted,x.volume=_._volume*t.volume(),x.playbackRate=_._rate;try{var W=x.play();if(W&&typeof Promise<"u"&&(W instanceof Promise||typeof W.then=="function")?(s._playLock=!0,j(),W.then(function(){s._playLock=!1,x._unlocked=!0,r?s._loadQueue():s._emit("play",_._id)}).catch(function(){s._playLock=!1,s._emit("playerror",_._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),_._ended=!0,_._paused=!0})):r||(s._playLock=!1,j(),s._emit("play",_._id)),x.playbackRate=_._rate,x.paused){s._emit("playerror",_._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||_._loop?s._endTimers[_._id]=setTimeout(s._ended.bind(s,_),S):(s._endTimers[_._id]=function(){s._ended(_),x.removeEventListener("ended",s._endTimers[_._id],!1)},x.addEventListener("ended",s._endTimers[_._id],!1))}catch(xe){s._emit("playerror",_._id,xe)}};x.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(x.src=s._src,x.load());var pe=window&&window.ejecta||!x.readyState&&t._navigator.isCocoonJS;if(x.readyState>=3||pe)z();else{s._playLock=!0,s._state="loading";var ne=function(){s._state="loaded",z(),x.removeEventListener(t._canPlayEvent,ne,!1)};x.addEventListener(t._canPlayEvent,ne,!1),s._clearTimer(_._id)}}return _._id},pause:function(e){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(e)}}),r;for(var s=r._getSoundIds(e),c=0;c<s.length;c++){r._clearTimer(s[c]);var d=r._soundById(s[c]);if(d&&!d._paused&&(d._seek=r.seek(s[c]),d._rateSeek=0,d._paused=!0,r._stopFade(s[c]),d._node))if(r._webAudio){if(!d._node.bufferSource)continue;typeof d._node.bufferSource.stop>"u"?d._node.bufferSource.noteOff(0):d._node.bufferSource.stop(0),r._cleanBuffer(d._node)}else(!isNaN(d._node.duration)||d._node.duration===1/0)&&d._node.pause();arguments[1]||r._emit("pause",d?d._id:null)}return r},stop:function(e,r){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"stop",action:function(){s.stop(e)}}),s;for(var c=s._getSoundIds(e),d=0;d<c.length;d++){s._clearTimer(c[d]);var p=s._soundById(c[d]);p&&(p._seek=p._start||0,p._rateSeek=0,p._paused=!0,p._ended=!0,s._stopFade(c[d]),p._node&&(s._webAudio?p._node.bufferSource&&(typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),s._cleanBuffer(p._node)):(!isNaN(p._node.duration)||p._node.duration===1/0)&&(p._node.currentTime=p._start||0,p._node.pause(),p._node.duration===1/0&&s._clearSound(p._node))),r||s._emit("stop",p._id))}return s},mute:function(e,r){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"mute",action:function(){s.mute(e,r)}}),s;if(typeof r>"u")if(typeof e=="boolean")s._muted=e;else return s._muted;for(var c=s._getSoundIds(r),d=0;d<c.length;d++){var p=s._soundById(c[d]);p&&(p._muted=e,p._interval&&s._stopFade(p._id),s._webAudio&&p._node?p._node.gain.setValueAtTime(e?0:p._volume,t.ctx.currentTime):p._node&&(p._node.muted=t._muted?!0:e),s._emit("mute",p._id))}return s},volume:function(){var e=this,r=arguments,s,c;if(r.length===0)return e._volume;if(r.length===1||r.length===2&&typeof r[1]>"u"){var d=e._getSoundIds(),p=d.indexOf(r[0]);p>=0?c=parseInt(r[0],10):s=parseFloat(r[0])}else r.length>=2&&(s=parseFloat(r[0]),c=parseInt(r[1],10));var _;if(typeof s<"u"&&s>=0&&s<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,r)}}),e;typeof c>"u"&&(e._volume=s),c=e._getSoundIds(c);for(var y=0;y<c.length;y++)_=e._soundById(c[y]),_&&(_._volume=s,r[2]||e._stopFade(c[y]),e._webAudio&&_._node&&!_._muted?_._node.gain.setValueAtTime(s,t.ctx.currentTime):_._node&&!_._muted&&(_._node.volume=s*t.volume()),e._emit("volume",_._id))}else return _=c?e._soundById(c):e._sounds[0],_?_._volume:0;return e},fade:function(e,r,s,c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"fade",action:function(){d.fade(e,r,s,c)}}),d;e=Math.min(Math.max(0,parseFloat(e)),1),r=Math.min(Math.max(0,parseFloat(r)),1),s=parseFloat(s),d.volume(e,c);for(var p=d._getSoundIds(c),_=0;_<p.length;_++){var y=d._soundById(p[_]);if(y){if(c||d._stopFade(p[_]),d._webAudio&&!y._muted){var A=t.ctx.currentTime,T=A+s/1e3;y._volume=e,y._node.gain.setValueAtTime(e,A),y._node.gain.linearRampToValueAtTime(r,T)}d._startFadeInterval(y,e,r,s,p[_],typeof c>"u")}}return d},_startFadeInterval:function(e,r,s,c,d,p){var _=this,y=r,A=s-r,T=Math.abs(A/.01),S=Math.max(4,T>0?c/T:c),F=Date.now();e._fadeTo=s,e._interval=setInterval(function(){var X=(Date.now()-F)/c;F=Date.now(),y+=A*X,y=Math.round(y*100)/100,A<0?y=Math.max(s,y):y=Math.min(s,y),_._webAudio?e._volume=y:_.volume(y,e._id,!0),p&&(_._volume=y),(s<r&&y<=s||s>r&&y>=s)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,_.volume(s,e._id),_._emit("fade",e._id))},S)},_stopFade:function(e){var r=this,s=r._soundById(e);return s&&s._interval&&(r._webAudio&&s._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(s._interval),s._interval=null,r.volume(s._fadeTo,e),s._fadeTo=null,r._emit("fade",e)),r},loop:function(){var e=this,r=arguments,s,c,d;if(r.length===0)return e._loop;if(r.length===1)if(typeof r[0]=="boolean")s=r[0],e._loop=s;else return d=e._soundById(parseInt(r[0],10)),d?d._loop:!1;else r.length===2&&(s=r[0],c=parseInt(r[1],10));for(var p=e._getSoundIds(c),_=0;_<p.length;_++)d=e._soundById(p[_]),d&&(d._loop=s,e._webAudio&&d._node&&d._node.bufferSource&&(d._node.bufferSource.loop=s,s&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop,e.playing(p[_])&&(e.pause(p[_],!0),e.play(p[_],!0)))));return e},rate:function(){var e=this,r=arguments,s,c;if(r.length===0)c=e._sounds[0]._id;else if(r.length===1){var d=e._getSoundIds(),p=d.indexOf(r[0]);p>=0?c=parseInt(r[0],10):s=parseFloat(r[0])}else r.length===2&&(s=parseFloat(r[0]),c=parseInt(r[1],10));var _;if(typeof s=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,r)}}),e;typeof c>"u"&&(e._rate=s),c=e._getSoundIds(c);for(var y=0;y<c.length;y++)if(_=e._soundById(c[y]),_){e.playing(c[y])&&(_._rateSeek=e.seek(c[y]),_._playStart=e._webAudio?t.ctx.currentTime:_._playStart),_._rate=s,e._webAudio&&_._node&&_._node.bufferSource?_._node.bufferSource.playbackRate.setValueAtTime(s,t.ctx.currentTime):_._node&&(_._node.playbackRate=s);var A=e.seek(c[y]),T=(e._sprite[_._sprite][0]+e._sprite[_._sprite][1])/1e3-A,S=T*1e3/Math.abs(_._rate);(e._endTimers[c[y]]||!_._paused)&&(e._clearTimer(c[y]),e._endTimers[c[y]]=setTimeout(e._ended.bind(e,_),S)),e._emit("rate",_._id)}}else return _=e._soundById(c),_?_._rate:e._rate;return e},seek:function(){var e=this,r=arguments,s,c;if(r.length===0)e._sounds.length&&(c=e._sounds[0]._id);else if(r.length===1){var d=e._getSoundIds(),p=d.indexOf(r[0]);p>=0?c=parseInt(r[0],10):e._sounds.length&&(c=e._sounds[0]._id,s=parseFloat(r[0]))}else r.length===2&&(s=parseFloat(r[0]),c=parseInt(r[1],10));if(typeof c>"u")return 0;if(typeof s=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,r)}}),e;var _=e._soundById(c);if(_)if(typeof s=="number"&&s>=0){var y=e.playing(c);y&&e.pause(c,!0),_._seek=s,_._ended=!1,e._clearTimer(c),!e._webAudio&&_._node&&!isNaN(_._node.duration)&&(_._node.currentTime=s);var A=function(){y&&e.play(c,!0),e._emit("seek",c)};if(y&&!e._webAudio){var T=function(){e._playLock?setTimeout(T,0):A()};setTimeout(T,0)}else A()}else if(e._webAudio){var S=e.playing(c)?t.ctx.currentTime-_._playStart:0,F=_._rateSeek?_._rateSeek-_._seek:0;return _._seek+(F+S*Math.abs(_._rate))}else return _._node.currentTime;return e},playing:function(e){var r=this;if(typeof e=="number"){var s=r._soundById(e);return s?!s._paused:!1}for(var c=0;c<r._sounds.length;c++)if(!r._sounds[c]._paused)return!0;return!1},duration:function(e){var r=this,s=r._duration,c=r._soundById(e);return c&&(s=r._sprite[c._sprite][1]/1e3),s},state:function(){return this._state},unload:function(){for(var e=this,r=e._sounds,s=0;s<r.length;s++)r[s]._paused||e.stop(r[s]._id),e._webAudio||(e._clearSound(r[s]._node),r[s]._node.removeEventListener("error",r[s]._errorFn,!1),r[s]._node.removeEventListener(t._canPlayEvent,r[s]._loadFn,!1),r[s]._node.removeEventListener("ended",r[s]._endFn,!1),t._releaseHtml5Audio(r[s]._node)),delete r[s]._node,e._clearTimer(r[s]._id);var c=t._howls.indexOf(e);c>=0&&t._howls.splice(c,1);var d=!0;for(s=0;s<t._howls.length;s++)if(t._howls[s]._src===e._src||e._src.indexOf(t._howls[s]._src)>=0){d=!1;break}return l&&d&&delete l[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,r,s,c){var d=this,p=d["_on"+e];return typeof r=="function"&&p.push(c?{id:s,fn:r,once:c}:{id:s,fn:r}),d},off:function(e,r,s){var c=this,d=c["_on"+e],p=0;if(typeof r=="number"&&(s=r,r=null),r||s)for(p=0;p<d.length;p++){var _=s===d[p].id;if(r===d[p].fn&&_||!r&&_){d.splice(p,1);break}}else if(e)c["_on"+e]=[];else{var y=Object.keys(c);for(p=0;p<y.length;p++)y[p].indexOf("_on")===0&&Array.isArray(c[y[p]])&&(c[y[p]]=[])}return c},once:function(e,r,s){var c=this;return c.on(e,r,s,1),c},_emit:function(e,r,s){for(var c=this,d=c["_on"+e],p=d.length-1;p>=0;p--)(!d[p].id||d[p].id===r||e==="load")&&(setTimeout((function(_){_.call(this,r,s)}).bind(c,d[p].fn),0),d[p].once&&c.off(e,d[p].fn,d[p].id));return c._loadQueue(e),c},_loadQueue:function(e){var r=this;if(r._queue.length>0){var s=r._queue[0];s.event===e&&(r._queue.shift(),r._loadQueue()),e||s.action()}return r},_ended:function(e){var r=this,s=e._sprite;if(!r._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(r._ended.bind(r,e),100),r;var c=!!(e._loop||r._sprite[s][2]);if(r._emit("end",e._id),!r._webAudio&&c&&r.stop(e._id,!0).play(e._id),r._webAudio&&c){r._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var d=(e._stop-e._start)*1e3/Math.abs(e._rate);r._endTimers[e._id]=setTimeout(r._ended.bind(r,e),d)}return r._webAudio&&!c&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,r._clearTimer(e._id),r._cleanBuffer(e._node),t._autoSuspend()),!r._webAudio&&!c&&r.stop(e._id,!0),r},_clearTimer:function(e){var r=this;if(r._endTimers[e]){if(typeof r._endTimers[e]!="function")clearTimeout(r._endTimers[e]);else{var s=r._soundById(e);s&&s._node&&s._node.removeEventListener("ended",r._endTimers[e],!1)}delete r._endTimers[e]}return r},_soundById:function(e){for(var r=this,s=0;s<r._sounds.length;s++)if(e===r._sounds[s]._id)return r._sounds[s];return null},_inactiveSound:function(){var e=this;e._drain();for(var r=0;r<e._sounds.length;r++)if(e._sounds[r]._ended)return e._sounds[r].reset();return new o(e)},_drain:function(){var e=this,r=e._pool,s=0,c=0;if(!(e._sounds.length<r)){for(c=0;c<e._sounds.length;c++)e._sounds[c]._ended&&s++;for(c=e._sounds.length-1;c>=0;c--){if(s<=r)return;e._sounds[c]._ended&&(e._webAudio&&e._sounds[c]._node&&e._sounds[c]._node.disconnect(0),e._sounds.splice(c,1),s--)}}},_getSoundIds:function(e){var r=this;if(typeof e>"u"){for(var s=[],c=0;c<r._sounds.length;c++)s.push(r._sounds[c]._id);return s}else return[e]},_refreshBuffer:function(e){var r=this;return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=l[r._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),r},_cleanBuffer:function(e){var r=this,s=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return r;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),s))try{e.bufferSource.buffer=t._scratchBuffer}catch{}return e.bufferSource=null,r},_clearSound:function(e){var r=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);r||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,r._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,s=t._muted||e._muted||e._parent._muted?0:e._volume;return r._webAudio?(e._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(s,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=r._src,e._node.preload=r._preload===!0?"auto":r._preload,e._node.volume=s*t.volume(),e._node.load()),e},reset:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,r=e._parent;r._duration=Math.ceil(e._node.duration*10)/10,Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,r=e._parent;r._duration===1/0&&(r._duration=Math.ceil(e._node.duration*10)/10,r._sprite.__default[1]===1/0&&(r._sprite.__default[1]=r._duration*1e3),r._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},f=function(e){var r=e._src;if(l[r]){e._duration=l[r].duration,m(e);return}if(/^data:[^;]+;base64,/.test(r)){for(var s=atob(r.split(",")[1]),c=new Uint8Array(s.length),d=0;d<s.length;++d)c[d]=s.charCodeAt(d);g(c.buffer,e)}else{var p=new XMLHttpRequest;p.open(e._xhr.method,r,!0),p.withCredentials=e._xhr.withCredentials,p.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(_){p.setRequestHeader(_,e._xhr.headers[_])}),p.onload=function(){var _=(p.status+"")[0];if(_!=="0"&&_!=="2"&&_!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+p.status+".");return}g(p.response,e)},p.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[r],e.load())},h(p)}},h=function(e){try{e.send()}catch{e.onerror()}},g=function(e,r){var s=function(){r._emit("loaderror",null,"Decoding audio data failed.")},c=function(d){d&&r._sounds.length>0?(l[r._src]=d,m(r,d)):s()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(e).then(c).catch(s):t.ctx.decodeAudioData(e,c,s)},m=function(e,r){r&&!e._duration&&(e._duration=r.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},v=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),r=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),s=r?parseInt(r[1],10):null;if(e&&s&&s<9){var c=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!c&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};i.Howler=t,i.Howl=a,typeof he<"u"?(he.HowlerGlobal=n,he.Howler=t,he.Howl=a,he.Sound=o):typeof window<"u"&&(window.HowlerGlobal=n,window.Howler=t,window.Howl=a,window.Sound=o)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var a=this;if(!a.ctx||!a.ctx.listener)return a;for(var o=a._howls.length-1;o>=0;o--)a._howls[o].stereo(t);return a},HowlerGlobal.prototype.pos=function(t,a,o){var l=this;if(!l.ctx||!l.ctx.listener)return l;if(a=typeof a!="number"?l._pos[1]:a,o=typeof o!="number"?l._pos[2]:o,typeof t=="number")l._pos=[t,a,o],typeof l.ctx.listener.positionX<"u"?(l.ctx.listener.positionX.setTargetAtTime(l._pos[0],Howler.ctx.currentTime,.1),l.ctx.listener.positionY.setTargetAtTime(l._pos[1],Howler.ctx.currentTime,.1),l.ctx.listener.positionZ.setTargetAtTime(l._pos[2],Howler.ctx.currentTime,.1)):l.ctx.listener.setPosition(l._pos[0],l._pos[1],l._pos[2]);else return l._pos;return l},HowlerGlobal.prototype.orientation=function(t,a,o,l,f,h){var g=this;if(!g.ctx||!g.ctx.listener)return g;var m=g._orientation;if(a=typeof a!="number"?m[1]:a,o=typeof o!="number"?m[2]:o,l=typeof l!="number"?m[3]:l,f=typeof f!="number"?m[4]:f,h=typeof h!="number"?m[5]:h,typeof t=="number")g._orientation=[t,a,o,l,f,h],typeof g.ctx.listener.forwardX<"u"?(g.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),g.ctx.listener.forwardY.setTargetAtTime(a,Howler.ctx.currentTime,.1),g.ctx.listener.forwardZ.setTargetAtTime(o,Howler.ctx.currentTime,.1),g.ctx.listener.upX.setTargetAtTime(l,Howler.ctx.currentTime,.1),g.ctx.listener.upY.setTargetAtTime(f,Howler.ctx.currentTime,.1),g.ctx.listener.upZ.setTargetAtTime(h,Howler.ctx.currentTime,.1)):g.ctx.listener.setOrientation(t,a,o,l,f,h);else return m;return g},Howl.prototype.init=function(t){return function(a){var o=this;return o._orientation=a.orientation||[1,0,0],o._stereo=a.stereo||null,o._pos=a.pos||null,o._pannerAttr={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:360,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:360,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:0,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:"inverse",maxDistance:typeof a.maxDistance<"u"?a.maxDistance:1e4,panningModel:typeof a.panningModel<"u"?a.panningModel:"HRTF",refDistance:typeof a.refDistance<"u"?a.refDistance:1,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:1},o._onstereo=a.onstereo?[{fn:a.onstereo}]:[],o._onpos=a.onpos?[{fn:a.onpos}]:[],o._onorientation=a.onorientation?[{fn:a.onorientation}]:[],t.call(this,a)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"stereo",action:function(){o.stereo(t,a)}}),o;var l=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof a>"u")if(typeof t=="number")o._stereo=t,o._pos=[t,0,0];else return o._stereo;for(var f=o._getSoundIds(a),h=0;h<f.length;h++){var g=o._soundById(f[h]);if(g)if(typeof t=="number")g._stereo=t,g._pos=[t,0,0],g._node&&(g._pannerAttr.panningModel="equalpower",(!g._panner||!g._panner.pan)&&n(g,l),l==="spatial"?typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):g._panner.setPosition(t,0,0):g._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),o._emit("stereo",g._id);else return g._stereo}return o},Howl.prototype.pos=function(t,a,o,l){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"pos",action:function(){f.pos(t,a,o,l)}}),f;if(a=typeof a!="number"?0:a,o=typeof o!="number"?-.5:o,typeof l>"u")if(typeof t=="number")f._pos=[t,a,o];else return f._pos;for(var h=f._getSoundIds(l),g=0;g<h.length;g++){var m=f._soundById(h[g]);if(m)if(typeof t=="number")m._pos=[t,a,o],m._node&&((!m._panner||m._panner.pan)&&n(m,"spatial"),typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(a,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):m._panner.setPosition(t,a,o)),f._emit("pos",m._id);else return m._pos}return f},Howl.prototype.orientation=function(t,a,o,l){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"orientation",action:function(){f.orientation(t,a,o,l)}}),f;if(a=typeof a!="number"?f._orientation[1]:a,o=typeof o!="number"?f._orientation[2]:o,typeof l>"u")if(typeof t=="number")f._orientation=[t,a,o];else return f._orientation;for(var h=f._getSoundIds(l),g=0;g<h.length;g++){var m=f._soundById(h[g]);if(m)if(typeof t=="number")m._orientation=[t,a,o],m._node&&(m._panner||(m._pos||(m._pos=f._pos||[0,0,-.5]),n(m,"spatial")),typeof m._panner.orientationX<"u"?(m._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.orientationY.setValueAtTime(a,Howler.ctx.currentTime),m._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):m._panner.setOrientation(t,a,o)),f._emit("orientation",m._id);else return m._orientation}return f},Howl.prototype.pannerAttr=function(){var t=this,a=arguments,o,l,f;if(!t._webAudio)return t;if(a.length===0)return t._pannerAttr;if(a.length===1)if(typeof a[0]=="object")o=a[0],typeof l>"u"&&(o.pannerAttr||(o.pannerAttr={coneInnerAngle:o.coneInnerAngle,coneOuterAngle:o.coneOuterAngle,coneOuterGain:o.coneOuterGain,distanceModel:o.distanceModel,maxDistance:o.maxDistance,refDistance:o.refDistance,rolloffFactor:o.rolloffFactor,panningModel:o.panningModel}),t._pannerAttr={coneInnerAngle:typeof o.pannerAttr.coneInnerAngle<"u"?o.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof o.pannerAttr.coneOuterAngle<"u"?o.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof o.pannerAttr.coneOuterGain<"u"?o.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof o.pannerAttr.distanceModel<"u"?o.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof o.pannerAttr.maxDistance<"u"?o.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof o.pannerAttr.refDistance<"u"?o.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof o.pannerAttr.rolloffFactor<"u"?o.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof o.pannerAttr.panningModel<"u"?o.pannerAttr.panningModel:t._panningModel});else return f=t._soundById(parseInt(a[0],10)),f?f._pannerAttr:t._pannerAttr;else a.length===2&&(o=a[0],l=parseInt(a[1],10));for(var h=t._getSoundIds(l),g=0;g<h.length;g++)if(f=t._soundById(h[g]),f){var m=f._pannerAttr;m={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:m.coneInnerAngle,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:m.coneOuterAngle,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:m.coneOuterGain,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:m.distanceModel,maxDistance:typeof o.maxDistance<"u"?o.maxDistance:m.maxDistance,refDistance:typeof o.refDistance<"u"?o.refDistance:m.refDistance,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:m.rolloffFactor,panningModel:typeof o.panningModel<"u"?o.panningModel:m.panningModel};var v=f._panner;v||(f._pos||(f._pos=t._pos||[0,0,-.5]),n(f,"spatial"),v=f._panner),v.coneInnerAngle=m.coneInnerAngle,v.coneOuterAngle=m.coneOuterAngle,v.coneOuterGain=m.coneOuterGain,v.distanceModel=m.distanceModel,v.maxDistance=m.maxDistance,v.refDistance=m.refDistance,v.rolloffFactor=m.rolloffFactor,v.panningModel=m.panningModel}return t},Sound.prototype.init=function(t){return function(){var a=this,o=a._parent;a._orientation=o._orientation,a._stereo=o._stereo,a._pos=o._pos,a._pannerAttr=o._pannerAttr,t.call(this),a._stereo?o.stereo(a._stereo):a._pos&&o.pos(a._pos[0],a._pos[1],a._pos[2],a._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var a=this,o=a._parent;return a._orientation=o._orientation,a._stereo=o._stereo,a._pos=o._pos,a._pannerAttr=o._pannerAttr,a._stereo?o.stereo(a._stereo):a._pos?o.pos(a._pos[0],a._pos[1],a._pos[2],a._id):a._panner&&(a._panner.disconnect(0),a._panner=void 0,o._refreshBuffer(a)),t.call(this)}}(Sound.prototype.reset);var n=function(t,a){a=a||"spatial",a==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(Be);const Vt={repeatCount:-1,stereoSeparation:100,interpolationFilter:0,context:!1};class qt{constructor(n){if(this.config={...Vt,...n},this.config.context){if(!this.config.context.destination)throw"ChiptuneJsPlayer: This is not an audio context";this.context=this.config.context,this.destination=!1}else this.context=new AudioContext,this.destination=this.context.destination;delete this.config.context,this.gain=this.context.createGain(),this.gain.gain.value=1,this.handlers=[],this.context.audioWorklet.addModule(new URL(""+new URL("chiptune3.worklet-DFNNdNeT.js",import.meta.url).href,import.meta.url)).then(()=>{this.processNode=new AudioWorkletNode(this.context,"libopenmpt-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2]}),this.processNode.port.onmessage=this.handleMessage_.bind(this),this.processNode.port.postMessage({cmd:"config",val:this.config}),this.fireEvent("onInitialized"),this.processNode.connect(this.gain),this.destination&&this.gain.connect(this.destination)}).catch(t=>console.error(t))}handleMessage_(n){switch(n.data.cmd){case"meta":this.meta=n.data.meta,this.duration=n.data.meta.dur,this.fireEvent("onMetadata",this.meta);break;case"pos":this.currentTime=n.data.pos,this.order=n.data.order,this.pattern=n.data.pattern,this.row=n.data.row,this.fireEvent("onProgress",n.data);break;case"end":this.fireEvent("onEnded");break;case"err":this.fireEvent("onError",{type:n.data.val});break;default:console.log("Received unknown message",n.data)}}fireEvent(n,t){const a=this.handlers;a.length&&a.forEach(function(o){o.eventName===n&&o.handler(t)})}addHandler(n,t){this.handlers.push({eventName:n,handler:t})}onInitialized(n){this.addHandler("onInitialized",n)}onEnded(n){this.addHandler("onEnded",n)}onError(n){this.addHandler("onError",n)}onMetadata(n){this.addHandler("onMetadata",n)}onProgress(n){this.addHandler("onProgress",n)}postMsg(n,t){this.processNode&&this.processNode.port.postMessage({cmd:n,val:t})}load(n){fetch(n).then(t=>t.arrayBuffer()).then(t=>this.play(t)).catch(t=>{this.fireEvent("onError",{type:"Load"})})}play(n){this.postMsg("play",n)}stop(){this.postMsg("stop")}pause(){this.postMsg("pause")}unpause(){this.postMsg("unpause")}togglePause(){this.postMsg("togglePause")}setRepeatCount(n){this.postMsg("repeatCount",n)}setPitch(n){this.postMsg("setPitch",n)}setTempo(n){this.postMsg("setTempo",n)}setPos(n){this.postMsg("setPos",n)}setOrderRow(n,t){this.postMsg("setOrderRow",{o:n,r:t})}setVol(n){this.gain.gain.value=n}selectSubsong(n){this.postMsg("selectSubsong",n)}seek(n){this.setPos(n)}getCurrentTime(){return this.currentTime}}var G,le,ce,fe,q,M,k,Me,N,Ce,at;class Yt{constructor(n,t="",a=""){O(this,k);O(this,G);O(this,le);O(this,ce);O(this,fe);O(this,q);O(this,M);L(this,G,n),L(this,le,t),L(this,ce,a),L(this,fe,void 0),L(this,q,[]),L(this,M,{})}start(){L(this,fe,setInterval(()=>{const n=u(this,G).poll();n!==0&&(P(this,k,at).call(this,n),u(this,G).clear())},50))}stop(){clearInterval(u(this,fe))}}G=new WeakMap,le=new WeakMap,ce=new WeakMap,fe=new WeakMap,q=new WeakMap,M=new WeakMap,k=new WeakSet,Me=function(){return u(this,G).read(`${u(this,le)}/DS4QB2.DAT`)},N=function(){const n=P(this,k,Me).call(this);return new TextDecoder().decode(n).trim().split(/\s+/)},Ce=function(n){const t=new Uint8Array(n.length*4),a=new DataView(t.buffer);for(let o=0;o<n.length;++o)a.setUint32(o*4,n[o]);u(this,G).write(`${u(this,le)}/DS4QB2.DAT`,t)},at=function(n){var t,a;switch(n){case 1:{const[o,l,f,h,g]=P(this,k,N).call(this);console.log("PlayMusic",{musicFile:o,musicType:l,musicChannel:f,mRepeat:h,m3d:g}),u(this,M)[f]&&u(this,M)[f].handle.stop();const m=u(this,G).read(`${u(this,ce)}/${o}`);if(o.toUpperCase().endsWith("MP3")){const v=new Blob([m],{type:"audio/mp3"}),e=URL.createObjectURL(v);u(this,M)[f]={type:"mp3",handle:new Be.Howl({src:e,format:["mp3"],loop:!!Number(h)})},u(this,M)[f].handle.play()}else u(this,M)[f]={type:"mod",handle:new qt({repeatCount:h?-1:0})},u(this,M)[f].handle.onInitialized(()=>{u(this,M)[f].handle.play(m.buffer)});break}case 2:{const[o]=P(this,k,N).call(this);console.log("ClearMusic",{musicChannel:o}),o in u(this,M)&&u(this,M)[o].handle.stop();break}case 3:{const o=P(this,k,N).call(this);console.log("LoadSFX",o);for(const l of o){let f;l.startsWith('"')?f=l.substring(1,l.length-1):l.startsWith("C:\\")?f=l.substring(3):f=`${u(this,ce)}/${l}`;const h=u(this,G).read(f),g=new Blob([h],{type:"audio/wav"});URL.createObjectURL(g),u(this,q).push(new Be.Howl({src:[URL.createObjectURL(g)],format:["wav"]}))}break}case 4:{const[o,l,f]=P(this,k,N).call(this);console.log("SetVolume",{musicVol:o,sampleVol:l,streamVol:f});for(const h of u(this,q))h.volume(Number(l)/100);for(const h of Object.values(u(this,M)))h.type==="mp3"?h.handle.volume(Number(f)/100):h.type==="mod"&&h.handle.setVol(Number(o)/100);break}case 5:{const[o]=P(this,k,N).call(this);console.log("SetEAX",{eaxCode:o});break}case 6:{const[o]=P(this,k,N).call(this);console.log("StopSFX",{sfxChannel:o}),u(this,q)[Number(o)].stop();break}case 7:{const[o,l,f,h,g,m,v]=P(this,k,N).call(this);console.log("Set3D",{musicChannel:o,posX:l,posY:f,posZ:h,velX:g,velY:m,velZ:v});break}case 8:{const[o,l,f,h]=P(this,k,N).call(this);console.log("SetChannel",{musicChannel:o,freq:l,volume:f,pan:h});break}case 9:{const[o,l,f,h]=P(this,k,N).call(this);console.log("Pan",{musicChannel:o,panPos:l,panEnd:f,panSpeed:h});break}case 10:{const[o,l,f,h]=P(this,k,N).call(this);console.log("Fade",{musicChannel:o,fadePos:l,fadeEnd:f,fadeSpeed:h});const g=u(this,M)[o];if(g.type==="mp3"){const m=Number(l),v=Number(f),e=Math.abs((v-m)/Number(h));g.handle.fade(m,v,e)}break}case 13:{const o=P(this,k,Me).call(this),l=new DataView(o.buffer),f=l.getUint32(0,!0),h=l.getUint32(4,!0),g=l.getUint32(8,!0);console.log("SetPosition",{musicChannel:f,cSetPos1:h,cSetPos2:g});break}case 11:{const[o]=P(this,k,N).call(this);console.log("FeedbackMOD",{musicChannel:o}),P(this,k,Ce).call(this,[0,0]);break}case 12:{const[o]=P(this,k,N).call(this);console.log("FeedbackMP3",{musicChannel:o}),P(this,k,Ce).call(this,[0,0]);break}case 55:{console.log("Exit",{});for(const o of u(this,q))o.stop();for(const o of Object.values(u(this,M)))o.handle.stop();break}default:if(n>=56){const o=n-56;console.log("PlaySFX",{sfxHandle:o}),(a=(t=u(this,q))==null?void 0:t[o])==null||a.play()}}};function Xt(i,n,t){return{read:a=>n.session(()=>n.readFile(t.toFatPath(a))),write:(a,o)=>n.session(()=>n.writeFile(t.toFatPath(a),o)),poll:()=>i.v86.cpu.io.port_read8(0),clear:()=>{i.v86.cpu.io.port_write8(0,0),i.v86.cpu.io.port_write8(0,0)}}}async function Zt(i,n){const t=[];n.addMouse&&t.push("A:\\MOUSE"),n.addEms&&t.push("A:\\EMSMAGIC"),n.autoExe&&t.push(n.autoExe);const a=await Gt(n.fdaImageFile,t),{image:o,disk:l,pathMap:f}=await Wt(n.content);var h=new i({screen_container:n.screenContainer,bios:n.biosFile,vga_bios:n.vgaBiosFile,fda:{buffer:a.buffer},hda:{buffer:o.buffer},boot_order:801,autostart:!0,wasm_path:n.v86WasmUrl});return h.add_listener("emulator-ready",async function(){const g=Xt(h,l,f);new Yt(g,(n==null?void 0:n.ds4qbDatPath)??"",(n==null?void 0:n.workingDir)??"").start()}),o}const Kt=window.V86,H=import.meta.url.split("/").slice(0,-2).join("/"),jt={squealer:{content:{url:`${H}/apps/SquealerTNT.zip`},ds4qbDatPath:"",workingDir:"",autoExe:"SQUEALER",addEms:!1,addMouse:!1},terra:{content:{url:`${H}/apps/terrascape.ZIP`},ds4qbDatPath:"",workingDir:"",autoExe:"TERRA /SOUNDON",addEms:!1,addMouse:!0},qtanks:{content:{url:`${H}/apps/qtanks11.zip`},ds4qbDatPath:"",workingDir:"",autoExe:"QTANKS",addEms:!1,addMouse:!0},ctf:{content:{url:`${H}/apps/ctf.zip`},ds4qbDatPath:"Audio",workingDir:"Audio",autoExe:"Run",addEms:!1,addMouse:!0},soc3demo:{content:{url:`${H}/apps/soc3demo.zip`},ds4qbDatPath:"",workingDir:"",autoExe:"SOC3",addEms:!1,addMouse:!1},ssumo:{content:{url:`${H}/apps/ssumo.zip`},ds4qbDatPath:"DATA",workingDir:"",autoExe:"DATA\\2",addEms:!0,addMouse:!1},cai3:{content:{url:`${H}/apps/cai3.zip`},ds4qbDatPath:"",workingDir:"",autoExe:"Cai3",addEms:!1,addMouse:!1}},Qt=new URLSearchParams(window.location.search);window.gameId=Qt.get("game")??"";let st;window.addEventListener("load",async()=>{const i=document.getElementById("screen_container");if(i===null)throw new Error("screen container not found");"gameId"in window&&(st=await Zt(Kt,{...jt[window.gameId],screenContainer:i,biosFile:{url:`${H}/bios/seabios.bin`},vgaBiosFile:{url:`${H}/bios/VGABIOS-lgpl.bin`},fdaImageFile:{url:`${H}/img/Dos6.22.img`},v86WasmUrl:`${H}/v86/v86.wasm`}))});var Ke;(Ke=document.getElementById("download-img"))==null||Ke.addEventListener("click",()=>{const i=new Blob([st],{type:"application/octet-stream"}),n=window.URL.createObjectURL(i),t=document.createElement("a");t.href=n,t.download="hda.img",document.body.appendChild(t),t.style.display="none",t.click(),t.remove(),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)});
