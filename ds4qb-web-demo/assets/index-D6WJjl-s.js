var Xt=Object.defineProperty;var dt=o=>{throw TypeError(o)};var Yt=(o,n,t)=>n in o?Xt(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var me=(o,n,t)=>Yt(o,typeof n!="symbol"?n+"":n,t),Qe=(o,n,t)=>n.has(o)||dt("Cannot "+t);var u=(o,n,t)=>(Qe(o,n,"read from private field"),t?t.call(o):n.get(o)),T=(o,n,t)=>n.has(o)?dt("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(o):n.set(o,t),E=(o,n,t,a)=>(Qe(o,n,"write to private field"),a?a.call(o,t):n.set(o,t),t),k=(o,n,t)=>(Qe(o,n,"access private method"),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();const Qt="modulepreload",Zt=function(o){return"/"+o},ft={},pt=function(n,t,a){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=Promise.allSettled(t.map(p=>{if(p=Zt(p),p in ft)return;ft[p]=!0;const _=p.endsWith(".css"),y=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const e=document.createElement("link");if(e.rel=_?"stylesheet":Qt,_||(e.as="script"),e.crossOrigin="",e.href=p,f&&e.setAttribute("nonce",f),document.head.appendChild(e),_)return new Promise((i,s)=>{e.addEventListener("load",i),e.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return r.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return n().catch(l)})};var ue,tt,re,de,_e;(function(o){o[o.CTRL_SYNC=0]="CTRL_SYNC",o[o.GET_SECTOR_COUNT=1]="GET_SECTOR_COUNT",o[o.GET_SECTOR_SIZE=2]="GET_SECTOR_SIZE",o[o.GET_BLOCK_SIZE=3]="GET_BLOCK_SIZE",o[o.CTRL_TRIM=4]="CTRL_TRIM"})(ue||(ue={})),function(o){o[o.FAT=1]="FAT",o[o.FAT32=2]="FAT32",o[o.EXFAT=4]="EXFAT",o[o.ANY=7]="ANY",o[o.SFD=8]="SFD"}(tt||(tt={})),function(o){o[o.OK=0]="OK",o[o.DISK_ERR=1]="DISK_ERR",o[o.INT_ERR=2]="INT_ERR",o[o.NOT_READY=3]="NOT_READY",o[o.NO_FILE=4]="NO_FILE",o[o.NO_PATH=5]="NO_PATH",o[o.INVALID_NAME=6]="INVALID_NAME",o[o.DENIED=7]="DENIED",o[o.EXIST=8]="EXIST",o[o.INVALID_OBJECT=9]="INVALID_OBJECT",o[o.WRITE_PROTECTED=10]="WRITE_PROTECTED",o[o.INVALID_DRIVE=11]="INVALID_DRIVE",o[o.NOT_ENABLED=12]="NOT_ENABLED",o[o.NO_FILESYSTEM=13]="NO_FILESYSTEM",o[o.MKFS_ABORTED=14]="MKFS_ABORTED",o[o.TIMEOUT=15]="TIMEOUT",o[o.LOCKED=16]="LOCKED",o[o.NOT_ENOUGH_CORE=17]="NOT_ENOUGH_CORE",o[o.TOO_MANY_OPEN_FILES=18]="TOO_MANY_OPEN_FILES",o[o.INVALID_PARAMETER=19]="INVALID_PARAMETER"}(re||(re={})),function(o){o[o.RDO=1]="RDO",o[o.HID=2]="HID",o[o.SYS=4]="SYS",o[o.DIR=16]="DIR",o[o.ARC=32]="ARC"}(de||(de={})),function(o){o[o.READ=1]="READ",o[o.WRITE=2]="WRITE",o[o.OPEN_EXISTING=0]="OPEN_EXISTING",o[o.CREATE_NEW=4]="CREATE_NEW",o[o.CREATE_ALWAYS=8]="CREATE_ALWAYS",o[o.OPEN_ALWAYS=16]="OPEN_ALWAYS",o[o.OPEN_APPEND=48]="OPEN_APPEND"}(_e||(_e={}));const le=24,jt=new URL(new URL("./ff_multi-DauRTzqn-DauRTzqn.wasm",import.meta.url).href,import.meta.url),Kt=new URL(new URL("./ff_single-BRr2adYw-BRr2adYw.wasm",import.meta.url).href,import.meta.url);function P(o,n,t){const a=n();if(a!==re.OK)throw t==null||t(),new en(o,a)}var ye,Be,kt;let _t=(kt=class{constructor(n,t){T(this,ye);T(this,Be);E(this,ye,n),E(this,Be,t)}get ptr(){return u(this,ye)}get cSize(){return u(this,Be).view.getUint16(u(this,ye)+10,!0)}},ye=new WeakMap,Be=new WeakMap,kt);var ve,we,Dt;let Jt=(Dt=class{constructor(n,t){T(this,ve);T(this,we);E(this,ve,n),E(this,we,t)}get heap(){return new Uint8Array(u(this,ve).buffer)}get view(){return new DataView(u(this,ve).buffer)}allocString(n){if(n==null)return 0;const t=new TextEncoder().encode(n),a=this.alloc(t.length+1),r=this.heap.subarray(a,a+t.length+1);return r.set(t),r[r.length-1]=0,a}alloc(n){return u(this,we).malloc(n)}free(n){u(this,we).free(n)}decodeString(n,t){const a=this.heap.subarray(n,n+t),r=a.indexOf(0),l=r>=0?a.subarray(0,r):a;return new TextDecoder().decode(l)}enterScope(n){const t=[],a={alloc:r=>{const l=this.alloc(r);return t.unshift(l),l},allocString:r=>{const l=this.allocString(r);return t.unshift(l),l}};try{return n(a)}finally{for(const r of t)this.free(r)}}},ve=new WeakMap,we=new WeakMap,Dt),Ge=class Ot{constructor(n,t,a,r){me(this,"size");me(this,"date");me(this,"attrib");me(this,"name");this.size=n,this.date=t,this.attrib=a,this.name=r}static fromFilInfo(n){const t=new DataView(n.buffer,n.byteOffset,n.byteLength),a=t.getUint32(0,!0),r=t.getUint16(4,!0),l=1980+((65024&r)>>9),c=((480&r)>>5)-1,f=31&r,p=t.getUint16(6,!0),_=new Date(l,c,f,(63488&p)>>11,(2016&p)>>5,2*(31&p)),y=n[8],e=n.subarray(9,22),i=e.indexOf(0),s=i>=0?e.subarray(0,i):e,d=new TextDecoder().decode(s);return new Ot(a,_,y,d)}get isReadOnly(){return!!(this.attrib&de.RDO)}get isDirectory(){return!!(this.attrib&de.DIR)}get isHidden(){return!!(this.attrib&de.HID)}get isArchive(){return!!(this.attrib&de.ARC)}get isSystem(){return!!(this.attrib&de.SYS)}},en=class Mt extends Error{constructor(t,a){super(`Error ${t}: ${re[a]} (${a})`);me(this,"result");Object.setPrototypeOf(this,Mt.prototype),this.result=a}};var F,B,V;class tn{constructor(n,t,a){T(this,F);T(this,B);T(this,V);E(this,F,n),E(this,B,t),E(this,V,a)}get fp(){return u(this,F)}read(n,t){const a=u(this,B).f_read,r=u(this,F),l=t??n.length;return u(this,V).enterScope(c=>{const f=c.alloc(l),p=c.alloc(4);P("reading file",()=>a(r,f,l,p));const _=u(this,V).view.getUint32(p,!0);return n.set(u(this,V).heap.subarray(f,f+_)),_})}write(n,t){return u(this,V).enterScope(a=>{const r=t??n.length,l=a.alloc(r),c=a.alloc(4);return u(this,V).heap.subarray(l,l+r).set(n),P("writing file",()=>u(this,B).f_write(u(this,F),l,r,c)),u(this,V).view.getUint32(c,!0)})}close(){try{P("closing file",()=>u(this,B).f_close(u(this,F)))}finally{u(this,B).free(u(this,F))}}sync(){P("syncing disk",()=>u(this,B).f_sync(u(this,F)))}lseek(n){P("seeking",()=>u(this,B).f_lseek(u(this,F),n))}rewind(){this.lseek(0)}truncate(){P("truncating file",()=>u(this,B).f_truncate(u(this,F)))}expand(n,t){P("expanding file",()=>u(this,B).f_expand(u(this,F),n,t))}gets(n){return u(this,V).enterScope(t=>{const a=t.alloc(n+1);return P("reading string from file",()=>u(this,B).f_gets(a,n,u(this,F))),u(this,V).decodeString(a,n+1)})}putc(n){const t=n%256;return u(this,B).f_putc(t,u(this,F))}puts(n){const t=u(this,B).f_puts;return u(this,V).enterScope(a=>{const r=a.allocString(n);return t(r,u(this,F))})}tell(){return u(this,B).f_tell(u(this,F))}eof(n){return u(this,B).f_eof(u(this,F))}size(){return u(this,B).f_size(u(this,F))}error(n){return u(this,B).f_error(u(this,F))}}F=new WeakMap,B=new WeakMap,V=new WeakMap;var Q,ae,J,xt;let ht=(xt=class{constructor(n,t,a){T(this,Q);T(this,ae);T(this,J);E(this,Q,n),E(this,ae,t),E(this,J,a)}get dp(){return u(this,Q)}close(){P("closing directory",()=>u(this,ae).f_closedir(u(this,Q))),u(this,J).free(u(this,Q))}read(){return u(this,J).enterScope(n=>{const t=n.alloc(le);P("reading directory",()=>u(this,ae).f_readdir(u(this,Q),t));const a=u(this,J).heap.subarray(t,t+le);return Ge.fromFilInfo(a)})}rewind(){P("rewinding directory",()=>u(this,ae).f_readdir(u(this,Q),0))}findNext(){return u(this,J).enterScope(n=>{const t=n.alloc(le);P("searching directory for next match",()=>u(this,ae).f_findnext(u(this,Q),t));const a=u(this,J).heap.subarray(t,t+le);return Ge.fromFilInfo(a)})}*[Symbol.iterator](){let n;for(this.rewind();(n=this.read()).name!=="";)yield n}},Q=new WeakMap,ae=new WeakMap,J=new WeakMap,xt);const nn={multiPartition:!1,sectorSize:512};var S,M;const ut=class ut{constructor(n,t){T(this,S);T(this,M);E(this,S,n),E(this,M,t)}static async create(n,t){const a=new WebAssembly.Memory({initial:8}),r={...nn,...t??{}},l=function(_,y,e){const i=0|(e??512),s=y.byteLength/i|0;return{env:{memory:_,disk_initialize:d=>re.OK,disk_status:d=>re.OK,disk_read:(d,m,g,h)=>{const v=y.subarray(g*i,(g+h)*i);return new Uint8Array(_.buffer).set(v,m),re.OK},disk_write:(d,m,g,h)=>{const v=new Uint8Array(_.buffer).subarray(m,m+h*i);return y.set(v,g*i),re.OK},disk_ioctl:(d,m,g)=>{const h=new DataView(_.buffer);switch(m){case ue.CTRL_SYNC:break;case ue.GET_SECTOR_SIZE:h.setUint16(g,i,!0);break;case ue.GET_SECTOR_COUNT:h.setUint32(g,s,!0);break;case ue.GET_BLOCK_SIZE:return 1;case ue.CTRL_TRIM:}return re.OK},get_fattime:()=>{const d=new Date;return(d.getFullYear()-1980)%128<<25|d.getMonth()+1<<21|d.getDay()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>1}}}}(a,n,r.sectorSize),c=await async function(_,y){const e=y!=null&&y.multiPartition?jt:Kt;if(typeof window<"u")return await WebAssembly.instantiateStreaming(fetch(e),_);{const{readFile:i}=await pt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),{fileURLToPath:s}=await pt(async()=>{const{fileURLToPath:m}=await import("./__vite-browser-external-BIHI7g3E.js");return{fileURLToPath:m}},[]),d=await i(s(e));return await WebAssembly.instantiate(d,_)}}(l,r),f=c.instance.exports,p=new Jt(a,f);return r.multiPartition?new rn(p,f):new ut(p,f)}mkfs(n){u(this,S).enterScope(t=>{const a=t.allocString((n==null?void 0:n.path)??"");let r=0;if(n!=null){r=t.alloc(16);const c=u(this,S).view;c.setUint8(r,(n==null?void 0:n.fmt)??0),c.setUint8(r+1,(n==null?void 0:n.nFat)??0),c.setUint32(r+2,(n==null?void 0:n.align)??0,!0),c.setUint32(r+6,(n==null?void 0:n.nRoot)??0,!0),c.setUint32(r+10,(n==null?void 0:n.auSize)??0,!0)}const l=t.alloc(4096);P("formatting disk",()=>u(this,M).f_mkfs(a,r,l,4096))})}mount(n,t){const a=r=>u(this,S).alloc(r);return u(this,S).enterScope(r=>{const l=a(560);for(let f=0;f<560;f++)u(this,S).heap[l+f]=0;const c=r.allocString(n??"");return P("mounting workspace",()=>u(this,M).f_mount(l,c,t??0),()=>u(this,S).free(l)),new _t(l,u(this,S))})}unmount(n){return u(this,S).enterScope(t=>{try{const a=t.allocString(n??"");P("unmounting workspace",()=>u(this,M).f_mount(0,a,0))}finally{}})}open(n,t){return u(this,S).enterScope(a=>{const r=a.allocString(n),l=u(this,S).alloc(576);return P("opening file",()=>u(this,M).f_open(l,r,t),()=>u(this,S).free(l)),new tn(l,u(this,M),u(this,S))})}session(n,t=""){this.mount(t);try{return n()}finally{this.unmount(t)}}readFile(n){const t=this.stat(n),a=new Uint8Array(t.size),r=this.open(n,_e.READ);try{return r.read(a),a}finally{r.close()}}writeFile(n,t){const a=this.open(n,_e.WRITE|_e.OPEN_ALWAYS);try{a.write(t)}finally{a.close()}}openDir(n){return u(this,S).enterScope(t=>{const a=t.allocString(n),r=u(this,S).alloc(64);return P("opening directory",()=>u(this,M).f_opendir(r,a),()=>u(this,S).free(r)),new ht(r,u(this,M),u(this,S))})}findFirst(n,t){return u(this,S).enterScope(a=>{const r=a.allocString(n),l=a.allocString(t),c=a.alloc(le),f=u(this,S).alloc(64);P("searching directory",()=>u(this,M).f_findfirst(f,c,r,l));const p=u(this,S).heap.subarray(c,c+le);return[new ht(f,u(this,M),u(this,S)),Ge.fromFilInfo(p)]})}*find(n,t){let a,r;for([a,r]=this.findFirst(n,t);r.name!=="";)yield r,r=a.findNext()}stat(n){return u(this,S).enterScope(t=>{const a=t.allocString(n),r=t.alloc(le);P("getting file information",()=>u(this,M).f_stat(a,r));const l=u(this,S).heap.subarray(r,r+le);return Ge.fromFilInfo(l)})}unlink(n){u(this,S).enterScope(t=>{const a=t.allocString(n);P("deleting file or directory",()=>u(this,M).f_unlink(a))})}rename(n,t){u(this,S).enterScope(a=>{const r=a.allocString(n),l=a.allocString(t);P("renaming file or directory",()=>u(this,M).f_rename(r,l))})}chmod(n,t,a){u(this,S).enterScope(r=>{const l=r.allocString(n);P("changing file or directory permissions",()=>u(this,M).f_chmod(l,t,a))})}utime(n,t){u(this,S).enterScope(a=>{const r=a.allocString(n),l=a.alloc(24),c=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDay();u(this,S).view.setUint16(l+4,c,!0);const f=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>>1;u(this,S).view.setUint16(l+6,f,!0),P("changing timestamp of file or directory",()=>u(this,M).f_utime(r,l))})}mkdir(n){u(this,M).f_mkdir,u(this,S).enterScope(t=>{const a=t.allocString(n);P("creating directory",()=>u(this,M).f_mkdir(a))})}chdir(n){u(this,S).enterScope(t=>{const a=t.allocString(n);P("changing current directory",()=>u(this,M).f_chdir(a))})}chdrive(n){u(this,S).enterScope(t=>{const a=t.allocString(n);P("changing current drive",()=>u(this,M).f_chdrive(a))})}getcwd(){return u(this,S).enterScope(n=>{const t=n.alloc(260);return P("getting current directory",()=>u(this,M).f_getcwd(t,260)),u(this,S).decodeString(t,260)})}getFree(n){return u(this,S).enterScope(t=>{const a=t.allocString(n??""),r=t.alloc(4),l=t.alloc(4);return P("getting free space on drive",()=>u(this,M).f_getfree(a,r,l)),[u(this,S).view.getUint32(r,!0),new _t(l,u(this,S))]})}getLabel(n){return u(this,S).enterScope(t=>{const a=t.allocString(n??""),r=t.alloc(13);u(this,S).heap[r+12]=0;const l=t.alloc(4);return P("getting volume label",()=>u(this,M).f_getlabel(a,r,l)),[u(this,S).decodeString(r,13),u(this,S).view.getUint32(l,!0)]})}setLabel(n){u(this,S).enterScope(t=>{const a=t.allocString(n);P("setting volume label",()=>u(this,M).f_setlabel(a))})}setCP(n){const t=u(this,M).f_setcp;P("setting active code page",()=>t(n))}};S=new WeakMap,M=new WeakMap;let Ue=ut;var be,Ce,Pt;let rn=(Pt=class extends Ue{constructor(t,a){super(t,a);T(this,be);T(this,Ce);E(this,be,t),E(this,Ce,a)}fdisk(t,a){u(this,be).enterScope(r=>{const l=r.alloc(512),c=r.alloc(4*t.length);for(let f=0;f<t.length;f++)u(this,be).view.setUint32(c+4*f,t[f]);P("partitioning disk",()=>u(this,Ce).f_fdisk(a??0,c,l))})}},be=new WeakMap,Ce=new WeakMap,Pt);function It(o){return o.arrayBuffer?o.arrayBuffer():new Promise((n,t)=>{const a=new FileReader;a.addEventListener("loadend",()=>{n(a.result)}),a.addEventListener("error",t),a.readAsArrayBuffer(o)})}async function on(o){const n=await It(o);return new Uint8Array(n)}function Lt(o){return typeof Blob<"u"&&o instanceof Blob}function Fe(o){return typeof SharedArrayBuffer<"u"&&o instanceof SharedArrayBuffer}const an=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function sn(o){return o.byteOffset===0&&o.byteLength===o.buffer.byteLength}class mt{constructor(n){this.typedArray=n instanceof ArrayBuffer||Fe(n)?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}async getLength(){return this.typedArray.byteLength}async read(n,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+n,t)}}class gt{constructor(n){this.blob=n}async getLength(){return this.blob.size}async read(n,t){const a=this.blob.slice(n,n+t),r=await It(a);return new Uint8Array(r)}async sliceAsBlob(n,t,a=""){return this.blob.slice(n,n+t,a)}}function ln(o,n){var t=Uint8Array;if(o[0]==3&&o[1]==0)return n||new t(0);var a=un,r=Ut,l=cn,c=Ft,f=n==null;f&&(n=new t(o.length>>>2<<3));for(var p=0,_=0,y=0,e=0,i=0,s=0,d=0,m=0,g=0,h,v;p==0;){if(p=a(o,g,1),_=a(o,g+1,2),g+=3,_==0){g&7&&(g+=8-(g&7));var b=(g>>>3)+4,D=o[b-4]|o[b-3]<<8;f&&(n=Ze(n,m+D)),n.set(new t(o.buffer,o.byteOffset+b,D),m),g=b+D<<3,m+=D;continue}if(f&&(n=Ze(n,m+(1<<17))),_==1&&(h=w.flmap,v=w.fdmap,s=511,d=31),_==2){y=r(o,g,5)+257,e=r(o,g+5,5)+1,i=r(o,g+10,4)+4,g+=14;for(var x=0;x<38;x+=2)w.itree[x]=0,w.itree[x+1]=0;for(var C=1,x=0;x<i;x++){var oe=r(o,g+x*3,3);w.itree[(w.ordr[x]<<1)+1]=oe,oe>C&&(C=oe)}g+=3*i,Me(w.itree,C),Ie(w.itree,C,w.imap),h=w.lmap,v=w.dmap,g=l(w.imap,(1<<C)-1,y+e,o,g,w.ttree);var ce=yt(w.ttree,0,y,w.ltree);s=(1<<ce)-1;var O=yt(w.ttree,y,e,w.dtree);d=(1<<O)-1,Me(w.ltree,ce),Ie(w.ltree,ce,h),Me(w.dtree,O),Ie(w.dtree,O,v)}for(;;){var xe=h[c(o,g)&s];g+=xe&15;var j=xe>>>4;if(!(j>>>8))n[m++]=j;else{if(j==256)break;var Pe=m+j-254;if(j>264){var he=w.ldef[j-257];Pe=m+(he>>>3)+r(o,g,he&7),g+=he&7}var K=v[c(o,g)&d];g+=K&15;var Xe=K>>>4,Ye=w.ddef[Xe],$e=(Ye>>>4)+a(o,g,Ye&15);for(g+=Ye&15,f&&(n=Ze(n,m+(1<<17)));m<Pe;)n[m]=n[m++-$e],n[m]=n[m++-$e],n[m]=n[m++-$e],n[m]=n[m++-$e];m=Pe}}}return n.length==m?n:n.slice(0,m)}function Ze(o,n){var t=o.length;if(n<=t)return o;var a=new Uint8Array(Math.max(t<<1,n));return a.set(o,0),a}function cn(o,n,t,a,r,l){for(var c=Ut,f=Ft,p=0;p<t;){var _=o[f(a,r)&n];r+=_&15;var y=_>>>4;if(y<=15)l[p]=y,p++;else{var e=0,i=0;y==16?(i=3+c(a,r,2),r+=2,e=l[p-1]):y==17?(i=3+c(a,r,3),r+=3):y==18&&(i=11+c(a,r,7),r+=7);for(var s=p+i;p<s;)l[p]=e,p++}}return r}function yt(o,n,t,a){for(var r=0,l=0,c=a.length>>>1;l<t;){var f=o[l+n];a[l<<1]=0,a[(l<<1)+1]=f,f>r&&(r=f),l++}for(;l<c;)a[l<<1]=0,a[(l<<1)+1]=0,l++;return r}function Me(o,n){for(var t=o.length,a,r,l,c,f,p=w.bl_count,c=0;c<=n;c++)p[c]=0;for(c=1;c<t;c+=2)p[o[c]]++;var _=w.next_code;for(a=0,p[0]=0,r=1;r<=n;r++)a=a+p[r-1]<<1,_[r]=a;for(l=0;l<t;l+=2)f=o[l+1],f!=0&&(o[l]=_[f],_[f]++)}function Ie(o,n,t){for(var a=o.length,r=w.rev15,l=0;l<a;l+=2)if(o[l+1]!=0)for(var c=l>>1,f=o[l+1],p=c<<4|f,_=n-f,y=o[l]<<_,e=y+(1<<_);y!=e;){var i=r[y]>>>15-n;t[i]=p,y++}}function vt(o,n){for(var t=w.rev15,a=15-n,r=0;r<o.length;r+=2){var l=o[r]<<n-o[r+1];o[r]=t[l]>>>a}}function Ut(o,n,t){return(o[n>>>3]|o[(n>>>3)+1]<<8)>>>(n&7)&(1<<t)-1}function un(o,n,t){return(o[n>>>3]|o[(n>>>3)+1]<<8|o[(n>>>3)+2]<<16)>>>(n&7)&(1<<t)-1}function Ft(o,n){return(o[n>>>3]|o[(n>>>3)+1]<<8|o[(n>>>3)+2]<<16)>>>(n&7)}const w=function(){var o=Uint16Array,n=Uint32Array;return{next_code:new o(16),bl_count:new o(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new o(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new o(512),fltree:[],fdmap:new o(32),fdtree:[],lmap:new o(32768),ltree:[],ttree:[],dmap:new o(32768),dtree:[],imap:new o(512),itree:[],rev15:new o(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new o(65536),prev:new o(32768)}}();(function(){for(var o=32768,n=0;n<o;n++){var t=n;t=(t&2863311530)>>>1|(t&1431655765)<<1,t=(t&3435973836)>>>2|(t&858993459)<<2,t=(t&4042322160)>>>4|(t&252645135)<<4,t=(t&4278255360)>>>8|(t&16711935)<<8,w.rev15[n]=(t>>>16|t<<16)>>>17}function a(r,l,c){for(;l--!=0;)r.push(0,c)}for(var n=0;n<32;n++)w.ldef[n]=w.of0[n]<<3|w.exb[n],w.ddef[n]=w.df0[n]<<4|w.dxb[n];a(w.fltree,144,8),a(w.fltree,112,9),a(w.fltree,24,7),a(w.fltree,8,8),Me(w.fltree,9),Ie(w.fltree,9,w.flmap),vt(w.fltree,9),a(w.fdtree,32,5),Me(w.fdtree,5),Ie(w.fdtree,5,w.fdmap),vt(w.fdtree,5),a(w.itree,19,0),a(w.ltree,286,0),a(w.dtree,30,0),a(w.ttree,320,0)})();const wt={table:function(){for(var o=new Uint32Array(256),n=0;n<256;n++){for(var t=n,a=0;a<8;a++)t&1?t=3988292384^t>>>1:t=t>>>1;o[n]=t}return o}(),update:function(o,n,t,a){for(var r=0;r<a;r++)o=wt.table[(o^n[t+r])&255]^o>>>8;return o},crc:function(o,n,t){return wt.update(4294967295,o,n,t)^4294967295}};function dn(o,n){return ln(o,n)}const bt={numWorkers:1,workerURL:"",useWorkers:!1};let fn=0;const He=[];function je(o){return new Promise((n,t)=>{const a=new Worker(o);a.onmessage=r=>{r.data==="start"?(a.onerror=void 0,a.onmessage=void 0,n(a)):t(new Error(`unexpected message: ${r.data}`))},a.onerror=t})}function pn(o,n){return o.require?o.require(n):{}}(function(){if(an){const{Worker:o}=pn(module,"worker_threads");return{async createWorker(n){return new o(n)},addEventListener(n,t){n.on("message",a=>{t({target:n,data:a})})},async terminate(n){await n.terminate()}}}else return{async createWorker(o){try{return await je(o)}catch{console.warn("could not load worker:",o)}let n;try{const t=await fetch(o,{mode:"cors"});if(!t.ok)throw new Error(`could not load: ${o}`);n=await t.text(),o=URL.createObjectURL(new Blob([n],{type:"application/javascript"}));const a=await je(o);return bt.workerURL=o,a}catch{console.warn("could not load worker via fetch:",o)}if(n!==void 0)try{o=`data:application/javascript;base64,${btoa(n)}`;const t=await je(o);return bt.workerURL=o,t}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(o,n){o.addEventListener("message",n)},async terminate(o){o.terminate()}}})();function _n(o,n,t,a){const r=new Uint8Array(n);dn(o,r),a(t?new Blob([r],{type:t}):r.buffer)}async function hn(){if(He.length!==0)for(;He.length;){const{src:o,uncompressedSize:n,type:t,resolve:a}=He.shift();let r=o;Lt(o)&&(r=await on(o)),_n(r,n,t,a)}}function Rt(o,n,t){return new Promise((a,r)=>{He.push({src:o,uncompressedSize:n,type:t,resolve:a,reject:r,id:fn++}),hn()})}function mn(o,n){const t=o&31,a=(o>>5&15)-1,r=(o>>9&127)+1980,l=0,c=(n&31)*2,f=n>>5&63,p=n>>11&31;return new Date(r,a,t,p,f,c,l)}class gn{constructor(n,t){this._reader=n,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=mn(t.lastModFileDate,t.lastModFileTime),this.isDirectory=t.uncompressedSize===0&&t.name.endsWith("/"),this.encrypted=!!(t.generalPurposeBitFlag&1),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(n="application/octet-stream"){return await xn(this._reader,this._rawEntry,n)}async arrayBuffer(){return await Dn(this._reader,this._rawEntry)}async text(){const n=await this.arrayBuffer();return Le(new Uint8Array(n))}async json(){const n=await this.text();return JSON.parse(n)}}const Ke=22,yn=65535,vn=101010256,wn=101075792;async function De(o,n,t){return await o.read(n,t)}async function nt(o,n,t,a){return o.sliceAsBlob?await o.sliceAsBlob(n,t,a):await o.read(n,t)}const bn={unsigned(){return 0}};function $(o,n){return o[n]+o[n+1]*256}function G(o,n){return o[n]+o[n+1]*256+o[n+2]*65536+o[n+3]*16777216}function fe(o,n){return G(o,n)+G(o,n+4)*4294967296}const Sn=new TextDecoder;function Le(o,n){return Fe(o.buffer)&&(o=new Uint8Array(o)),Sn.decode(o)}async function An(o,n){const t=Math.min(Ke+yn,n),a=n-t,r=await De(o,a,t);for(let l=t-Ke;l>=0;--l){if(G(r,l)!==vn)continue;const c=new Uint8Array(r.buffer,r.byteOffset+l,r.byteLength-l),f=$(c,4);if(f!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${f}`);const p=$(c,10),_=G(c,12),y=G(c,16),e=$(c,20),i=c.length-Ke;if(e!==i)throw new Error(`invalid comment length. expected: ${i}, actual: ${e}`);const s=new Uint8Array(c.buffer,c.byteOffset+22,e),d=Le(s);return p===65535||y===4294967295?await En(o,a+l,d,s):await Bt(o,y,_,p,d,s)}throw new Error("could not find end of central directory. maybe not zip file")}const Tn=117853008;async function En(o,n,t,a){const r=n-20,l=await De(o,r,20);if(G(l,0)!==Tn)throw new Error("invalid zip64 end of central directory locator signature");const c=fe(l,8),f=await De(o,c,56);if(G(f,0)!==wn)throw new Error("invalid zip64 end of central directory record signature");const p=fe(f,32),_=fe(f,40),y=fe(f,48);return Bt(o,y,_,p,t,a)}const kn=33639248;async function Bt(o,n,t,a,r,l){let c=0;const f=await De(o,n,t),p=[];for(let y=0;y<a;++y){const e=f.subarray(c,c+46),i=G(e,0);if(i!==kn)throw new Error(`invalid central directory file header signature: 0x${i.toString(16)}`);const s={versionMadeBy:$(e,4),versionNeededToExtract:$(e,6),generalPurposeBitFlag:$(e,8),compressionMethod:$(e,10),lastModFileTime:$(e,12),lastModFileDate:$(e,14),crc32:G(e,16),compressedSize:G(e,20),uncompressedSize:G(e,24),fileNameLength:$(e,28),extraFieldLength:$(e,30),fileCommentLength:$(e,32),internalFileAttributes:$(e,36),externalFileAttributes:G(e,38),relativeOffsetOfLocalHeader:G(e,42)};if(s.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");c+=46;const d=f.subarray(c,c+s.fileNameLength+s.extraFieldLength+s.fileCommentLength);s.nameBytes=d.slice(0,s.fileNameLength),s.name=Le(s.nameBytes);const m=s.fileNameLength+s.extraFieldLength,g=d.slice(s.fileNameLength,m);s.extraFields=[];let h=0;for(;h<g.length-3;){const b=$(g,h+0),D=$(g,h+2),x=h+4,C=x+D;if(C>g.length)throw new Error("extra field length exceeds extra field buffer size");s.extraFields.push({id:b,data:g.slice(x,C)}),h=C}if(s.commentBytes=d.slice(m,m+s.fileCommentLength),s.comment=Le(s.commentBytes),c+=d.length,s.uncompressedSize===4294967295||s.compressedSize===4294967295||s.relativeOffsetOfLocalHeader===4294967295){const b=s.extraFields.find(C=>C.id===1);if(!b)throw new Error("expected zip64 extended information extra field");const D=b.data;let x=0;if(s.uncompressedSize===4294967295){if(x+8>D.length)throw new Error("zip64 extended information extra field does not include uncompressed size");s.uncompressedSize=fe(D,x),x+=8}if(s.compressedSize===4294967295){if(x+8>D.length)throw new Error("zip64 extended information extra field does not include compressed size");s.compressedSize=fe(D,x),x+=8}if(s.relativeOffsetOfLocalHeader===4294967295){if(x+8>D.length)throw new Error("zip64 extended information extra field does not include relative header offset");s.relativeOffsetOfLocalHeader=fe(D,x),x+=8}}const v=s.extraFields.find(b=>b.id===28789&&b.data.length>=6&&b.data[0]===1&&G(b.data,1),bn.unsigned(s.nameBytes));if(v&&(s.fileName=Le(v.data.slice(5))),s.compressionMethod===0){let b=s.uncompressedSize;if(s.generalPurposeBitFlag&1&&(b+=12),s.compressedSize!==b)throw new Error(`compressed size mismatch for stored file: ${s.compressedSize} != ${b}`)}p.push(s)}return{zip:{comment:r,commentBytes:l},entries:p.map(y=>new gn(o,y))}}async function Ct(o,n){if(n.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");const t=await De(o,n.relativeOffsetOfLocalHeader,30),a=await o.getLength(),r=G(t,0);if(r!==67324752)throw new Error(`invalid local file header signature: 0x${r.toString(16)}`);const l=$(t,26),c=$(t,28),f=n.relativeOffsetOfLocalHeader+t.length+l+c;let p;if(n.compressionMethod===0)p=!1;else if(n.compressionMethod===8)p=!0;else throw new Error(`unsupported compression method: ${n.compressionMethod}`);const _=f,y=_+n.compressedSize;if(n.compressedSize!==0&&y>a)throw new Error(`file data overflows file bounds: ${_} +  ${n.compressedSize}  > ${a}`);return{decompress:p,fileDataStart:_}}async function Dn(o,n){const{decompress:t,fileDataStart:a}=await Ct(o,n);if(!t){const c=await De(o,a,n.compressedSize);return sn(c)?c.buffer:c.slice().buffer}const r=await nt(o,a,n.compressedSize);return await Rt(r,n.uncompressedSize)}async function xn(o,n,t){const{decompress:a,fileDataStart:r}=await Ct(o,n);if(!a){const f=await nt(o,r,n.compressedSize,t);return Lt(f)?f:new Blob([Fe(f.buffer)?new Uint8Array(f):f],{type:t})}const l=await nt(o,r,n.compressedSize);return await Rt(l,n.uncompressedSize,t)}async function Pn(o){let n;if(typeof Blob<"u"&&o instanceof Blob)n=new gt(o);else if(o instanceof ArrayBuffer||o&&o.buffer&&o.buffer instanceof ArrayBuffer)n=new mt(o);else if(Fe(o)||Fe(o.buffer))n=new mt(o);else if(typeof o=="string"){const a=await fetch(o);if(!a.ok)throw new Error(`failed http request ${o}, status: ${a.status}: ${a.statusText}`);const r=await a.blob();n=new gt(r)}else if(typeof o.getLength=="function"&&typeof o.read=="function")n=o;else throw new Error("unsupported source type");const t=await n.getLength();if(t>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${t}. Only file sizes up 4503599627370496 bytes are supported`);return await An(n,t)}var Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Re={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(o){(function(){var n=function(){this.init()};n.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var i=this||t;if(e=parseFloat(e),i.ctx||y(),typeof e<"u"&&e>=0&&e<=1){if(i._volume=e,i._muted)return i;i.usingWebAudio&&i.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var s=0;s<i._howls.length;s++)if(!i._howls[s]._webAudio)for(var d=i._howls[s]._getSoundIds(),m=0;m<d.length;m++){var g=i._howls[s]._soundById(d[m]);g&&g._node&&(g._node.volume=g._volume*e)}return i}return i._volume},mute:function(e){var i=this||t;i.ctx||y(),i._muted=e,i.usingWebAudio&&i.masterGain.gain.setValueAtTime(e?0:i._volume,t.ctx.currentTime);for(var s=0;s<i._howls.length;s++)if(!i._howls[s]._webAudio)for(var d=i._howls[s]._getSoundIds(),m=0;m<d.length;m++){var g=i._howls[s]._soundById(d[m]);g&&g._node&&(g._node.muted=e?!0:g._muted)}return i},stop:function(){for(var e=this||t,i=0;i<e._howls.length;i++)e._howls[i].stop();return e},unload:function(){for(var e=this||t,i=e._howls.length-1;i>=0;i--)e._howls[i].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,y()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var i=new Audio;typeof i.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var i=new Audio;i.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,i=null;try{i=typeof Audio<"u"?new Audio:null}catch{return e}if(!i||typeof i.canPlayType!="function")return e;var s=i.canPlayType("audio/mpeg;").replace(/^no$/,""),d=e._navigator?e._navigator.userAgent:"",m=d.match(/OPR\/(\d+)/g),g=m&&parseInt(m[0].split("/")[1],10)<33,h=d.indexOf("Safari")!==-1&&d.indexOf("Chrome")===-1,v=d.match(/Version\/(.*?) /),b=h&&v&&parseInt(v[1],10)<15;return e._codecs={mp3:!!(!g&&(s||i.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!s,opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(i.canPlayType('audio/wav; codecs="1"')||i.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!i.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(i.canPlayType("audio/x-m4b;")||i.canPlayType("audio/m4b;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(i.canPlayType("audio/x-flac;")||i.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var i=function(s){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var d=new Audio;d._unlocked=!0,e._releaseHtml5Audio(d)}catch{e.noAudio=!0;break}for(var m=0;m<e._howls.length;m++)if(!e._howls[m]._webAudio)for(var g=e._howls[m]._getSoundIds(),h=0;h<g.length;h++){var v=e._howls[m]._soundById(g[h]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}e._autoResume();var b=e.ctx.createBufferSource();b.buffer=e._scratchBuffer,b.connect(e.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),b.onended=function(){b.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",i,!0),document.removeEventListener("click",i,!0),document.removeEventListener("keydown",i,!0);for(var D=0;D<e._howls.length;D++)e._howls[D]._emit("unlock")}};return document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",i,!0),document.addEventListener("click",i,!0),document.addEventListener("keydown",i,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var i=new Audio().play();return i&&typeof Promise<"u"&&(i instanceof Promise||typeof i.then=="function")&&i.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var i=this||t;return e._unlocked&&i._html5AudioPool.push(e),i},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!t.usingWebAudio)){for(var i=0;i<e._howls.length;i++)if(e._howls[i]._webAudio){for(var s=0;s<e._howls[i]._sounds.length;s++)if(!e._howls[i]._sounds[s]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var d=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(d,d)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!t.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var i=0;i<e._howls.length;i++)e._howls[i]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var t=new n,a=function(e){var i=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}i.init(e)};a.prototype={init:function(e){var i=this;return t.ctx||y(),i._autoplay=e.autoplay||!1,i._format=typeof e.format!="string"?e.format:[e.format],i._html5=e.html5||!1,i._muted=e.mute||!1,i._loop=e.loop||!1,i._pool=e.pool||5,i._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,i._rate=e.rate||1,i._sprite=e.sprite||{},i._src=typeof e.src!="string"?e.src:[e.src],i._volume=e.volume!==void 0?e.volume:1,i._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},i._duration=0,i._state="unloaded",i._sounds=[],i._endTimers={},i._queue=[],i._playLock=!1,i._onend=e.onend?[{fn:e.onend}]:[],i._onfade=e.onfade?[{fn:e.onfade}]:[],i._onload=e.onload?[{fn:e.onload}]:[],i._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],i._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],i._onpause=e.onpause?[{fn:e.onpause}]:[],i._onplay=e.onplay?[{fn:e.onplay}]:[],i._onstop=e.onstop?[{fn:e.onstop}]:[],i._onmute=e.onmute?[{fn:e.onmute}]:[],i._onvolume=e.onvolume?[{fn:e.onvolume}]:[],i._onrate=e.onrate?[{fn:e.onrate}]:[],i._onseek=e.onseek?[{fn:e.onseek}]:[],i._onunlock=e.onunlock?[{fn:e.onunlock}]:[],i._onresume=[],i._webAudio=t.usingWebAudio&&!i._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(i),i._autoplay&&i._queue.push({event:"play",action:function(){i.play()}}),i._preload&&i._preload!=="none"&&i.load(),i},load:function(){var e=this,i=null;if(t.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var s=0;s<e._src.length;s++){var d,m;if(e._format&&e._format[s])d=e._format[s];else{if(m=e._src[s],typeof m!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}d=/^data:audio\/([^;,]+);/i.exec(m),d||(d=/\.([^.]+)$/.exec(m.split("?",1)[0])),d&&(d=d[1].toLowerCase())}if(d||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),d&&t.codecs(d)){i=e._src[s];break}}if(!i){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=i,e._state="loading",window.location.protocol==="https:"&&i.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new r(e),e._webAudio&&c(e),e},play:function(e,i){var s=this,d=null;if(typeof e=="number")d=e,e=null;else{if(typeof e=="string"&&s._state==="loaded"&&!s._sprite[e])return null;if(typeof e>"u"&&(e="__default",!s._playLock)){for(var m=0,g=0;g<s._sounds.length;g++)s._sounds[g]._paused&&!s._sounds[g]._ended&&(m++,d=s._sounds[g]._id);m===1?e=null:d=null}}var h=d?s._soundById(d):s._inactiveSound();if(!h)return null;if(d&&!e&&(e=h._sprite||"__default"),s._state!=="loaded"){h._sprite=e,h._ended=!1;var v=h._id;return s._queue.push({event:"play",action:function(){s.play(v)}}),v}if(d&&!h._paused)return i||s._loadQueue("play"),h._id;s._webAudio&&t._autoResume();var b=Math.max(0,h._seek>0?h._seek:s._sprite[e][0]/1e3),D=Math.max(0,(s._sprite[e][0]+s._sprite[e][1])/1e3-b),x=D*1e3/Math.abs(h._rate),C=s._sprite[e][0]/1e3,oe=(s._sprite[e][0]+s._sprite[e][1])/1e3;h._sprite=e,h._ended=!1;var ce=function(){h._paused=!1,h._seek=b,h._start=C,h._stop=oe,h._loop=!!(h._loop||s._sprite[e][2])};if(b>=oe){s._ended(h);return}var O=h._node;if(s._webAudio){var xe=function(){s._playLock=!1,ce(),s._refreshBuffer(h);var K=h._muted||s._muted?0:h._volume;O.gain.setValueAtTime(K,t.ctx.currentTime),h._playStart=t.ctx.currentTime,typeof O.bufferSource.start>"u"?h._loop?O.bufferSource.noteGrainOn(0,b,86400):O.bufferSource.noteGrainOn(0,b,D):h._loop?O.bufferSource.start(0,b,86400):O.bufferSource.start(0,b,D),x!==1/0&&(s._endTimers[h._id]=setTimeout(s._ended.bind(s,h),x)),i||setTimeout(function(){s._emit("play",h._id),s._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?xe():(s._playLock=!0,s.once("resume",xe),s._clearTimer(h._id))}else{var j=function(){O.currentTime=b,O.muted=h._muted||s._muted||t._muted||O.muted,O.volume=h._volume*t.volume(),O.playbackRate=h._rate;try{var K=O.play();if(K&&typeof Promise<"u"&&(K instanceof Promise||typeof K.then=="function")?(s._playLock=!0,ce(),K.then(function(){s._playLock=!1,O._unlocked=!0,i?s._loadQueue():s._emit("play",h._id)}).catch(function(){s._playLock=!1,s._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),h._ended=!0,h._paused=!0})):i||(s._playLock=!1,ce(),s._emit("play",h._id)),O.playbackRate=h._rate,O.paused){s._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||h._loop?s._endTimers[h._id]=setTimeout(s._ended.bind(s,h),x):(s._endTimers[h._id]=function(){s._ended(h),O.removeEventListener("ended",s._endTimers[h._id],!1)},O.addEventListener("ended",s._endTimers[h._id],!1))}catch(Xe){s._emit("playerror",h._id,Xe)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=s._src,O.load());var Pe=window&&window.ejecta||!O.readyState&&t._navigator.isCocoonJS;if(O.readyState>=3||Pe)j();else{s._playLock=!0,s._state="loading";var he=function(){s._state="loaded",j(),O.removeEventListener(t._canPlayEvent,he,!1)};O.addEventListener(t._canPlayEvent,he,!1),s._clearTimer(h._id)}}return h._id},pause:function(e){var i=this;if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"pause",action:function(){i.pause(e)}}),i;for(var s=i._getSoundIds(e),d=0;d<s.length;d++){i._clearTimer(s[d]);var m=i._soundById(s[d]);if(m&&!m._paused&&(m._seek=i.seek(s[d]),m._rateSeek=0,m._paused=!0,i._stopFade(s[d]),m._node))if(i._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),i._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||i._emit("pause",m?m._id:null)}return i},stop:function(e,i){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"stop",action:function(){s.stop(e)}}),s;for(var d=s._getSoundIds(e),m=0;m<d.length;m++){s._clearTimer(d[m]);var g=s._soundById(d[m]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,s._stopFade(d[m]),g._node&&(s._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),s._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&s._clearSound(g._node))),i||s._emit("stop",g._id))}return s},mute:function(e,i){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"mute",action:function(){s.mute(e,i)}}),s;if(typeof i>"u")if(typeof e=="boolean")s._muted=e;else return s._muted;for(var d=s._getSoundIds(i),m=0;m<d.length;m++){var g=s._soundById(d[m]);g&&(g._muted=e,g._interval&&s._stopFade(g._id),s._webAudio&&g._node?g._node.gain.setValueAtTime(e?0:g._volume,t.ctx.currentTime):g._node&&(g._node.muted=t._muted?!0:e),s._emit("mute",g._id))}return s},volume:function(){var e=this,i=arguments,s,d;if(i.length===0)return e._volume;if(i.length===1||i.length===2&&typeof i[1]>"u"){var m=e._getSoundIds(),g=m.indexOf(i[0]);g>=0?d=parseInt(i[0],10):s=parseFloat(i[0])}else i.length>=2&&(s=parseFloat(i[0]),d=parseInt(i[1],10));var h;if(typeof s<"u"&&s>=0&&s<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,i)}}),e;typeof d>"u"&&(e._volume=s),d=e._getSoundIds(d);for(var v=0;v<d.length;v++)h=e._soundById(d[v]),h&&(h._volume=s,i[2]||e._stopFade(d[v]),e._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(s,t.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=s*t.volume()),e._emit("volume",h._id))}else return h=d?e._soundById(d):e._sounds[0],h?h._volume:0;return e},fade:function(e,i,s,d){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(e,i,s,d)}}),m;e=Math.min(Math.max(0,parseFloat(e)),1),i=Math.min(Math.max(0,parseFloat(i)),1),s=parseFloat(s),m.volume(e,d);for(var g=m._getSoundIds(d),h=0;h<g.length;h++){var v=m._soundById(g[h]);if(v){if(d||m._stopFade(g[h]),m._webAudio&&!v._muted){var b=t.ctx.currentTime,D=b+s/1e3;v._volume=e,v._node.gain.setValueAtTime(e,b),v._node.gain.linearRampToValueAtTime(i,D)}m._startFadeInterval(v,e,i,s,g[h],typeof d>"u")}}return m},_startFadeInterval:function(e,i,s,d,m,g){var h=this,v=i,b=s-i,D=Math.abs(b/.01),x=Math.max(4,D>0?d/D:d),C=Date.now();e._fadeTo=s,e._interval=setInterval(function(){var oe=(Date.now()-C)/d;C=Date.now(),v+=b*oe,v=Math.round(v*100)/100,b<0?v=Math.max(s,v):v=Math.min(s,v),h._webAudio?e._volume=v:h.volume(v,e._id,!0),g&&(h._volume=v),(s<i&&v<=s||s>i&&v>=s)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,h.volume(s,e._id),h._emit("fade",e._id))},x)},_stopFade:function(e){var i=this,s=i._soundById(e);return s&&s._interval&&(i._webAudio&&s._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(s._interval),s._interval=null,i.volume(s._fadeTo,e),s._fadeTo=null,i._emit("fade",e)),i},loop:function(){var e=this,i=arguments,s,d,m;if(i.length===0)return e._loop;if(i.length===1)if(typeof i[0]=="boolean")s=i[0],e._loop=s;else return m=e._soundById(parseInt(i[0],10)),m?m._loop:!1;else i.length===2&&(s=i[0],d=parseInt(i[1],10));for(var g=e._getSoundIds(d),h=0;h<g.length;h++)m=e._soundById(g[h]),m&&(m._loop=s,e._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=s,s&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,e.playing(g[h])&&(e.pause(g[h],!0),e.play(g[h],!0)))));return e},rate:function(){var e=this,i=arguments,s,d;if(i.length===0)d=e._sounds[0]._id;else if(i.length===1){var m=e._getSoundIds(),g=m.indexOf(i[0]);g>=0?d=parseInt(i[0],10):s=parseFloat(i[0])}else i.length===2&&(s=parseFloat(i[0]),d=parseInt(i[1],10));var h;if(typeof s=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,i)}}),e;typeof d>"u"&&(e._rate=s),d=e._getSoundIds(d);for(var v=0;v<d.length;v++)if(h=e._soundById(d[v]),h){e.playing(d[v])&&(h._rateSeek=e.seek(d[v]),h._playStart=e._webAudio?t.ctx.currentTime:h._playStart),h._rate=s,e._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(s,t.ctx.currentTime):h._node&&(h._node.playbackRate=s);var b=e.seek(d[v]),D=(e._sprite[h._sprite][0]+e._sprite[h._sprite][1])/1e3-b,x=D*1e3/Math.abs(h._rate);(e._endTimers[d[v]]||!h._paused)&&(e._clearTimer(d[v]),e._endTimers[d[v]]=setTimeout(e._ended.bind(e,h),x)),e._emit("rate",h._id)}}else return h=e._soundById(d),h?h._rate:e._rate;return e},seek:function(){var e=this,i=arguments,s,d;if(i.length===0)e._sounds.length&&(d=e._sounds[0]._id);else if(i.length===1){var m=e._getSoundIds(),g=m.indexOf(i[0]);g>=0?d=parseInt(i[0],10):e._sounds.length&&(d=e._sounds[0]._id,s=parseFloat(i[0]))}else i.length===2&&(s=parseFloat(i[0]),d=parseInt(i[1],10));if(typeof d>"u")return 0;if(typeof s=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,i)}}),e;var h=e._soundById(d);if(h)if(typeof s=="number"&&s>=0){var v=e.playing(d);v&&e.pause(d,!0),h._seek=s,h._ended=!1,e._clearTimer(d),!e._webAudio&&h._node&&!isNaN(h._node.duration)&&(h._node.currentTime=s);var b=function(){v&&e.play(d,!0),e._emit("seek",d)};if(v&&!e._webAudio){var D=function(){e._playLock?setTimeout(D,0):b()};setTimeout(D,0)}else b()}else if(e._webAudio){var x=e.playing(d)?t.ctx.currentTime-h._playStart:0,C=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(C+x*Math.abs(h._rate))}else return h._node.currentTime;return e},playing:function(e){var i=this;if(typeof e=="number"){var s=i._soundById(e);return s?!s._paused:!1}for(var d=0;d<i._sounds.length;d++)if(!i._sounds[d]._paused)return!0;return!1},duration:function(e){var i=this,s=i._duration,d=i._soundById(e);return d&&(s=i._sprite[d._sprite][1]/1e3),s},state:function(){return this._state},unload:function(){for(var e=this,i=e._sounds,s=0;s<i.length;s++)i[s]._paused||e.stop(i[s]._id),e._webAudio||(e._clearSound(i[s]._node),i[s]._node.removeEventListener("error",i[s]._errorFn,!1),i[s]._node.removeEventListener(t._canPlayEvent,i[s]._loadFn,!1),i[s]._node.removeEventListener("ended",i[s]._endFn,!1),t._releaseHtml5Audio(i[s]._node)),delete i[s]._node,e._clearTimer(i[s]._id);var d=t._howls.indexOf(e);d>=0&&t._howls.splice(d,1);var m=!0;for(s=0;s<t._howls.length;s++)if(t._howls[s]._src===e._src||e._src.indexOf(t._howls[s]._src)>=0){m=!1;break}return l&&m&&delete l[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,i,s,d){var m=this,g=m["_on"+e];return typeof i=="function"&&g.push(d?{id:s,fn:i,once:d}:{id:s,fn:i}),m},off:function(e,i,s){var d=this,m=d["_on"+e],g=0;if(typeof i=="number"&&(s=i,i=null),i||s)for(g=0;g<m.length;g++){var h=s===m[g].id;if(i===m[g].fn&&h||!i&&h){m.splice(g,1);break}}else if(e)d["_on"+e]=[];else{var v=Object.keys(d);for(g=0;g<v.length;g++)v[g].indexOf("_on")===0&&Array.isArray(d[v[g]])&&(d[v[g]]=[])}return d},once:function(e,i,s){var d=this;return d.on(e,i,s,1),d},_emit:function(e,i,s){for(var d=this,m=d["_on"+e],g=m.length-1;g>=0;g--)(!m[g].id||m[g].id===i||e==="load")&&(setTimeout((function(h){h.call(this,i,s)}).bind(d,m[g].fn),0),m[g].once&&d.off(e,m[g].fn,m[g].id));return d._loadQueue(e),d},_loadQueue:function(e){var i=this;if(i._queue.length>0){var s=i._queue[0];s.event===e&&(i._queue.shift(),i._loadQueue()),e||s.action()}return i},_ended:function(e){var i=this,s=e._sprite;if(!i._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(i._ended.bind(i,e),100),i;var d=!!(e._loop||i._sprite[s][2]);if(i._emit("end",e._id),!i._webAudio&&d&&i.stop(e._id,!0).play(e._id),i._webAudio&&d){i._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var m=(e._stop-e._start)*1e3/Math.abs(e._rate);i._endTimers[e._id]=setTimeout(i._ended.bind(i,e),m)}return i._webAudio&&!d&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,i._clearTimer(e._id),i._cleanBuffer(e._node),t._autoSuspend()),!i._webAudio&&!d&&i.stop(e._id,!0),i},_clearTimer:function(e){var i=this;if(i._endTimers[e]){if(typeof i._endTimers[e]!="function")clearTimeout(i._endTimers[e]);else{var s=i._soundById(e);s&&s._node&&s._node.removeEventListener("ended",i._endTimers[e],!1)}delete i._endTimers[e]}return i},_soundById:function(e){for(var i=this,s=0;s<i._sounds.length;s++)if(e===i._sounds[s]._id)return i._sounds[s];return null},_inactiveSound:function(){var e=this;e._drain();for(var i=0;i<e._sounds.length;i++)if(e._sounds[i]._ended)return e._sounds[i].reset();return new r(e)},_drain:function(){var e=this,i=e._pool,s=0,d=0;if(!(e._sounds.length<i)){for(d=0;d<e._sounds.length;d++)e._sounds[d]._ended&&s++;for(d=e._sounds.length-1;d>=0;d--){if(s<=i)return;e._sounds[d]._ended&&(e._webAudio&&e._sounds[d]._node&&e._sounds[d]._node.disconnect(0),e._sounds.splice(d,1),s--)}}},_getSoundIds:function(e){var i=this;if(typeof e>"u"){for(var s=[],d=0;d<i._sounds.length;d++)s.push(i._sounds[d]._id);return s}else return[e]},_refreshBuffer:function(e){var i=this;return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=l[i._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),i},_cleanBuffer:function(e){var i=this,s=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return i;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),s))try{e.bufferSource.buffer=t._scratchBuffer}catch{}return e.bufferSource=null,i},_clearSound:function(e){var i=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);i||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(e){this._parent=e,this.init()};r.prototype={init:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._rate=i._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,i._sounds.push(e),e.create(),e},create:function(){var e=this,i=e._parent,s=t._muted||e._muted||e._parent._muted?0:e._volume;return i._webAudio?(e._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(s,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=i._src,e._node.preload=i._preload===!0?"auto":i._preload,e._node.volume=s*t.volume(),e._node.load()),e},reset:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._rate=i._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,i=e._parent;i._duration=Math.ceil(e._node.duration*10)/10,Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,i=e._parent;i._duration===1/0&&(i._duration=Math.ceil(e._node.duration*10)/10,i._sprite.__default[1]===1/0&&(i._sprite.__default[1]=i._duration*1e3),i._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},c=function(e){var i=e._src;if(l[i]){e._duration=l[i].duration,_(e);return}if(/^data:[^;]+;base64,/.test(i)){for(var s=atob(i.split(",")[1]),d=new Uint8Array(s.length),m=0;m<s.length;++m)d[m]=s.charCodeAt(m);p(d.buffer,e)}else{var g=new XMLHttpRequest;g.open(e._xhr.method,i,!0),g.withCredentials=e._xhr.withCredentials,g.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(h){g.setRequestHeader(h,e._xhr.headers[h])}),g.onload=function(){var h=(g.status+"")[0];if(h!=="0"&&h!=="2"&&h!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}p(g.response,e)},g.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[i],e.load())},f(g)}},f=function(e){try{e.send()}catch{e.onerror()}},p=function(e,i){var s=function(){i._emit("loaderror",null,"Decoding audio data failed.")},d=function(m){m&&i._sounds.length>0?(l[i._src]=m,_(i,m)):s()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(e).then(d).catch(s):t.ctx.decodeAudioData(e,d,s)},_=function(e,i){i&&!e._duration&&(e._duration=i.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},y=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),i=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),s=i?parseInt(i[1],10):null;if(e&&s&&s<9){var d=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!d&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};o.Howler=t,o.Howl=a,typeof Oe<"u"?(Oe.HowlerGlobal=n,Oe.Howler=t,Oe.Howl=a,Oe.Sound=r):typeof window<"u"&&(window.HowlerGlobal=n,window.Howler=t,window.Howl=a,window.Sound=r)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var a=this;if(!a.ctx||!a.ctx.listener)return a;for(var r=a._howls.length-1;r>=0;r--)a._howls[r].stereo(t);return a},HowlerGlobal.prototype.pos=function(t,a,r){var l=this;if(!l.ctx||!l.ctx.listener)return l;if(a=typeof a!="number"?l._pos[1]:a,r=typeof r!="number"?l._pos[2]:r,typeof t=="number")l._pos=[t,a,r],typeof l.ctx.listener.positionX<"u"?(l.ctx.listener.positionX.setTargetAtTime(l._pos[0],Howler.ctx.currentTime,.1),l.ctx.listener.positionY.setTargetAtTime(l._pos[1],Howler.ctx.currentTime,.1),l.ctx.listener.positionZ.setTargetAtTime(l._pos[2],Howler.ctx.currentTime,.1)):l.ctx.listener.setPosition(l._pos[0],l._pos[1],l._pos[2]);else return l._pos;return l},HowlerGlobal.prototype.orientation=function(t,a,r,l,c,f){var p=this;if(!p.ctx||!p.ctx.listener)return p;var _=p._orientation;if(a=typeof a!="number"?_[1]:a,r=typeof r!="number"?_[2]:r,l=typeof l!="number"?_[3]:l,c=typeof c!="number"?_[4]:c,f=typeof f!="number"?_[5]:f,typeof t=="number")p._orientation=[t,a,r,l,c,f],typeof p.ctx.listener.forwardX<"u"?(p.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),p.ctx.listener.forwardY.setTargetAtTime(a,Howler.ctx.currentTime,.1),p.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),p.ctx.listener.upX.setTargetAtTime(l,Howler.ctx.currentTime,.1),p.ctx.listener.upY.setTargetAtTime(c,Howler.ctx.currentTime,.1),p.ctx.listener.upZ.setTargetAtTime(f,Howler.ctx.currentTime,.1)):p.ctx.listener.setOrientation(t,a,r,l,c,f);else return _;return p},Howl.prototype.init=function(t){return function(a){var r=this;return r._orientation=a.orientation||[1,0,0],r._stereo=a.stereo||null,r._pos=a.pos||null,r._pannerAttr={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:360,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:360,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:0,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:"inverse",maxDistance:typeof a.maxDistance<"u"?a.maxDistance:1e4,panningModel:typeof a.panningModel<"u"?a.panningModel:"HRTF",refDistance:typeof a.refDistance<"u"?a.refDistance:1,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:1},r._onstereo=a.onstereo?[{fn:a.onstereo}]:[],r._onpos=a.onpos?[{fn:a.onpos}]:[],r._onorientation=a.onorientation?[{fn:a.onorientation}]:[],t.call(this,a)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,a){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(t,a)}}),r;var l=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof a>"u")if(typeof t=="number")r._stereo=t,r._pos=[t,0,0];else return r._stereo;for(var c=r._getSoundIds(a),f=0;f<c.length;f++){var p=r._soundById(c[f]);if(p)if(typeof t=="number")p._stereo=t,p._pos=[t,0,0],p._node&&(p._pannerAttr.panningModel="equalpower",(!p._panner||!p._panner.pan)&&n(p,l),l==="spatial"?typeof p._panner.positionX<"u"?(p._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),p._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),p._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):p._panner.setPosition(t,0,0):p._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",p._id);else return p._stereo}return r},Howl.prototype.pos=function(t,a,r,l){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"pos",action:function(){c.pos(t,a,r,l)}}),c;if(a=typeof a!="number"?0:a,r=typeof r!="number"?-.5:r,typeof l>"u")if(typeof t=="number")c._pos=[t,a,r];else return c._pos;for(var f=c._getSoundIds(l),p=0;p<f.length;p++){var _=c._soundById(f[p]);if(_)if(typeof t=="number")_._pos=[t,a,r],_._node&&((!_._panner||_._panner.pan)&&n(_,"spatial"),typeof _._panner.positionX<"u"?(_._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),_._panner.positionY.setValueAtTime(a,Howler.ctx.currentTime),_._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):_._panner.setPosition(t,a,r)),c._emit("pos",_._id);else return _._pos}return c},Howl.prototype.orientation=function(t,a,r,l){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"orientation",action:function(){c.orientation(t,a,r,l)}}),c;if(a=typeof a!="number"?c._orientation[1]:a,r=typeof r!="number"?c._orientation[2]:r,typeof l>"u")if(typeof t=="number")c._orientation=[t,a,r];else return c._orientation;for(var f=c._getSoundIds(l),p=0;p<f.length;p++){var _=c._soundById(f[p]);if(_)if(typeof t=="number")_._orientation=[t,a,r],_._node&&(_._panner||(_._pos||(_._pos=c._pos||[0,0,-.5]),n(_,"spatial")),typeof _._panner.orientationX<"u"?(_._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),_._panner.orientationY.setValueAtTime(a,Howler.ctx.currentTime),_._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):_._panner.setOrientation(t,a,r)),c._emit("orientation",_._id);else return _._orientation}return c},Howl.prototype.pannerAttr=function(){var t=this,a=arguments,r,l,c;if(!t._webAudio)return t;if(a.length===0)return t._pannerAttr;if(a.length===1)if(typeof a[0]=="object")r=a[0],typeof l>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),t._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:t._panningModel});else return c=t._soundById(parseInt(a[0],10)),c?c._pannerAttr:t._pannerAttr;else a.length===2&&(r=a[0],l=parseInt(a[1],10));for(var f=t._getSoundIds(l),p=0;p<f.length;p++)if(c=t._soundById(f[p]),c){var _=c._pannerAttr;_={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:_.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:_.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:_.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:_.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:_.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:_.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:_.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:_.panningModel};var y=c._panner;y||(c._pos||(c._pos=t._pos||[0,0,-.5]),n(c,"spatial"),y=c._panner),y.coneInnerAngle=_.coneInnerAngle,y.coneOuterAngle=_.coneOuterAngle,y.coneOuterGain=_.coneOuterGain,y.distanceModel=_.distanceModel,y.maxDistance=_.maxDistance,y.refDistance=_.refDistance,y.rolloffFactor=_.rolloffFactor,y.panningModel=_.panningModel}return t},Sound.prototype.init=function(t){return function(){var a=this,r=a._parent;a._orientation=r._orientation,a._stereo=r._stereo,a._pos=r._pos,a._pannerAttr=r._pannerAttr,t.call(this),a._stereo?r.stereo(a._stereo):a._pos&&r.pos(a._pos[0],a._pos[1],a._pos[2],a._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var a=this,r=a._parent;return a._orientation=r._orientation,a._stereo=r._stereo,a._pos=r._pos,a._pannerAttr=r._pannerAttr,a._stereo?r.stereo(a._stereo):a._pos?r.pos(a._pos[0],a._pos[1],a._pos[2],a._id):a._panner&&(a._panner.disconnect(0),a._panner=void 0,r._refreshBuffer(a)),t.call(this)}}(Sound.prototype.reset);var n=function(t,a){a=a||"spatial",a==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(Re);const On={repeatCount:-1,stereoSeparation:100,interpolationFilter:0,context:!1};class Nt{constructor(n){if(this.config={...On,...n},this.config.context){if(!this.config.context.destination)throw"ChiptuneJsPlayer: This is not an audio context";this.context=this.config.context,this.destination=!1}else this.context=new AudioContext,this.destination=this.context.destination;delete this.config.context,this.gain=this.context.createGain(),this.gain.gain.value=1,this.handlers=[],this.context.audioWorklet.addModule(new URL("./chiptune3.worklet-DFNNdNeT.js",import.meta.url)).then(()=>{this.processNode=new AudioWorkletNode(this.context,"libopenmpt-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2]}),this.processNode.port.onmessage=this.handleMessage_.bind(this),this.processNode.port.postMessage({cmd:"config",val:this.config}),this.fireEvent("onInitialized"),this.processNode.connect(this.gain),this.destination&&this.gain.connect(this.destination)}).catch(t=>console.error(t))}handleMessage_(n){switch(n.data.cmd){case"meta":this.meta=n.data.meta,this.duration=n.data.meta.dur,this.fireEvent("onMetadata",this.meta);break;case"pos":this.currentTime=n.data.pos,this.order=n.data.order,this.pattern=n.data.pattern,this.row=n.data.row,this.fireEvent("onProgress",n.data);break;case"end":this.fireEvent("onEnded");break;case"err":this.fireEvent("onError",{type:n.data.val});break;default:console.log("Received unknown message",n.data)}}fireEvent(n,t){const a=this.handlers;a.length&&a.forEach(function(r){r.eventName===n&&r.handler(t)})}addHandler(n,t){this.handlers.push({eventName:n,handler:t})}onInitialized(n){this.addHandler("onInitialized",n)}onEnded(n){this.addHandler("onEnded",n)}onError(n){this.addHandler("onError",n)}onMetadata(n){this.addHandler("onMetadata",n)}onProgress(n){this.addHandler("onProgress",n)}postMsg(n,t){this.processNode&&this.processNode.port.postMessage({cmd:n,val:t})}load(n){fetch(n).then(t=>t.arrayBuffer()).then(t=>this.play(t)).catch(t=>{this.fireEvent("onError",{type:"Load"})})}play(n){this.postMsg("play",n)}stop(){this.postMsg("stop")}pause(){this.postMsg("pause")}unpause(){this.postMsg("unpause")}togglePause(){this.postMsg("togglePause")}setRepeatCount(n){this.postMsg("repeatCount",n)}setPitch(n){this.postMsg("setPitch",n)}setTempo(n){this.postMsg("setTempo",n)}setPos(n){this.postMsg("setPos",n)}setOrderRow(n,t){this.postMsg("setOrderRow",{o:n,r:t})}setVol(n){this.gain.gain.value=n}selectSubsong(n){this.postMsg("selectSubsong",n)}seek(n){this.setPos(n)}getCurrentTime(){return this.currentTime}}var Se,Ne,ze,$t,Ve,Ht;const We=class We{constructor(){T(this,ze);T(this,Se,{});T(this,Ne,new Set)}toFatPath(n){var a;const t=(n.startsWith("/")||n.startsWith("\\")?n.substring(1):n).split(/[\\/]/).map(r=>r.toUpperCase());return k(a=We,Ve,Ht).call(a,t).map(r=>{if(!u(this,Se)[r]){const l=k(this,ze,$t).call(this,r);u(this,Se)[r]=l}return u(this,Se)[r]}).join("\\")}};Se=new WeakMap,Ne=new WeakMap,ze=new WeakSet,$t=function(n){const t=n.replace(/[\\/:*?"<>|]/g,""),a=t.lastIndexOf("."),r=(a===-1?t:t.slice(0,a)).slice(0,8),l=(a===-1?"":t.slice(a+1)).slice(0,3);let c=`${r}.${l}`.replace(/\.$/,""),f=1;for(;u(this,Ne).has(c);){const p=`~${f}`;c=`${r.slice(0,8-p.length)}${p}.${l}`.replace(/\.$/,""),f++}return u(this,Ne).add(c),c},Ve=new WeakSet,Ht=function(n){return n.reduce((t,a)=>(a===".."?t.pop():a!=="."&&a!==""&&t.push(a),t),[])},T(We,Ve);let rt=We;async function qt(o){if("url"in o)return await async function(n){const t=await fetch(n),a=await t.arrayBuffer();return new Uint8Array(a)}(o.url);if("array"in o)return o.array;if("buffer"in o)return new Uint8Array(o.buffer);throw new Error("Unrecognized contents")}function St(o){const n=o.split("/"),t=[];let a="";for(let r=0;r<n.length-1;r++)a=a?`${a}/${n[r]}`:n[r],t.push(a);return t}async function Mn(o){const n=await qt(o),t=await Pn(n),a=await Promise.all(t.entries.map(async p=>({name:p.name,contents:p.name.endsWith("/")?null:new Uint8Array(await p.arrayBuffer())}))),{image:r,disk:l}=await async function(p){const _=new Uint8Array(p),y=await Ue.create(_);return y.mkfs({fmt:tt.FAT,nFat:2,auSize:2048}),{image:_,disk:y}}(1<<25);l.mount();const c=new rt,f=new Set;for(const{name:p,contents:_}of a)try{if(_===null){for(const e of St(p)){const i=e.endsWith("/")?e.substring(0,e.length-1):e;f.has(i)||(l.mkdir(c.toFatPath(i)),f.add(i))}const y=p.endsWith("/")?p.substring(0,p.length-1):p;f.has(y)||(l.mkdir(c.toFatPath(y)),f.add(y))}else{for(const y of St(p)){const e=y.endsWith("/")?y.substring(0,y.length-1):y;f.has(e)||(l.mkdir(c.toFatPath(e)),f.add(e))}if(!f.has(p)){f.add(p);const y=l.open(c.toFatPath(p),_e.WRITE|_e.CREATE_NEW);y.write(_),y.close()}}}catch(y){console.log(`Failed to create '${p}':`,y)}return l.unmount(),{image:r,disk:l,pathMap:c}}const W=65535,At=16777215,X=65534,Tt=16777214;var A,N;(function(o){o[o.Initialize=0]="Initialize",o[o.Close=1]="Close",o[o.Reset=2]="Reset",o[o.LoadSnd=3]="LoadSnd",o[o.PlaySnd=4]="PlaySnd",o[o.SetSndAttr=5]="SetSndAttr",o[o.GetSndAttr=6]="GetSndAttr",o[o.LoadMusic=7]="LoadMusic",o[o.PlayMusic=8]="PlayMusic",o[o.SetMusicAttr=9]="SetMusicAttr",o[o.GetMusicAttr=10]="GetMusicAttr",o[o.StopSnd=11]="StopSnd",o[o.PauseMusic=12]="PauseMusic",o[o.ResumeMusic=13]="ResumeMusic",o[o.StopMusic=14]="StopMusic",o[o.DeleteSnd=15]="DeleteSnd",o[o.DeleteMusic=16]="DeleteMusic",o[o.SetVolume=17]="SetVolume",o[o.SetGlobalVols=18]="SetGlobalVols",o[o.Play2DSounds=19]="Play2DSounds",o[o.Play3DSounds=20]="Play3DSounds",o[o.GetMusicLength=21]="GetMusicLength",o[o.SetMusicPos=22]="SetMusicPos",o[o.GetMusicPos=23]="GetMusicPos",o[o.Set3DPos=24]="Set3DPos",o[o.PlaySnd3D=25]="PlaySnd3D",o[o.Set3DFacts=26]="Set3DFacts",o[o.SetEAX=27]="SetEAX",o[o.PlaySounds=28]="PlaySounds",o[o.PlaySnd2D=29]="PlaySnd2D",o[o.Set2DPos=30]="Set2DPos",o[o.Set2DDistFactor=31]="Set2DDistFactor",o[o.CDInit=32]="CDInit",o[o.CDFree=33]="CDFree",o[o.GetTracks=34]="GetTracks",o[o.GetTrackLength=35]="GetTrackLength",o[o.CDPlay=36]="CDPlay"})(A||(A={}));var Y,Ae,ie,H,R,se,ee,te,pe,U,ot,at,it,ge,qe,Gt;class In{constructor(n,t){T(this,U);T(this,Y);T(this,Ae);T(this,ie);T(this,H);T(this,R);T(this,se);T(this,ee);T(this,te);T(this,pe);E(this,Y,n),E(this,Ae,void 0),E(this,ie,t??""),E(this,H,{}),E(this,R,{}),E(this,se,100),E(this,ee,{sound:100,music:100}),E(this,te,{x:0,y:0,angle:0}),E(this,pe,1)}start(){E(this,Ae,setInterval(()=>{if(u(this,Y).poll()!==0)try{const n=u(this,Y).read(`${u(this,ie)}\\DS4QB.QBW`);k(this,U,Gt).call(this,n).then(t=>{t&&u(this,Y).write(`${u(this,ie)}\\DS4QB.VCW`,t),u(this,Y).clear()})}catch{console.error(`DS4QB++: Unable to read '${u(this,ie)}\\DS4QB.QBW'`),u(this,Y).clear()}},2))}stop(){clearInterval(u(this,Ae))}}Y=new WeakMap,Ae=new WeakMap,ie=new WeakMap,H=new WeakMap,R=new WeakMap,se=new WeakMap,ee=new WeakMap,te=new WeakMap,pe=new WeakMap,U=new WeakSet,ot=function(n){const t=n.indexOf(0),a=t===-1?n:n.subarray(0,t),r=new TextDecoder().decode(a).trim();return r.startsWith('"')?r.substring(1,r.length-1):r.startsWith("C:\\")?r.substring(3):`${u(this,ie)}/${r}`},at=function(n,t,a,r,l){t===Tt?n.frequency=44050:t!==At&&(n.frequency=t),n.handle.rate(n.frequency/44050),a===X?n.volume=50:a!==W&&(n.volume=a),k(this,U,ge).call(this,n),n.pan===-2?n.pan=0:r!==-1&&(n.pan=r),n.handle.stereo(n.pan/100),l===X?n.looping=0:l!==W&&(n.looping=l),n.handle.loop(n.looping!==0),n.handle.play()},it=function(n,t,a,r,l){t===Tt?n.frequency=44050:t!==At&&(n.frequency=t),n.handle.rate(n.frequency/44050),a===X?n.volume=50:a!==W&&(n.volume=a);const c=(270-u(this,te).angle+360*(u(this,te).angle>270?1:0))*Math.PI/180,f=r-u(this,te).x,p=l-u(this,te).y,_=(f*Math.cos(c)-p*Math.sin(c))/u(this,pe),y=(f*Math.sin(c)-p*Math.cos(c))/u(this,pe),e=_*_;let i=e+y*y;i<1&&(i=1);const s=n.volume/i;k(this,U,ge).call(this,n,s);const d=Math.abs(e)<1?0:100*Math.sign(_)-100/(e*Math.sign(_));n.handle.stereo(d/100),n.handle.play()},ge=function(n,t){const a=t===void 0?n.volume:t;n.handle.volume(a/100*(u(this,se)/100)*(u(this,ee).sound/100))},qe=function(n){n.type==="mp3"?n.handle.volume(n.volume/100*(u(this,se)/100)*(u(this,ee).sound/100)):n.handle.then(t=>t.setVol(n.volume/100*(u(this,se)/100)*(u(this,ee).music/100)))},Gt=function(n){const t=new DataView(n.buffer);switch(t.getUint16(0,!0)){case A.Initialize:{const a=t.getUint32(2,!0),r=t.getUint32(6,!0);console.log("Initialize",{quality:a,flags:r});break}case A.Close:console.log("Close");break;case A.Reset:console.log("Reset");break;case A.LoadSnd:{const a=t.getUint16(2,!0),r=k(this,U,ot).call(this,n.subarray(4,68)),l=t.getUint32(68,!0);a in u(this,H)&&(u(this,H)[a].handle.stop(),u(this,H)[a].handle.unload());try{const c=u(this,Y).read(r),f=new Blob([c],{type:"audio/wav"});URL.createObjectURL(f),u(this,H)[a]={handle:new Re.Howl({src:[URL.createObjectURL(f)],format:["wav"]}),frequency:44050,volume:100,pan:0,looping:0}}catch{console.error(`LoadSnd: Unable to read file '${r}'`)}console.log("LoadSnd",{slot:a,fileName:r,flags:l});break}case A.PlaySnd:{const a=t.getUint16(2,!0),r=t.getUint32(4,!0),l=t.getUint16(8,!0),c=t.getInt16(10,!0),f=t.getUint16(12,!0);let p=u(this,H)[a];if(!p){console.error("PlaySnd: soundHandle not found",{slot:a,freq:r,volume:l,pan:c,looping:f});break}k(this,U,at).call(this,p,r,l,c,f),console.log("PlaySnd",{slot:a,freq:p.frequency,volume:p.volume,pan:p.pan,looping:p.looping});break}case A.SetSndAttr:{const a=t.getUint16(2,!0),r=t.getUint32(4,!0),l=t.getUint16(8,!0),c=t.getInt16(10,!0),f=t.getUint16(12,!0),p=t.getUint32(14,!0);let _=u(this,H)[a];if(!_){console.error("PlaySnd: soundHandle not found",{slot:a,freq:r,volume:l,pan:c,looping:f});break}if(r!=W){const y=r===X?44050:r;y!==_.frequency&&(_.frequency=y,_.handle.rate(y/44050))}if(l!=W){const y=l===X?50:l;y!==_.volume&&(_.volume=y,k(this,U,ge).call(this,_))}if(c!=W){const y=c===-2?0:c;y!==_.pan&&(_.pan=y,_.handle.stereo(_.pan/100))}if(f!=W){const y=f===X?0:f;y!==_.looping&&(_.looping=y,_.handle.loop(f!==0))}console.log("SetSndAttr",{slot:a,freq:r,volume:l,pan:c,looping:f,flags:p});break}case A.GetSndAttr:console.log("GetSndAttr");break;case A.LoadMusic:{const a=t.getUint16(2,!0),r=k(this,U,ot).call(this,n.subarray(4,68)),l=t.getUint32(68,!0),c=t.getUint16(72,!0);if(a in u(this,R)){const p=u(this,R)[a];p.type==="mp3"?p.handle.stop():p.handle.then(_=>_.stop())}const f=l===X||!!(4&l);try{const p=u(this,Y).read(r);if(c===1){const _=new Blob([p],{type:"audio/mp3"}),y=URL.createObjectURL(_);u(this,R)[a]={type:"mp3",handle:new Re.Howl({src:y,format:["mp3"],loop:f}),volume:50,byteLength:p.byteLength}}else{const _=new Nt({repeatCount:f?-1:0}),y=new Promise(e=>{_.onInitialized(()=>{e(_)})});u(this,R)[a]={type:"mod",content:p,handle:y,volume:50}}}catch{console.error(`LoadMusic: Unable to read file '${r}'`)}console.log("LoadMusic",{slot:a,fileName:r,flags:l,musicType:c});break}case A.PlayMusic:{const a=t.getUint16(2,!0),r=u(this,R)[a];if(!r){console.error("PlayMusic: Music slot not found",{slot:a});break}r.type==="mp3"?r.handle.play():r.handle.then(l=>l.play(r.content.buffer)),console.log("PlayMusic",{slot:a});break}case A.SetMusicAttr:{const a=t.getUint16(2,!0),r=t.getInt16(4,!0),l=t.getUint16(6,!0),c=u(this,R)[a];if(!c){console.error("SetMusicAttr: Music slot not found",{slot:a});break}if(r!==-1){const f=r===-2?0:r;c.type==="mp3"&&c.handle.stereo(f/100)}if(l!==W){const f=l===X?50:l;c.volume=f,k(this,U,qe).call(this,c)}console.log("SetMusicAttr",{slot:a,pan:r,volume:l});break}case A.GetMusicAttr:console.log("GetMusicAttr");break;case A.StopSnd:{const a=t.getUint16(2,!0),r=u(this,H)[a];if(!r){console.error("StopSnd: Music slot not found",{slot:a});break}r.handle.stop(),console.log("StopSnd",{slot:a});break}case A.PauseMusic:{const a=t.getUint16(2,!0),r=u(this,R)[a];if(!r){console.error("SetMusicAttr: Music slot not found",{slot:a});break}r.type==="mp3"?r.handle.pause():r.handle.then(l=>l.pause()),console.log("PauseMusic",{slot:a});break}case A.ResumeMusic:{const a=t.getUint16(2,!0),r=u(this,R)[a];if(!r){console.error("ResumeMusic: Music slot not found",{slot:a});break}r.type==="mp3"?r.handle.play():r.handle.then(l=>l.unpause()),console.log("ResumeMusic",{slot:a});break}case A.StopMusic:{const a=t.getUint16(2,!0),r=u(this,R)[a];if(!r){console.error("ResumeMusic: Music slot not found",{slot:a});break}r.type==="mp3"?r.handle.stop():r.handle.then(l=>l.stop()),console.log("StopMusic",{slot:a});break}case A.DeleteSnd:{const a=t.getUint16(2,!0);console.log("DeleteSnd",{slot:a});break}case A.DeleteMusic:{const a=t.getUint16(2,!0),r=u(this,R)[a];if(!r){console.error("ResumeMusic: Music slot not found",{slot:a});break}r.type==="mp3"?r.handle.unload():r.handle.then(l=>l.stop()),delete u(this,R)[a],console.log("DeleteMusic",{slot:a});break}case A.SetVolume:{const a=t.getUint16(2,!0);if(a!==W){E(this,se,a===X?50:a);for(const l of Object.values(u(this,H)))k(this,U,ge).call(this,l);for(const l of Object.values(u(this,R)))k(this,U,qe).call(this,l)}console.log("SetVolume",{volume:a});break}case A.SetGlobalVols:{const a=t.getUint16(2,!0),r=t.getUint16(4,!0);if(a!==W){const l=a===X?50:a;u(this,ee).sound=l;for(const c of Object.values(u(this,H)))k(this,U,ge).call(this,c)}if(r!==W){const l=r===X?50:r;u(this,ee).music=l;for(const c of Object.values(u(this,R)))k(this,U,qe).call(this,c)}console.log("SetGlobalVolumes",{soundVolume:a,musicVolume:r});break}case A.Play2DSounds:{const a=t.getUint16(2,!0),r=t.getUint16(4,!0),l=t.getUint16(6,!0),c=t.getUint16(8,!0),f=[];for(let p=0;p<c;++p){const _=t.getUint16(10+16*p,!0),y=t.getUint16(2,!0),e=t.getUint32(4,!0),i=t.getUint16(8,!0),s=t.getInt16(10,!0),d=t.getInt16(12,!0),m=t.getInt16(14,!0);f.push({id:_,slot:y,freq:e,volume:i,x:s,y:d,angle:m});const g=u(this,H)[y];g?k(this,U,it).call(this,g,e,i,s,d):console.error("Play2DSounds: Music slot not found",{slot:y})}console.log("Play2DSounds",{posX:a,posY:r,angle:l,sndCount:c,soundQueue:f});break}case A.Play3DSounds:console.error("Play3DSounds: Not implemented");break;case A.GetMusicLength:{const a=t.getUint16(2,!0),r=u(this,R)[a];if(!r){console.error("GetMusicLength: Music slot not found",{slot:a});break}const l=new Uint8Array(4),c=new DataView(l.buffer);return r.type==="mp3"?(c.setUint32(0,r.byteLength,!0),console.log("GetMusicLength",{slot:a},l),Promise.resolve(l)):r.handle.then(f=>(c.setUint16(0,f.meta.totalOrders,!0),c.setUint16(2,0,!0),console.log("GetMusicLength",{slot:a},l),l))}case A.SetMusicPos:{const a=t.getUint16(2,!0),r=u(this,R)[a];if(!r){console.error("SetMusicPos: Music slot not found",{slot:a});break}if(r.type==="mp3"){if(r.byteLength===0){console.error("SetMusicPos: Sample byte length is zero");break}const l=t.getUint32(4,!0);if(l>r.byteLength){console.error("SetMusicPos: Position is after end");break}const c=1*l/r.byteLength*r.handle.duration();r.handle.seek(c),console.log("SetMusicPos",{slot:a,position:l})}else{const l=t.getUint16(4,!0),c=t.getUint16(6,!0);r.handle.then(f=>f.setOrderRow(l,c)),console.log("SetMusicPos",{slot:a,order:l,row:c})}break}case A.GetMusicPos:{const a=t.getUint16(2,!0),r=new Uint8Array(4),l=new DataView(r.buffer),c=u(this,R)[a];if(!c){console.error("GetMusicPos: Music slot not found",{slot:a});break}if(c.type==="mp3"){if(c.byteLength===0||c.handle.duration()===0){console.error("SetMusicPos: Sample byte length is zero");break}const f=1*c.handle.seek()/c.handle.duration()*c.byteLength|0;return l.setUint32(0,f),console.log("GetMusicPos",{slot:a},r),Promise.resolve(r)}return c.handle.then(f=>(l.setUint16(0,f.order,!0),l.setUint16(1,f.row,!0),console.log("GetMusicPos",{slot:a},r),r))}case A.Set3DPos:console.log("Set3DPos");break;case A.PlaySnd3D:console.log("PlaySnd3D");break;case A.Set3DFacts:console.log("Set3DFacts");break;case A.SetEAX:console.log("SetEAX");break;case A.PlaySounds:{const a=t.getUint16(2,!0),r=[];for(let l=0;l<a;++l){const c=4+16*l,f=t.getUint16(c,!0),p=t.getUint16(c+2,!0),_=t.getUint32(c+4,!0),y=t.getUint16(c+8,!0),e=t.getInt16(c+10,!0),i=t.getUint16(c+12,!0),s=u(this,H)[p];s?(k(this,U,at).call(this,s,_,y,e,i),r.push({id:f,slot:p,freq:_,volume:y,pan:e,looping:i})):console.error("PlaySounds: Music slot not found",{slot:p})}console.log("PlaySounds",{sndCount:a,soundQueue:r});break}case A.PlaySnd2D:{const a=t.getUint16(2,!0),r=t.getUint32(4,!0),l=t.getUint16(8,!0),c=t.getInt16(10,!0),f=t.getInt16(12,!0),p=t.getInt16(14,!0);let _=u(this,H)[a];if(!_){console.error("PlaySnd: soundHandle not found",{slot:a,freq:r,volume:l,x:c,y:f,angle:p});break}k(this,U,it).call(this,_,r,l,c,f),console.log("PlaySnd2D",{slot:a,freq:r,volume:l,x:c,y:f,angle:p});break}case A.Set2DPos:{const a=t.getInt16(2,!0),r=t.getInt16(4,!0),l=t.getInt16(6,!0);E(this,te,{x:a,y:r,angle:l}),console.log("Set2DPos",{posX:a,posY:r,angle:l});break}case A.Set2DDistFactor:{const a=t.getFloat32(2,!0);E(this,pe,a),console.log("Set2DDistFactor",{distF:a});break}case A.CDInit:console.error("CDInit: Not implemented");break;case A.CDFree:console.error("CDFree: Not implemented");break;case A.GetTracks:{console.error("GetTracks: Not implemented");const a=new Uint8Array(2);return Promise.resolve(a)}case A.GetTrackLength:{console.error("GetTrackLength: Not implemented");const a=new Uint8Array(4);return Promise.resolve(a)}case A.CDPlay:{const a=t.getUint16(2,!0),r=t.getUint16(2,!0);console.error("CDPlay: Not implemented",{track:a,looping:r});break}default:console.error("Unrecognized command",{commandBytes:n})}return Promise.resolve(null)};(function(o){o[o.PlayMusic=1]="PlayMusic",o[o.ClearMusic=2]="ClearMusic",o[o.LoadSFX=3]="LoadSFX",o[o.SetVolume=4]="SetVolume",o[o.SetEAX=5]="SetEAX",o[o.StopSFX=6]="StopSFX",o[o.Set3D=7]="Set3D",o[o.SetChannel=8]="SetChannel",o[o.Pan=9]="Pan",o[o.Fade=10]="Fade",o[o.FeedBackMOD=11]="FeedBackMOD",o[o.FeedBackMP3=12]="FeedBackMP3",o[o.SetPosition=13]="SetPosition",o[o.Pause=14]="Pause",o[o.Resume=15]="Resume",o[o.Exit=55]="Exit",o[o.PlaySFX=56]="PlaySFX"})(N||(N={}));var Z,Te,Ee,ke,ne,q,L,st,z,lt,zt;class Ln{constructor(n,t="",a=""){T(this,L);T(this,Z);T(this,Te);T(this,Ee);T(this,ke);T(this,ne);T(this,q);E(this,Z,n),E(this,Te,t),E(this,Ee,a),E(this,ke,void 0),E(this,ne,[]),E(this,q,{})}start(){E(this,ke,setInterval(()=>{const n=u(this,Z).poll();n!==0&&(k(this,L,zt).call(this,n),u(this,Z).clear())},50))}stop(){clearInterval(u(this,ke))}}Z=new WeakMap,Te=new WeakMap,Ee=new WeakMap,ke=new WeakMap,ne=new WeakMap,q=new WeakMap,L=new WeakSet,st=function(){return u(this,Z).read(`${u(this,Te)}/DS4QB2.DAT`)},z=function(){const n=k(this,L,st).call(this);return new TextDecoder().decode(n).trim().split(/\s+/)},lt=function(n){const t=new Uint8Array(4*n.length),a=new DataView(t.buffer);for(let r=0;r<n.length;++r)a.setUint32(4*r,n[r]);u(this,Z).write(`${u(this,Te)}/DS4QB2.DAT`,t)},zt=function(n){var t,a;switch(n){case N.PlayMusic:{const[r,l,c,f,p]=k(this,L,z).call(this);console.log("PlayMusic",{musicFile:r,musicType:l,musicChannel:c,mRepeat:f,m3d:p}),u(this,q)[c]&&u(this,q)[c].handle.stop();const _=u(this,Z).read(`${u(this,Ee)}/${r}`);if(r.toUpperCase().endsWith("MP3")){const y=new Blob([_],{type:"audio/mp3"}),e=URL.createObjectURL(y);u(this,q)[c]={type:"mp3",handle:new Re.Howl({src:e,format:["mp3"],loop:!!Number(f)})},u(this,q)[c].handle.play()}else u(this,q)[c]={type:"mod",handle:new Nt({repeatCount:f?-1:0})},u(this,q)[c].handle.onInitialized(()=>{u(this,q)[c].handle.play(_.buffer)});break}case N.ClearMusic:{const[r]=k(this,L,z).call(this);console.log("ClearMusic",{musicChannel:r}),r in u(this,q)&&u(this,q)[r].handle.stop();break}case N.LoadSFX:{const r=k(this,L,z).call(this);console.log("LoadSFX",r);for(const l of r){let c;c=l.startsWith('"')?l.substring(1,l.length-1):l.startsWith("C:\\")?l.substring(3):`${u(this,Ee)}/${l}`;try{const f=u(this,Z).read(c),p=new Blob([f],{type:"audio/wav"});URL.createObjectURL(p),u(this,ne).push(new Re.Howl({src:[URL.createObjectURL(p)],format:["wav"]}))}catch{console.error(`LoadSFX: Unable to read '${c}'`)}}break}case N.SetVolume:{const[r,l,c]=k(this,L,z).call(this);console.log("SetVolume",{musicVol:r,sampleVol:l,streamVol:c});for(const f of u(this,ne))f.volume(Number(l)/100);for(const f of Object.values(u(this,q)))f.type==="mp3"?f.handle.volume(Number(c)/100):f.type==="mod"&&f.handle.setVol(Number(r)/100);break}case N.SetEAX:{const[r]=k(this,L,z).call(this);console.log("SetEAX",{eaxCode:r});break}case N.StopSFX:{const[r]=k(this,L,z).call(this);console.log("StopSFX",{sfxChannel:r}),u(this,ne)[Number(r)].stop();break}case N.Set3D:{const[r,l,c,f,p,_,y]=k(this,L,z).call(this);console.log("Set3D",{musicChannel:r,posX:l,posY:c,posZ:f,velX:p,velY:_,velZ:y});break}case N.SetChannel:{const[r,l,c,f]=k(this,L,z).call(this);console.log("SetChannel",{musicChannel:r,freq:l,volume:c,pan:f});break}case N.Pan:{const[r,l,c,f]=k(this,L,z).call(this);console.log("Pan",{musicChannel:r,panPos:l,panEnd:c,panSpeed:f});break}case N.Fade:{const[r,l,c,f]=k(this,L,z).call(this);console.log("Fade",{musicChannel:r,fadePos:l,fadeEnd:c,fadeSpeed:f});const p=u(this,q)[r];if(p.type==="mp3"){const _=Number(l),y=Number(c),e=Math.abs((y-_)/Number(f));p.handle.fade(_,y,e)}break}case N.SetPosition:{const r=k(this,L,st).call(this),l=new DataView(r.buffer),c=l.getUint32(0,!0),f=l.getUint32(4,!0),p=l.getUint32(8,!0);console.log("SetPosition",{musicChannel:c,cSetPos1:f,cSetPos2:p});break}case N.FeedBackMOD:{const[r]=k(this,L,z).call(this);console.log("FeedbackMOD",{musicChannel:r}),k(this,L,lt).call(this,[0,0]);break}case N.FeedBackMP3:{const[r]=k(this,L,z).call(this);console.log("FeedbackMP3",{musicChannel:r}),k(this,L,lt).call(this,[0,0]);break}case N.Exit:console.log("Exit",{});for(const r of u(this,ne))r.stop(),r.unload();for(const r of Object.values(u(this,q)))r.handle.stop();break;default:if(n>=N.PlaySFX){const r=n-N.PlaySFX;console.log("PlaySFX",{sfxHandle:r}),(a=(t=u(this,ne))==null?void 0:t[r])==null||a.play()}}};async function Un(o,n){const t=[];n.addMouse&&t.push("A:\\MOUSE"),n.addEms&&t.push("A:\\EMSMAGIC"),n.autoExe&&t.push(n.autoExe);const a=await async function(p,_){const y=await qt(p),e=await Ue.create(y);return e.session(()=>{if(_&&_.length>0){const i=e.readFile("AUTOEXEC.BAT"),s=[new TextDecoder().decode(i),"C:",..._].join(`\r
`),d=new TextEncoder().encode(s);e.writeFile("AUTOEXEC.BAT",d)}}),y}(n.fdaImageFile,t),{image:r,disk:l,pathMap:c}=await Mn(n.content);n.protocol==="ds4qb++"&&l.session(()=>{const p=new Uint8Array(10),_=new DataView(p.buffer);_.setUint16(0,1,!0),_.setUint16(2,1,!0),_.setUint16(4,1,!0),_.setUint32(6,44050,!0),l.writeFile("SOUNDSYS.CFG",p)});var f=new o({screen_container:n.screenContainer,bios:n.biosFile,vga_bios:n.vgaBiosFile,fda:{buffer:a.buffer},hda:{buffer:r.buffer},boot_order:801,autostart:!0,wasm_path:n.v86WasmUrl});return f.add_listener("emulator-ready",async function(){const p=function(y,e,i){return{read:s=>e.session(()=>e.readFile(i.toFatPath(s))),write:(s,d)=>e.session(()=>e.writeFile(i.toFatPath(s),d)),poll:()=>y.v86.cpu.io.port_read8(0),clear:()=>{y.v86.cpu.io.port_write8(0,0),y.v86.cpu.io.port_write8(0,0)}}}(f,l,c);let _;switch(n.protocol){case"ds4qb2":_=new Ln(p,(n==null?void 0:n.ds4qbDatPath)??"",(n==null?void 0:n.workingDir)??"");break;case"ds4qb++":_=new In(p,n==null?void 0:n.workingDir);break;default:throw new Error("unrecognized protocol")}setTimeout(()=>_.start(),250)}),r}const Vt=document.getElementById("screen_container");if(!Vt)throw"screen_container not found";const I=new URL("..",import.meta.url),ct={acalypha:{name:"Acalypha 0.8b",author:"VGameSoft",status:"Hangs",content:{url:`${I}/apps/aca08b.zip`},workingDir:"",autoExe:"ACA",protocol:"ds4qb2",addEms:!0},blubberd1:{name:"Blubber Dragon 2.04 part 1",author:"Draco RedScale",status:"Hangs",content:{url:`${I}/apps/BlubberD1.zip`},workingDir:"SOUNDSYS",autoExe:"BLUBBERD",protocol:"ds4qb++",addEms:!0,addMouse:!0},cai3:{name:"Cai's Quesst 3: The Runic War",author:"Venosoft",status:"Ok",content:{url:`${I}/apps/cai3.zip`},ds4qbDatPath:"",workingDir:"",autoExe:"Cai3",protocol:"ds4qb2",addEms:!1,addMouse:!1},ctf:{name:"Capture the Flag",author:"Nebula Software",status:"Ok",content:{url:`${I}/apps/ctf.zip`},ds4qbDatPath:"Audio",workingDir:"Audio",autoExe:"Run",protocol:"ds4qb2",addEms:!1,addMouse:!0},ds4qb:{name:"DS4QB Demo",author:"AetherSoft",status:"Ok",content:{url:`${I}/apps/ds4qb2.zip`},autoExe:"DSDEMO",protocol:"ds4qb2"},fj:{name:"Frantic Journey",author:"Adigun A. Polack",status:"Missing Sound",content:{url:`${I}/apps/fj552003.zip`},workingDir:"",autoExe:"FJDEMO",protocol:"ds4qb2",addEms:!0},ghini:{name:"Ghini Run",author:"Piptol",status:"Ok",content:{url:`${I}/apps/ghinirun.zip`},workingDir:"SOUNDSYS",autoExe:"GHINI",protocol:"ds4qb++",addEms:!0},hero:{name:"Hero",author:"BAS",status:"Ok",content:{url:`${I}/apps/hero-pack-20.zip`},workingDir:"",ds4qbDatPath:"SOUND",autoExe:"HERO",protocol:"ds4qb2",addEms:!0},keen7:{name:"Commander Keen 7 build 13",author:"Kevin Wellwood",status:"Hangs",content:{url:`${I}/apps/keen7-b13.zip`},workingDir:"",autoExe:"KEEN7",protocol:"ds4qb++",addEms:!0},larry:{name:"Larry the Dinosaur 2",author:"Delta Code",status:"Ok",content:{url:`${I}/apps/larrydino2.zip`},workingDir:"SOUNDSYS",autoExe:"LD2",protocol:"ds4qb++",addEms:!1},lovebyte:{name:"Love Byte",author:"Binit Sherstha",status:"Ok",content:{url:`${I}/apps/lovebyte.zip`},workingDir:"",ds4qbDatPath:"",autoExe:"LOVE",protocol:"ds4qb2",addEms:!0,addMouse:!0},mattress:{name:"Mattress Warrior",author:"DarkDread",status:"Ok",content:{url:`${I}/apps/mattress.zip`},workingDir:"SOUNDSYS",autoExe:"MWMUSIC",protocol:"ds4qb++",addEms:!1},metalqb:{name:"Metal QB",author:"The Stars Development Company",status:"Ok",content:{url:`${I}/apps/metalqb.zip`},workingDir:"SOUNDSYS",autoExe:"METALQB",protocol:"ds4qb++",addEms:!0},pedxing:{name:"Ped Xing's Quest",author:"Typosoft",status:"Hangs",content:{url:`${I}/apps/pedxing.zip`},workingDir:"SOUNDSYS",autoExe:"PEDXING",protocol:"ds4qb++",addEms:!0},qtanks:{name:"QTanks",author:"Dennis Meuwissen",status:"Ok",content:{url:`${I}/apps/qtanks11.zip`},ds4qbDatPath:"",workingDir:"",autoExe:"QTANKS",protocol:"ds4qb2",addEms:!1,addMouse:!0},resistance:{name:"Resistance",author:"Nebula Software",status:"Hangs",content:{url:`${I}/apps/resistance.zip`},workingDir:"AUDIO",ds4qbDatPath:"AUDIO",autoExe:"RUN",protocol:"ds4qb2",addEms:!0},sasdemo:{name:"Star Angelic S Demo",author:"Adigun A. Polack",status:"Ok",content:{url:`${I}/apps/StarAngelicSDemo.zip`},workingDir:"",autoExe:"SASDEMO",protocol:"ds4qb2",addEms:!0},soc3:{name:"Secret of Cooey 3 Demo",author:"DarkDread",status:"Ok",content:{url:`${I}/apps/soc3demo.zip`},ds4qbDatPath:"",workingDir:"",autoExe:"SOC3",protocol:"ds4qb2",addEms:!1,addMouse:!1},squealer:{name:"Squealer TNT",author:"Piptol",status:"Ok",content:{url:`${I}/apps/SquealerTNT.zip`},ds4qbDatPath:"",workingDir:"",autoExe:"SQUEALER",protocol:"ds4qb2",addEms:!1,addMouse:!1},ssumo:{name:"Super Sumo Wrestling",author:"Typosoft",status:"Hangs",content:{url:`${I}/apps/ssumo.zip`},workingDir:"",autoExe:"DATA\\2",protocol:"ds4qb2",ds4qbDatPath:"DATA",addEms:!0},ssumo2:{name:"Super Sumo Wrestling 2",author:"Typosoft",status:"Hangs",content:{url:`${I}/apps/SuperSumo2.zip`},workingDir:"",autoExe:"SUMO",protocol:"ds4qb2",ds4qbDatPath:"DATA",addEms:!0},terra:{name:"TerraScape: Breakdown Velocity",author:"PieSlice Productions",status:"Ok",content:{url:`${I}/apps/terrascape.ZIP`},ds4qbDatPath:"",workingDir:"",autoExe:"TERRA /SOUNDON",protocol:"ds4qb2",addEms:!1,addMouse:!0},zeta:{name:"Zeta B2",author:"AetherSoft",status:"Hangs",content:{url:`${I}/apps/ZetaB2.zip`},ds4qbDatPath:"Data",workingDir:"",autoExe:"ZETA",protocol:"ds4qb2",addEms:!1,addMouse:!0}},Fn=new URLSearchParams(window.location.search),Et=Fn.get("game")??"";if(Et)Un(window.V86,{screenContainer:Vt,...ct[Et],biosFile:{url:`${I}/bios/seabios.bin`},vgaBiosFile:{url:`${I}/bios/VGABIOS-lgpl.bin`},fdaImageFile:{url:`${I}/img/Dos6.22.img`},v86WasmUrl:`${I}/v86/v86.wasm`}).then(o=>{var n;(n=document.getElementById("download"))==null||n.addEventListener("click",()=>{const t=new Blob([o],{type:"application/octet-stream"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="hda.img",document.body.appendChild(r),r.style.display="none",r.click(),r.remove(),setTimeout(()=>window.URL.revokeObjectURL(a),1e3)})});else{const o=document.getElementById("download");o&&(o.style.display="none")}function Wt(o,n){return o[1].name<n[1].name?1:o[1].name>n[1].name?-1:0}const Rn=Object.entries(ct).filter(([,o])=>o.protocol==="ds4qb2").sort(Wt),Bn=Object.entries(ct).filter(([,o])=>o.protocol==="ds4qb++").sort(Wt),Je=document.querySelector("tr#ds4qb2games");for(const[o,n]of Rn)Je==null||Je.insertAdjacentHTML("afterend",`<tr><td><a href="?game=${o}">${n.name}</a></td><td>${n.author}</td><td>${n.status}</td></tr>`);const et=document.querySelector("tr#ds4qbppgames");for(const[o,n]of Bn)et==null||et.insertAdjacentHTML("afterend",`<tr><td><a href="?game=${o}">${n.name}</a></td><td>${n.author}</td><td>${n.status}</td></tr>`);
