var nt=Object.defineProperty;var Ce=o=>{throw TypeError(o)};var rt=(o,n,t)=>n in o?nt(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var ne=(o,n,t)=>rt(o,typeof n!="symbol"?n+"":n,t),Te=(o,n,t)=>n.has(o)||Ce("Cannot "+t);var p=(o,n,t)=>(Te(o,n,"read from private field"),t?t.call(o):n.get(o)),F=(o,n,t)=>n.has(o)?Ce("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(o):n.set(o,t),R=(o,n,t,a)=>(Te(o,n,"write to private field"),a?a.call(o,t):n.set(o,t),t),B=(o,n,t)=>(Te(o,n,"access private method"),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();const ot="modulepreload",it=function(o){return"/"+o},Pe={},Se=function(n,t,a){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));i=Promise.allSettled(t.map(m=>{if(m=it(m),m in Pe)return;Pe[m]=!0;const v=m.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const e=document.createElement("link");if(e.rel=v?"stylesheet":ot,v||(e.as="script"),e.crossOrigin="",e.href=m,h&&e.setAttribute("nonce",h),document.head.appendChild(e),v)return new Promise((r,s)=>{e.addEventListener("load",r),e.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return i.then(f=>{for(const h of f||[])h.status==="rejected"&&l(h.reason);return n().catch(l)})};var K,Ie,z,Q,ee;(function(o){o[o.CTRL_SYNC=0]="CTRL_SYNC",o[o.GET_SECTOR_COUNT=1]="GET_SECTOR_COUNT",o[o.GET_SECTOR_SIZE=2]="GET_SECTOR_SIZE",o[o.GET_BLOCK_SIZE=3]="GET_BLOCK_SIZE",o[o.CTRL_TRIM=4]="CTRL_TRIM"})(K||(K={})),function(o){o[o.FAT=1]="FAT",o[o.FAT32=2]="FAT32",o[o.EXFAT=4]="EXFAT",o[o.ANY=7]="ANY",o[o.SFD=8]="SFD"}(Ie||(Ie={})),function(o){o[o.OK=0]="OK",o[o.DISK_ERR=1]="DISK_ERR",o[o.INT_ERR=2]="INT_ERR",o[o.NOT_READY=3]="NOT_READY",o[o.NO_FILE=4]="NO_FILE",o[o.NO_PATH=5]="NO_PATH",o[o.INVALID_NAME=6]="INVALID_NAME",o[o.DENIED=7]="DENIED",o[o.EXIST=8]="EXIST",o[o.INVALID_OBJECT=9]="INVALID_OBJECT",o[o.WRITE_PROTECTED=10]="WRITE_PROTECTED",o[o.INVALID_DRIVE=11]="INVALID_DRIVE",o[o.NOT_ENABLED=12]="NOT_ENABLED",o[o.NO_FILESYSTEM=13]="NO_FILESYSTEM",o[o.MKFS_ABORTED=14]="MKFS_ABORTED",o[o.TIMEOUT=15]="TIMEOUT",o[o.LOCKED=16]="LOCKED",o[o.NOT_ENOUGH_CORE=17]="NOT_ENOUGH_CORE",o[o.TOO_MANY_OPEN_FILES=18]="TOO_MANY_OPEN_FILES",o[o.INVALID_PARAMETER=19]="INVALID_PARAMETER"}(z||(z={})),function(o){o[o.RDO=1]="RDO",o[o.HID=2]="HID",o[o.SYS=4]="SYS",o[o.DIR=16]="DIR",o[o.ARC=32]="ARC"}(Q||(Q={})),function(o){o[o.READ=1]="READ",o[o.WRITE=2]="WRITE",o[o.OPEN_EXISTING=0]="OPEN_EXISTING",o[o.CREATE_NEW=4]="CREATE_NEW",o[o.CREATE_ALWAYS=8]="CREATE_ALWAYS",o[o.OPEN_ALWAYS=16]="OPEN_ALWAYS",o[o.OPEN_APPEND=48]="OPEN_APPEND"}(ee||(ee={}));const q=24;function E(o,n,t){const a=n();if(a!==z.OK)throw t==null||t(),new Re(o,a)}var re,ve;class Me{constructor(n,t){F(this,re);F(this,ve);R(this,re,n),R(this,ve,t)}get ptr(){return p(this,re)}get cSize(){return p(this,ve).view.getUint16(p(this,re)+10,!0)}}re=new WeakMap,ve=new WeakMap;var oe,ie;class at{constructor(n,t){F(this,oe);F(this,ie);R(this,oe,n),R(this,ie,t)}get heap(){return new Uint8Array(p(this,oe).buffer)}get view(){return new DataView(p(this,oe).buffer)}allocString(n){if(n==null)return 0;const t=new TextEncoder().encode(n),a=this.alloc(t.length+1),i=this.heap.subarray(a,a+t.length+1);return i.set(t),i[i.length-1]=0,a}alloc(n){return p(this,ie).malloc(n)}free(n){p(this,ie).free(n)}decodeString(n,t){const a=this.heap.subarray(n,n+t),i=a.indexOf(0),l=i>=0?a.subarray(0,i):a;return new TextDecoder().decode(l)}enterScope(n){const t=[],a={alloc:i=>{const l=this.alloc(i);return t.unshift(l),l},allocString:i=>{const l=this.allocString(i);return t.unshift(l),l}};try{return n(a)}finally{for(const i of t)this.free(i)}}}oe=new WeakMap,ie=new WeakMap;class se{constructor(n,t,a,i){ne(this,"size");ne(this,"date");ne(this,"attrib");ne(this,"name");this.size=n,this.date=t,this.attrib=a,this.name=i}static fromFilInfo(n){const t=new DataView(n.buffer,n.byteOffset,n.byteLength),a=t.getUint32(0,!0),i=t.getUint16(4,!0),l=1980+((65024&i)>>9),f=((480&i)>>5)-1,h=31&i,m=t.getUint16(6,!0),v=new Date(l,f,h,(63488&m)>>11,(2016&m)>>5,2*(31&m)),y=n[8],e=n.subarray(9,22),r=e.indexOf(0),s=r>=0?e.subarray(0,r):e,c=new TextDecoder().decode(s);return new se(a,v,y,c)}get isReadOnly(){return!!(this.attrib&Q.RDO)}get isDirectory(){return!!(this.attrib&Q.DIR)}get isHidden(){return!!(this.attrib&Q.HID)}get isArchive(){return!!(this.attrib&Q.ARC)}get isSystem(){return!!(this.attrib&Q.SYS)}}class Re extends Error{constructor(t,a){super(`Error ${t}: ${z[a]} (${a})`);ne(this,"result");Object.setPrototypeOf(this,Re.prototype),this.result=a}}var k,L,N;class st{constructor(n,t,a){F(this,k);F(this,L);F(this,N);R(this,k,n),R(this,L,t),R(this,N,a)}get fp(){return p(this,k)}read(n,t){const a=p(this,L).f_read,i=p(this,k),l=t??n.length;return p(this,N).enterScope(f=>{const h=f.alloc(l),m=f.alloc(4);E("reading file",()=>a(i,h,l,m));const v=p(this,N).view.getUint32(m,!0);return n.set(p(this,N).heap.subarray(h,h+v)),v})}write(n,t){return p(this,N).enterScope(a=>{const i=t??n.length,l=a.alloc(i),f=a.alloc(4);return p(this,N).heap.subarray(l,l+i).set(n),E("writing file",()=>p(this,L).f_write(p(this,k),l,i,f)),p(this,N).view.getUint32(f,!0)})}close(){try{E("closing file",()=>p(this,L).f_close(p(this,k)))}finally{p(this,L).free(p(this,k))}}sync(){E("syncing disk",()=>p(this,L).f_sync(p(this,k)))}lseek(n){E("seeking",()=>p(this,L).f_lseek(p(this,k),n))}rewind(){this.lseek(0)}truncate(){E("truncating file",()=>p(this,L).f_truncate(p(this,k)))}expand(n,t){E("expanding file",()=>p(this,L).f_expand(p(this,k),n,t))}gets(n){return p(this,N).enterScope(t=>{const a=t.alloc(n+1);return E("reading string from file",()=>p(this,L).f_gets(a,n,p(this,k))),p(this,N).decodeString(a,n+1)})}putc(n){const t=n%256;return p(this,L).f_putc(t,p(this,k))}puts(n){const t=p(this,L).f_puts;return p(this,N).enterScope(a=>{const i=a.allocString(n);return t(i,p(this,k))})}tell(){return p(this,L).f_tell(p(this,k))}eof(n){return p(this,L).f_eof(p(this,k))}size(){return p(this,L).f_size(p(this,k))}error(n){return p(this,L).f_error(p(this,k))}}k=new WeakMap,L=new WeakMap,N=new WeakMap;var U,X,V;class Ne{constructor(n,t,a){F(this,U);F(this,X);F(this,V);R(this,U,n),R(this,X,t),R(this,V,a)}get dp(){return p(this,U)}close(){E("closing directory",()=>p(this,X).f_closedir(p(this,U))),p(this,V).free(p(this,U))}read(){return p(this,V).enterScope(n=>{const t=n.alloc(q);E("reading directory",()=>p(this,X).f_readdir(p(this,U),t));const a=p(this,V).heap.subarray(t,t+q);return se.fromFilInfo(a)})}rewind(){E("rewinding directory",()=>p(this,X).f_readdir(p(this,U),0))}findNext(){return p(this,V).enterScope(n=>{const t=n.alloc(q);E("searching directory for next match",()=>p(this,X).f_findnext(p(this,U),t));const a=p(this,V).heap.subarray(t,t+q);return se.fromFilInfo(a)})}*[Symbol.iterator](){let n;for(this.rewind();(n=this.read()).name!=="";)yield n}}U=new WeakMap,X=new WeakMap,V=new WeakMap;var b,O;const Be=class Be{constructor(n,t){F(this,b);F(this,O);R(this,b,n),R(this,O,t)}static async create(n,t){const a=new WebAssembly.Memory({initial:8}),i=function(m,v,y){const e=0|(y??512),r=v.byteLength/e|0;return{env:{memory:m,disk_initialize:s=>z.OK,disk_status:s=>z.OK,disk_read:(s,c,u,_)=>{const d=v.subarray(u*e,(u+_)*e);return new Uint8Array(m.buffer).set(d,c),z.OK},disk_write:(s,c,u,_)=>{const d=new Uint8Array(m.buffer).subarray(c,c+_*e);return v.set(d,u*e),z.OK},disk_ioctl:(s,c,u)=>{const _=new DataView(m.buffer);switch(c){case K.CTRL_SYNC:break;case K.GET_SECTOR_SIZE:_.setUint16(u,e,!0);break;case K.GET_SECTOR_COUNT:_.setUint32(u,r,!0);break;case K.GET_BLOCK_SIZE:return 1;case K.CTRL_TRIM:}return z.OK},get_fattime:()=>{const s=new Date;return(s.getFullYear()-1980)%128<<25|s.getMonth()+1<<21|s.getDay()<<16|s.getHours()<<11|s.getMinutes()<<5|s.getSeconds()>>1}}}}(a,n,t),l=await async function(m){if(typeof window<"u"){const u=import.meta.url,_=u.substring(0,u.lastIndexOf("/")+1);return await WebAssembly.instantiateStreaming(fetch(`${_}/ff.wasm`),m)}const{readFile:v}=await Se(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),{join:y,dirname:e}=await Se(async()=>{const{join:u,dirname:_}=await import("./__vite-browser-external-BIHI7g3E.js");return{join:u,dirname:_}},[]),{fileURLToPath:r}=await Se(async()=>{const{fileURLToPath:u}=await import("./__vite-browser-external-BIHI7g3E.js");return{fileURLToPath:u}},[]),s=y(e(r(import.meta.url)),"ff.wasm"),c=await v(s);return await WebAssembly.instantiate(c,m)}(i),f=l.instance.exports,h=new at(a,f);return new Be(h,f)}fdisk(n,t){p(this,b).enterScope(a=>{const i=a.alloc(512),l=a.alloc(4*n.length);for(let f=0;f<n.length;f++)p(this,b).view.setUint32(l+4*f,n[f]);E("partitioning disk",()=>p(this,O).f_fdisk(t??0,l,i))})}mkfs(n){p(this,b).enterScope(t=>{const a=t.allocString((n==null?void 0:n.path)??"");let i=0;if(n!=null){i=t.alloc(16);const f=p(this,b).view;f.setUint8(i,(n==null?void 0:n.fmt)??0),f.setUint8(i+1,(n==null?void 0:n.nFat)??0),f.setUint32(i+2,(n==null?void 0:n.align)??0,!0),f.setUint32(i+6,(n==null?void 0:n.nRoot)??0,!0),f.setUint32(i+10,(n==null?void 0:n.auSize)??0,!0)}const l=t.alloc(4096);E("formatting disk",()=>p(this,O).f_mkfs(a,i,l,4096))})}mount(n,t){const a=i=>p(this,b).alloc(i);return p(this,b).enterScope(i=>{const l=a(560);for(let h=0;h<560;h++)p(this,b).heap[l+h]=0;const f=i.allocString(n??"");return E("mounting workspace",()=>p(this,O).f_mount(l,f,t??0),()=>p(this,b).free(l)),new Me(l,p(this,b))})}unmount(n){return p(this,b).enterScope(t=>{try{const a=t.allocString(n??"");E("unmounting workspace",()=>p(this,O).f_mount(0,a,0))}finally{}})}open(n,t){return p(this,b).enterScope(a=>{const i=a.allocString(n),l=p(this,b).alloc(576);return E("opening file",()=>p(this,O).f_open(l,i,t),()=>p(this,b).free(l)),new st(l,p(this,O),p(this,b))})}session(n,t=""){this.mount(t);try{return n()}finally{this.unmount(t)}}readFile(n){const t=this.stat(n),a=new Uint8Array(t.size),i=this.open(n,ee.READ);try{return i.read(a),a}finally{i.close()}}writeFile(n,t){const a=this.open(n,ee.WRITE|ee.OPEN_ALWAYS);try{a.write(t)}finally{a.close()}}openDir(n){return p(this,b).enterScope(t=>{const a=t.allocString(n),i=p(this,b).alloc(64);return E("opening directory",()=>p(this,O).f_opendir(i,a),()=>p(this,b).free(i)),new Ne(i,p(this,O),p(this,b))})}findFirst(n,t){return p(this,b).enterScope(a=>{const i=a.allocString(n),l=a.allocString(t),f=a.alloc(q),h=p(this,b).alloc(64);E("searching directory",()=>p(this,O).f_findfirst(h,f,i,l));const m=p(this,b).heap.subarray(f,f+q);return[new Ne(h,p(this,O),p(this,b)),se.fromFilInfo(m)]})}*find(n,t){let a,i;for([a,i]=this.findFirst(n,t);i.name!=="";)yield i,i=a.findNext()}stat(n){return p(this,b).enterScope(t=>{const a=t.allocString(n),i=t.alloc(q);E("getting file information",()=>p(this,O).f_stat(a,i));const l=p(this,b).heap.subarray(i,i+q);return se.fromFilInfo(l)})}unlink(n){p(this,b).enterScope(t=>{const a=t.allocString(n);E("deleting file or directory",()=>p(this,O).f_unlink(a))})}rename(n,t){p(this,b).enterScope(a=>{const i=a.allocString(n),l=a.allocString(t);E("renaming file or directory",()=>p(this,O).f_rename(i,l))})}chmod(n,t,a){p(this,b).enterScope(i=>{const l=i.allocString(n);E("changing file or directory permissions",()=>p(this,O).f_chmod(l,t,a))})}utime(n,t){p(this,b).enterScope(a=>{const i=a.allocString(n),l=a.alloc(24),f=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDay();p(this,b).view.setUint16(l+4,f,!0);const h=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>>1;p(this,b).view.setUint16(l+6,h,!0),E("changing timestamp of file or directory",()=>p(this,O).f_utime(i,l))})}mkdir(n){p(this,O).f_mkdir,p(this,b).enterScope(t=>{const a=t.allocString(n);E("creating directory",()=>p(this,O).f_mkdir(a))})}chdir(n){p(this,b).enterScope(t=>{const a=t.allocString(n);E("changing current directory",()=>p(this,O).f_chdir(a))})}chdrive(n){p(this,b).enterScope(t=>{const a=t.allocString(n);E("changing current drive",()=>p(this,O).f_chdrive(a))})}getcwd(){return p(this,b).enterScope(n=>{const t=n.alloc(260);return E("getting current directory",()=>p(this,O).f_getcwd(t,260)),p(this,b).decodeString(t,260)})}getFree(n){return p(this,b).enterScope(t=>{const a=t.allocString(n??""),i=t.alloc(4),l=t.alloc(4);return E("getting free space on drive",()=>p(this,O).f_getfree(a,i,l)),[p(this,b).view.getUint32(i,!0),new Me(l,p(this,b))]})}getLabel(n){return p(this,b).enterScope(t=>{const a=t.allocString(n??""),i=t.alloc(13);p(this,b).heap[i+12]=0;const l=t.alloc(4);return E("getting volume label",()=>p(this,O).f_getlabel(a,i,l)),[p(this,b).decodeString(i,13),p(this,b).view.getUint32(l,!0)]})}setLabel(n){p(this,b).enterScope(t=>{const a=t.allocString(n);E("setting volume label",()=>p(this,O).f_setlabel(a))})}setCP(n){const t=p(this,O).f_setcp;E("setting active code page",()=>t(n))}};b=new WeakMap,O=new WeakMap;let we=Be;function Ye(o){return o.arrayBuffer?o.arrayBuffer():new Promise((n,t)=>{const a=new FileReader;a.addEventListener("loadend",()=>{n(a.result)}),a.addEventListener("error",t),a.readAsArrayBuffer(o)})}async function lt(o){const n=await Ye(o);return new Uint8Array(n)}function Xe(o){return typeof Blob<"u"&&o instanceof Blob}function me(o){return typeof SharedArrayBuffer<"u"&&o instanceof SharedArrayBuffer}const ct=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function ft(o){return o.byteOffset===0&&o.byteLength===o.buffer.byteLength}class Ue{constructor(n){this.typedArray=n instanceof ArrayBuffer||me(n)?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}async getLength(){return this.typedArray.byteLength}async read(n,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+n,t)}}class He{constructor(n){this.blob=n}async getLength(){return this.blob.size}async read(n,t){const a=this.blob.slice(n,n+t),i=await Ye(a);return new Uint8Array(i)}async sliceAsBlob(n,t,a=""){return this.blob.slice(n,n+t,a)}}function ut(o,n){var t=Uint8Array;if(o[0]==3&&o[1]==0)return n||new t(0);var a=_t,i=qe,l=dt,f=Ze,h=n==null;h&&(n=new t(o.length>>>2<<3));for(var m=0,v=0,y=0,e=0,r=0,s=0,c=0,u=0,_=0,d,g;m==0;){if(m=a(o,_,1),v=a(o,_+1,2),_+=3,v==0){_&7&&(_+=8-(_&7));var A=(_>>>3)+4,T=o[A-4]|o[A-3]<<8;h&&(n=Ee(n,u+T)),n.set(new t(o.buffer,o.byteOffset+A,T),u),_=A+T<<3,u+=T;continue}if(h&&(n=Ee(n,u+(1<<17))),v==1&&(d=w.flmap,g=w.fdmap,s=511,c=31),v==2){y=i(o,_,5)+257,e=i(o,_+5,5)+1,r=i(o,_+10,4)+4,_+=14;for(var S=0;S<38;S+=2)w.itree[S]=0,w.itree[S+1]=0;for(var D=1,S=0;S<r;S++){var Y=i(o,_+S*3,3);w.itree[(w.ordr[S]<<1)+1]=Y,Y>D&&(D=Y)}_+=3*r,_e(w.itree,D),pe(w.itree,D,w.imap),d=w.lmap,g=w.dmap,_=l(w.imap,(1<<D)-1,y+e,o,_,w.ttree);var Z=Ge(w.ttree,0,y,w.ltree);s=(1<<Z)-1;var x=Ge(w.ttree,y,e,w.dtree);c=(1<<x)-1,_e(w.ltree,Z),pe(w.ltree,Z,d),_e(w.dtree,x),pe(w.dtree,x,g)}for(;;){var ce=d[f(o,_)&s];_+=ce&15;var G=ce>>>4;if(!(G>>>8))n[u++]=G;else{if(G==256)break;var fe=u+G-254;if(G>264){var te=w.ldef[G-257];fe=u+(te>>>3)+i(o,_,te&7),_+=te&7}var $=g[f(o,_)&c];_+=$&15;var Ae=$>>>4,be=w.ddef[Ae],ge=(be>>>4)+a(o,_,be&15);for(_+=be&15,h&&(n=Ee(n,u+(1<<17)));u<fe;)n[u]=n[u++-ge],n[u]=n[u++-ge],n[u]=n[u++-ge],n[u]=n[u++-ge];u=fe}}}return n.length==u?n:n.slice(0,u)}function Ee(o,n){var t=o.length;if(n<=t)return o;var a=new Uint8Array(Math.max(t<<1,n));return a.set(o,0),a}function dt(o,n,t,a,i,l){for(var f=qe,h=Ze,m=0;m<t;){var v=o[h(a,i)&n];i+=v&15;var y=v>>>4;if(y<=15)l[m]=y,m++;else{var e=0,r=0;y==16?(r=3+f(a,i,2),i+=2,e=l[m-1]):y==17?(r=3+f(a,i,3),i+=3):y==18&&(r=11+f(a,i,7),i+=7);for(var s=m+r;m<s;)l[m]=e,m++}}return i}function Ge(o,n,t,a){for(var i=0,l=0,f=a.length>>>1;l<t;){var h=o[l+n];a[l<<1]=0,a[(l<<1)+1]=h,h>i&&(i=h),l++}for(;l<f;)a[l<<1]=0,a[(l<<1)+1]=0,l++;return i}function _e(o,n){for(var t=o.length,a,i,l,f,h,m=w.bl_count,f=0;f<=n;f++)m[f]=0;for(f=1;f<t;f+=2)m[o[f]]++;var v=w.next_code;for(a=0,m[0]=0,i=1;i<=n;i++)a=a+m[i-1]<<1,v[i]=a;for(l=0;l<t;l+=2)h=o[l+1],h!=0&&(o[l]=v[h],v[h]++)}function pe(o,n,t){for(var a=o.length,i=w.rev15,l=0;l<a;l+=2)if(o[l+1]!=0)for(var f=l>>1,h=o[l+1],m=f<<4|h,v=n-h,y=o[l]<<v,e=y+(1<<v);y!=e;){var r=i[y]>>>15-n;t[r]=m,y++}}function $e(o,n){for(var t=w.rev15,a=15-n,i=0;i<o.length;i+=2){var l=o[i]<<n-o[i+1];o[i]=t[l]>>>a}}function qe(o,n,t){return(o[n>>>3]|o[(n>>>3)+1]<<8)>>>(n&7)&(1<<t)-1}function _t(o,n,t){return(o[n>>>3]|o[(n>>>3)+1]<<8|o[(n>>>3)+2]<<16)>>>(n&7)&(1<<t)-1}function Ze(o,n){return(o[n>>>3]|o[(n>>>3)+1]<<8|o[(n>>>3)+2]<<16)>>>(n&7)}const w=function(){var o=Uint16Array,n=Uint32Array;return{next_code:new o(16),bl_count:new o(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new o(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new o(512),fltree:[],fdmap:new o(32),fdtree:[],lmap:new o(32768),ltree:[],ttree:[],dmap:new o(32768),dtree:[],imap:new o(512),itree:[],rev15:new o(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new o(65536),prev:new o(32768)}}();(function(){for(var o=32768,n=0;n<o;n++){var t=n;t=(t&2863311530)>>>1|(t&1431655765)<<1,t=(t&3435973836)>>>2|(t&858993459)<<2,t=(t&4042322160)>>>4|(t&252645135)<<4,t=(t&4278255360)>>>8|(t&16711935)<<8,w.rev15[n]=(t>>>16|t<<16)>>>17}function a(i,l,f){for(;l--!=0;)i.push(0,f)}for(var n=0;n<32;n++)w.ldef[n]=w.of0[n]<<3|w.exb[n],w.ddef[n]=w.df0[n]<<4|w.dxb[n];a(w.fltree,144,8),a(w.fltree,112,9),a(w.fltree,24,7),a(w.fltree,8,8),_e(w.fltree,9),pe(w.fltree,9,w.flmap),$e(w.fltree,9),a(w.fdtree,32,5),_e(w.fdtree,5),pe(w.fdtree,5,w.fdmap),$e(w.fdtree,5),a(w.itree,19,0),a(w.ltree,286,0),a(w.dtree,30,0),a(w.ttree,320,0)})();const Ve={table:function(){for(var o=new Uint32Array(256),n=0;n<256;n++){for(var t=n,a=0;a<8;a++)t&1?t=3988292384^t>>>1:t=t>>>1;o[n]=t}return o}(),update:function(o,n,t,a){for(var i=0;i<a;i++)o=Ve.table[(o^n[t+i])&255]^o>>>8;return o},crc:function(o,n,t){return Ve.update(4294967295,o,n,t)^4294967295}};function pt(o,n){return ut(o,n)}const We={numWorkers:1,workerURL:"",useWorkers:!1};let ht=0;const ye=[];function xe(o){return new Promise((n,t)=>{const a=new Worker(o);a.onmessage=i=>{i.data==="start"?(a.onerror=void 0,a.onmessage=void 0,n(a)):t(new Error(`unexpected message: ${i.data}`))},a.onerror=t})}function mt(o,n){return o.require?o.require(n):{}}(function(){if(ct){const{Worker:o}=mt(module,"worker_threads");return{async createWorker(n){return new o(n)},addEventListener(n,t){n.on("message",a=>{t({target:n,data:a})})},async terminate(n){await n.terminate()}}}else return{async createWorker(o){try{return await xe(o)}catch{console.warn("could not load worker:",o)}let n;try{const t=await fetch(o,{mode:"cors"});if(!t.ok)throw new Error(`could not load: ${o}`);n=await t.text(),o=URL.createObjectURL(new Blob([n],{type:"application/javascript"}));const a=await xe(o);return We.workerURL=o,a}catch{console.warn("could not load worker via fetch:",o)}if(n!==void 0)try{o=`data:application/javascript;base64,${btoa(n)}`;const t=await xe(o);return We.workerURL=o,t}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(o,n){o.addEventListener("message",n)},async terminate(o){o.terminate()}}})();function vt(o,n,t,a){const i=new Uint8Array(n);pt(o,i),a(t?new Blob([i],{type:t}):i.buffer)}async function gt(){if(ye.length!==0)for(;ye.length;){const{src:o,uncompressedSize:n,type:t,resolve:a}=ye.shift();let i=o;Xe(o)&&(i=await lt(o)),vt(i,n,t,a)}}function Ke(o,n,t){return new Promise((a,i)=>{ye.push({src:o,uncompressedSize:n,type:t,resolve:a,reject:i,id:ht++}),gt()})}function yt(o,n){const t=o&31,a=(o>>5&15)-1,i=(o>>9&127)+1980,l=0,f=(n&31)*2,h=n>>5&63,m=n>>11&31;return new Date(i,a,t,m,h,f,l)}class wt{constructor(n,t){this._reader=n,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=yt(t.lastModFileDate,t.lastModFileTime),this.isDirectory=t.uncompressedSize===0&&t.name.endsWith("/"),this.encrypted=!!(t.generalPurposeBitFlag&1),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(n="application/octet-stream"){return await Dt(this._reader,this._rawEntry,n)}async arrayBuffer(){return await Lt(this._reader,this._rawEntry)}async text(){const n=await this.arrayBuffer();return he(new Uint8Array(n))}async json(){const n=await this.text();return JSON.parse(n)}}const Oe=22,At=65535,bt=101010256,Tt=101075792;async function le(o,n,t){return await o.read(n,t)}async function ke(o,n,t,a){return o.sliceAsBlob?await o.sliceAsBlob(n,t,a):await o.read(n,t)}const St={unsigned(){return 0}};function C(o,n){return o[n]+o[n+1]*256}function P(o,n){return o[n]+o[n+1]*256+o[n+2]*65536+o[n+3]*16777216}function j(o,n){return P(o,n)+P(o,n+4)*4294967296}const Et=new TextDecoder;function he(o,n){return me(o.buffer)&&(o=new Uint8Array(o)),Et.decode(o)}async function xt(o,n){const t=Math.min(Oe+At,n),a=n-t,i=await le(o,a,t);for(let l=t-Oe;l>=0;--l){if(P(i,l)!==bt)continue;const f=new Uint8Array(i.buffer,i.byteOffset+l,i.byteLength-l),h=C(f,4);if(h!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${h}`);const m=C(f,10),v=P(f,12),y=P(f,16),e=C(f,20),r=f.length-Oe;if(e!==r)throw new Error(`invalid comment length. expected: ${r}, actual: ${e}`);const s=new Uint8Array(f.buffer,f.byteOffset+22,e),c=he(s);return m===65535||y===4294967295?await It(o,a+l,c,s):await Qe(o,y,v,m,c,s)}throw new Error("could not find end of central directory. maybe not zip file")}const Ot=117853008;async function It(o,n,t,a){const i=n-20,l=await le(o,i,20);if(P(l,0)!==Ot)throw new Error("invalid zip64 end of central directory locator signature");const f=j(l,8),h=await le(o,f,56);if(P(h,0)!==Tt)throw new Error("invalid zip64 end of central directory record signature");const m=j(h,32),v=j(h,40),y=j(h,48);return Qe(o,y,v,m,t,a)}const kt=33639248;async function Qe(o,n,t,a,i,l){let f=0;const h=await le(o,n,t),m=[];for(let y=0;y<a;++y){const e=h.subarray(f,f+46),r=P(e,0);if(r!==kt)throw new Error(`invalid central directory file header signature: 0x${r.toString(16)}`);const s={versionMadeBy:C(e,4),versionNeededToExtract:C(e,6),generalPurposeBitFlag:C(e,8),compressionMethod:C(e,10),lastModFileTime:C(e,12),lastModFileDate:C(e,14),crc32:P(e,16),compressedSize:P(e,20),uncompressedSize:P(e,24),fileNameLength:C(e,28),extraFieldLength:C(e,30),fileCommentLength:C(e,32),internalFileAttributes:C(e,36),externalFileAttributes:P(e,38),relativeOffsetOfLocalHeader:P(e,42)};if(s.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");f+=46;const c=h.subarray(f,f+s.fileNameLength+s.extraFieldLength+s.fileCommentLength);s.nameBytes=c.slice(0,s.fileNameLength),s.name=he(s.nameBytes);const u=s.fileNameLength+s.extraFieldLength,_=c.slice(s.fileNameLength,u);s.extraFields=[];let d=0;for(;d<_.length-3;){const A=C(_,d+0),T=C(_,d+2),S=d+4,D=S+T;if(D>_.length)throw new Error("extra field length exceeds extra field buffer size");s.extraFields.push({id:A,data:_.slice(S,D)}),d=D}if(s.commentBytes=c.slice(u,u+s.fileCommentLength),s.comment=he(s.commentBytes),f+=c.length,s.uncompressedSize===4294967295||s.compressedSize===4294967295||s.relativeOffsetOfLocalHeader===4294967295){const A=s.extraFields.find(D=>D.id===1);if(!A)throw new Error("expected zip64 extended information extra field");const T=A.data;let S=0;if(s.uncompressedSize===4294967295){if(S+8>T.length)throw new Error("zip64 extended information extra field does not include uncompressed size");s.uncompressedSize=j(T,S),S+=8}if(s.compressedSize===4294967295){if(S+8>T.length)throw new Error("zip64 extended information extra field does not include compressed size");s.compressedSize=j(T,S),S+=8}if(s.relativeOffsetOfLocalHeader===4294967295){if(S+8>T.length)throw new Error("zip64 extended information extra field does not include relative header offset");s.relativeOffsetOfLocalHeader=j(T,S),S+=8}}const g=s.extraFields.find(A=>A.id===28789&&A.data.length>=6&&A.data[0]===1&&P(A.data,1),St.unsigned(s.nameBytes));if(g&&(s.fileName=he(g.data.slice(5))),s.compressionMethod===0){let A=s.uncompressedSize;if(s.generalPurposeBitFlag&1&&(A+=12),s.compressedSize!==A)throw new Error(`compressed size mismatch for stored file: ${s.compressedSize} != ${A}`)}m.push(s)}return{zip:{comment:i,commentBytes:l},entries:m.map(y=>new wt(o,y))}}async function je(o,n){if(n.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");const t=await le(o,n.relativeOffsetOfLocalHeader,30),a=await o.getLength(),i=P(t,0);if(i!==67324752)throw new Error(`invalid local file header signature: 0x${i.toString(16)}`);const l=C(t,26),f=C(t,28),h=n.relativeOffsetOfLocalHeader+t.length+l+f;let m;if(n.compressionMethod===0)m=!1;else if(n.compressionMethod===8)m=!0;else throw new Error(`unsupported compression method: ${n.compressionMethod}`);const v=h,y=v+n.compressedSize;if(n.compressedSize!==0&&y>a)throw new Error(`file data overflows file bounds: ${v} +  ${n.compressedSize}  > ${a}`);return{decompress:m,fileDataStart:v}}async function Lt(o,n){const{decompress:t,fileDataStart:a}=await je(o,n);if(!t){const f=await le(o,a,n.compressedSize);return ft(f)?f.buffer:f.slice().buffer}const i=await ke(o,a,n.compressedSize);return await Ke(i,n.uncompressedSize)}async function Dt(o,n,t){const{decompress:a,fileDataStart:i}=await je(o,n);if(!a){const h=await ke(o,i,n.compressedSize,t);return Xe(h)?h:new Blob([me(h.buffer)?new Uint8Array(h):h],{type:t})}const l=await ke(o,i,n.compressedSize);return await Ke(l,n.uncompressedSize,t)}async function Ft(o){let n;if(typeof Blob<"u"&&o instanceof Blob)n=new He(o);else if(o instanceof ArrayBuffer||o&&o.buffer&&o.buffer instanceof ArrayBuffer)n=new Ue(o);else if(me(o)||me(o.buffer))n=new Ue(o);else if(typeof o=="string"){const a=await fetch(o);if(!a.ok)throw new Error(`failed http request ${o}, status: ${a.status}: ${a.statusText}`);const i=await a.blob();n=new He(i)}else if(typeof o.getLength=="function"&&typeof o.read=="function")n=o;else throw new Error("unsupported source type");const t=await n.getLength();if(t>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${t}. Only file sizes up 4503599627370496 bytes are supported`);return await xt(n,t)}async function Rt(o){const t=await(await fetch(o)).arrayBuffer();return new Uint8Array(t)}async function Bt(o){const n=new Uint8Array(o),t=await we.create(n);return t.mkfs({fmt:Ie.FAT,nFat:2,auSize:2048}),{image:n,disk:t}}async function Je(o){if("url"in o)return await Rt(o.url);if("array"in o)return o.array;if("buffer"in o)return new Uint8Array(o.buffer);throw new Error("Unrecognized contents")}async function Ct(o,n){const t=await Je(o),a=await we.create(t);return a.session(()=>{const i=a.readFile("AUTOEXEC.BAT"),l=new TextDecoder().decode(i);if(n&&n.length>0){const f=[l,"C:",...n].join(`\r
`),h=new TextEncoder().encode(f);a.writeFile("AUTOEXEC.BAT",h)}}),t}async function Pt(o){const n=await Je(o),t=await Ft(n),a=await Promise.all(t.entries.map(async h=>({name:h.name,contents:h.name.endsWith("/")?null:new Uint8Array(await h.arrayBuffer())})));a.map(({contents:h})=>(h==null?void 0:h.byteLength)??0);const i=1<<24,{image:l,disk:f}=await Bt(i);f.mount();for(const{name:h,contents:m}of a)try{if(m===null)f.mkdir(h);else{const v=f.open(h,ee.WRITE|ee.CREATE_NEW);v.write(m),v.close()}}catch(v){console.log(`Failed to create '${h}':`,v)}return f.unmount(),{image:l,disk:f}}var ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Le={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(o){(function(){var n=function(){this.init()};n.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var r=this||t;if(e=parseFloat(e),r.ctx||y(),typeof e<"u"&&e>=0&&e<=1){if(r._volume=e,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var s=0;s<r._howls.length;s++)if(!r._howls[s]._webAudio)for(var c=r._howls[s]._getSoundIds(),u=0;u<c.length;u++){var _=r._howls[s]._soundById(c[u]);_&&_._node&&(_._node.volume=_._volume*e)}return r}return r._volume},mute:function(e){var r=this||t;r.ctx||y(),r._muted=e,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e?0:r._volume,t.ctx.currentTime);for(var s=0;s<r._howls.length;s++)if(!r._howls[s]._webAudio)for(var c=r._howls[s]._getSoundIds(),u=0;u<c.length;u++){var _=r._howls[s]._soundById(c[u]);_&&_._node&&(_._node.muted=e?!0:_._muted)}return r},stop:function(){for(var e=this||t,r=0;r<e._howls.length;r++)e._howls[r].stop();return e},unload:function(){for(var e=this||t,r=e._howls.length-1;r>=0;r--)e._howls[r].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,y()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var r=new Audio;typeof r.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var r=new Audio;r.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,r=null;try{r=typeof Audio<"u"?new Audio:null}catch{return e}if(!r||typeof r.canPlayType!="function")return e;var s=r.canPlayType("audio/mpeg;").replace(/^no$/,""),c=e._navigator?e._navigator.userAgent:"",u=c.match(/OPR\/(\d+)/g),_=u&&parseInt(u[0].split("/")[1],10)<33,d=c.indexOf("Safari")!==-1&&c.indexOf("Chrome")===-1,g=c.match(/Version\/(.*?) /),A=d&&g&&parseInt(g[1],10)<15;return e._codecs={mp3:!!(!_&&(s||r.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!s,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!A&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!A&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(s){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var c=new Audio;c._unlocked=!0,e._releaseHtml5Audio(c)}catch{e.noAudio=!0;break}for(var u=0;u<e._howls.length;u++)if(!e._howls[u]._webAudio)for(var _=e._howls[u]._getSoundIds(),d=0;d<_.length;d++){var g=e._howls[u]._soundById(_[d]);g&&g._node&&!g._node._unlocked&&(g._node._unlocked=!0,g._node.load())}e._autoResume();var A=e.ctx.createBufferSource();A.buffer=e._scratchBuffer,A.connect(e.ctx.destination),typeof A.start>"u"?A.noteOn(0):A.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),A.onended=function(){A.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var T=0;T<e._howls.length;T++)e._howls[T]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var r=new Audio().play();return r&&typeof Promise<"u"&&(r instanceof Promise||typeof r.then=="function")&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var r=this||t;return e._unlocked&&r._html5AudioPool.push(e),r},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!t.usingWebAudio)){for(var r=0;r<e._howls.length;r++)if(e._howls[r]._webAudio){for(var s=0;s<e._howls[r]._sounds.length;s++)if(!e._howls[r]._sounds[s]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var c=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(c,c)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!t.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var t=new n,a=function(e){var r=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}r.init(e)};a.prototype={init:function(e){var r=this;return t.ctx||y(),r._autoplay=e.autoplay||!1,r._format=typeof e.format!="string"?e.format:[e.format],r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src=typeof e.src!="string"?e.src:[e.src],r._volume=e.volume!==void 0?e.volume:1,r._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=e.onend?[{fn:e.onend}]:[],r._onfade=e.onfade?[{fn:e.onfade}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._onstop=e.onstop?[{fn:e.onstop}]:[],r._onmute=e.onmute?[{fn:e.onmute}]:[],r._onvolume=e.onvolume?[{fn:e.onvolume}]:[],r._onrate=e.onrate?[{fn:e.onrate}]:[],r._onseek=e.onseek?[{fn:e.onseek}]:[],r._onunlock=e.onunlock?[{fn:e.onunlock}]:[],r._onresume=[],r._webAudio=t.usingWebAudio&&!r._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&r._preload!=="none"&&r.load(),r},load:function(){var e=this,r=null;if(t.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var s=0;s<e._src.length;s++){var c,u;if(e._format&&e._format[s])c=e._format[s];else{if(u=e._src[s],typeof u!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}c=/^data:audio\/([^;,]+);/i.exec(u),c||(c=/\.([^.]+)$/.exec(u.split("?",1)[0])),c&&(c=c[1].toLowerCase())}if(c||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),c&&t.codecs(c)){r=e._src[s];break}}if(!r){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=r,e._state="loading",window.location.protocol==="https:"&&r.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new i(e),e._webAudio&&f(e),e},play:function(e,r){var s=this,c=null;if(typeof e=="number")c=e,e=null;else{if(typeof e=="string"&&s._state==="loaded"&&!s._sprite[e])return null;if(typeof e>"u"&&(e="__default",!s._playLock)){for(var u=0,_=0;_<s._sounds.length;_++)s._sounds[_]._paused&&!s._sounds[_]._ended&&(u++,c=s._sounds[_]._id);u===1?e=null:c=null}}var d=c?s._soundById(c):s._inactiveSound();if(!d)return null;if(c&&!e&&(e=d._sprite||"__default"),s._state!=="loaded"){d._sprite=e,d._ended=!1;var g=d._id;return s._queue.push({event:"play",action:function(){s.play(g)}}),g}if(c&&!d._paused)return r||s._loadQueue("play"),d._id;s._webAudio&&t._autoResume();var A=Math.max(0,d._seek>0?d._seek:s._sprite[e][0]/1e3),T=Math.max(0,(s._sprite[e][0]+s._sprite[e][1])/1e3-A),S=T*1e3/Math.abs(d._rate),D=s._sprite[e][0]/1e3,Y=(s._sprite[e][0]+s._sprite[e][1])/1e3;d._sprite=e,d._ended=!1;var Z=function(){d._paused=!1,d._seek=A,d._start=D,d._stop=Y,d._loop=!!(d._loop||s._sprite[e][2])};if(A>=Y){s._ended(d);return}var x=d._node;if(s._webAudio){var ce=function(){s._playLock=!1,Z(),s._refreshBuffer(d);var $=d._muted||s._muted?0:d._volume;x.gain.setValueAtTime($,t.ctx.currentTime),d._playStart=t.ctx.currentTime,typeof x.bufferSource.start>"u"?d._loop?x.bufferSource.noteGrainOn(0,A,86400):x.bufferSource.noteGrainOn(0,A,T):d._loop?x.bufferSource.start(0,A,86400):x.bufferSource.start(0,A,T),S!==1/0&&(s._endTimers[d._id]=setTimeout(s._ended.bind(s,d),S)),r||setTimeout(function(){s._emit("play",d._id),s._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?ce():(s._playLock=!0,s.once("resume",ce),s._clearTimer(d._id))}else{var G=function(){x.currentTime=A,x.muted=d._muted||s._muted||t._muted||x.muted,x.volume=d._volume*t.volume(),x.playbackRate=d._rate;try{var $=x.play();if($&&typeof Promise<"u"&&($ instanceof Promise||typeof $.then=="function")?(s._playLock=!0,Z(),$.then(function(){s._playLock=!1,x._unlocked=!0,r?s._loadQueue():s._emit("play",d._id)}).catch(function(){s._playLock=!1,s._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),d._ended=!0,d._paused=!0})):r||(s._playLock=!1,Z(),s._emit("play",d._id)),x.playbackRate=d._rate,x.paused){s._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||d._loop?s._endTimers[d._id]=setTimeout(s._ended.bind(s,d),S):(s._endTimers[d._id]=function(){s._ended(d),x.removeEventListener("ended",s._endTimers[d._id],!1)},x.addEventListener("ended",s._endTimers[d._id],!1))}catch(Ae){s._emit("playerror",d._id,Ae)}};x.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(x.src=s._src,x.load());var fe=window&&window.ejecta||!x.readyState&&t._navigator.isCocoonJS;if(x.readyState>=3||fe)G();else{s._playLock=!0,s._state="loading";var te=function(){s._state="loaded",G(),x.removeEventListener(t._canPlayEvent,te,!1)};x.addEventListener(t._canPlayEvent,te,!1),s._clearTimer(d._id)}}return d._id},pause:function(e){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(e)}}),r;for(var s=r._getSoundIds(e),c=0;c<s.length;c++){r._clearTimer(s[c]);var u=r._soundById(s[c]);if(u&&!u._paused&&(u._seek=r.seek(s[c]),u._rateSeek=0,u._paused=!0,r._stopFade(s[c]),u._node))if(r._webAudio){if(!u._node.bufferSource)continue;typeof u._node.bufferSource.stop>"u"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),r._cleanBuffer(u._node)}else(!isNaN(u._node.duration)||u._node.duration===1/0)&&u._node.pause();arguments[1]||r._emit("pause",u?u._id:null)}return r},stop:function(e,r){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"stop",action:function(){s.stop(e)}}),s;for(var c=s._getSoundIds(e),u=0;u<c.length;u++){s._clearTimer(c[u]);var _=s._soundById(c[u]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,s._stopFade(c[u]),_._node&&(s._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),s._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&s._clearSound(_._node))),r||s._emit("stop",_._id))}return s},mute:function(e,r){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"mute",action:function(){s.mute(e,r)}}),s;if(typeof r>"u")if(typeof e=="boolean")s._muted=e;else return s._muted;for(var c=s._getSoundIds(r),u=0;u<c.length;u++){var _=s._soundById(c[u]);_&&(_._muted=e,_._interval&&s._stopFade(_._id),s._webAudio&&_._node?_._node.gain.setValueAtTime(e?0:_._volume,t.ctx.currentTime):_._node&&(_._node.muted=t._muted?!0:e),s._emit("mute",_._id))}return s},volume:function(){var e=this,r=arguments,s,c;if(r.length===0)return e._volume;if(r.length===1||r.length===2&&typeof r[1]>"u"){var u=e._getSoundIds(),_=u.indexOf(r[0]);_>=0?c=parseInt(r[0],10):s=parseFloat(r[0])}else r.length>=2&&(s=parseFloat(r[0]),c=parseInt(r[1],10));var d;if(typeof s<"u"&&s>=0&&s<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,r)}}),e;typeof c>"u"&&(e._volume=s),c=e._getSoundIds(c);for(var g=0;g<c.length;g++)d=e._soundById(c[g]),d&&(d._volume=s,r[2]||e._stopFade(c[g]),e._webAudio&&d._node&&!d._muted?d._node.gain.setValueAtTime(s,t.ctx.currentTime):d._node&&!d._muted&&(d._node.volume=s*t.volume()),e._emit("volume",d._id))}else return d=c?e._soundById(c):e._sounds[0],d?d._volume:0;return e},fade:function(e,r,s,c){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"fade",action:function(){u.fade(e,r,s,c)}}),u;e=Math.min(Math.max(0,parseFloat(e)),1),r=Math.min(Math.max(0,parseFloat(r)),1),s=parseFloat(s),u.volume(e,c);for(var _=u._getSoundIds(c),d=0;d<_.length;d++){var g=u._soundById(_[d]);if(g){if(c||u._stopFade(_[d]),u._webAudio&&!g._muted){var A=t.ctx.currentTime,T=A+s/1e3;g._volume=e,g._node.gain.setValueAtTime(e,A),g._node.gain.linearRampToValueAtTime(r,T)}u._startFadeInterval(g,e,r,s,_[d],typeof c>"u")}}return u},_startFadeInterval:function(e,r,s,c,u,_){var d=this,g=r,A=s-r,T=Math.abs(A/.01),S=Math.max(4,T>0?c/T:c),D=Date.now();e._fadeTo=s,e._interval=setInterval(function(){var Y=(Date.now()-D)/c;D=Date.now(),g+=A*Y,g=Math.round(g*100)/100,A<0?g=Math.max(s,g):g=Math.min(s,g),d._webAudio?e._volume=g:d.volume(g,e._id,!0),_&&(d._volume=g),(s<r&&g<=s||s>r&&g>=s)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,d.volume(s,e._id),d._emit("fade",e._id))},S)},_stopFade:function(e){var r=this,s=r._soundById(e);return s&&s._interval&&(r._webAudio&&s._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(s._interval),s._interval=null,r.volume(s._fadeTo,e),s._fadeTo=null,r._emit("fade",e)),r},loop:function(){var e=this,r=arguments,s,c,u;if(r.length===0)return e._loop;if(r.length===1)if(typeof r[0]=="boolean")s=r[0],e._loop=s;else return u=e._soundById(parseInt(r[0],10)),u?u._loop:!1;else r.length===2&&(s=r[0],c=parseInt(r[1],10));for(var _=e._getSoundIds(c),d=0;d<_.length;d++)u=e._soundById(_[d]),u&&(u._loop=s,e._webAudio&&u._node&&u._node.bufferSource&&(u._node.bufferSource.loop=s,s&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop,e.playing(_[d])&&(e.pause(_[d],!0),e.play(_[d],!0)))));return e},rate:function(){var e=this,r=arguments,s,c;if(r.length===0)c=e._sounds[0]._id;else if(r.length===1){var u=e._getSoundIds(),_=u.indexOf(r[0]);_>=0?c=parseInt(r[0],10):s=parseFloat(r[0])}else r.length===2&&(s=parseFloat(r[0]),c=parseInt(r[1],10));var d;if(typeof s=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,r)}}),e;typeof c>"u"&&(e._rate=s),c=e._getSoundIds(c);for(var g=0;g<c.length;g++)if(d=e._soundById(c[g]),d){e.playing(c[g])&&(d._rateSeek=e.seek(c[g]),d._playStart=e._webAudio?t.ctx.currentTime:d._playStart),d._rate=s,e._webAudio&&d._node&&d._node.bufferSource?d._node.bufferSource.playbackRate.setValueAtTime(s,t.ctx.currentTime):d._node&&(d._node.playbackRate=s);var A=e.seek(c[g]),T=(e._sprite[d._sprite][0]+e._sprite[d._sprite][1])/1e3-A,S=T*1e3/Math.abs(d._rate);(e._endTimers[c[g]]||!d._paused)&&(e._clearTimer(c[g]),e._endTimers[c[g]]=setTimeout(e._ended.bind(e,d),S)),e._emit("rate",d._id)}}else return d=e._soundById(c),d?d._rate:e._rate;return e},seek:function(){var e=this,r=arguments,s,c;if(r.length===0)e._sounds.length&&(c=e._sounds[0]._id);else if(r.length===1){var u=e._getSoundIds(),_=u.indexOf(r[0]);_>=0?c=parseInt(r[0],10):e._sounds.length&&(c=e._sounds[0]._id,s=parseFloat(r[0]))}else r.length===2&&(s=parseFloat(r[0]),c=parseInt(r[1],10));if(typeof c>"u")return 0;if(typeof s=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,r)}}),e;var d=e._soundById(c);if(d)if(typeof s=="number"&&s>=0){var g=e.playing(c);g&&e.pause(c,!0),d._seek=s,d._ended=!1,e._clearTimer(c),!e._webAudio&&d._node&&!isNaN(d._node.duration)&&(d._node.currentTime=s);var A=function(){g&&e.play(c,!0),e._emit("seek",c)};if(g&&!e._webAudio){var T=function(){e._playLock?setTimeout(T,0):A()};setTimeout(T,0)}else A()}else if(e._webAudio){var S=e.playing(c)?t.ctx.currentTime-d._playStart:0,D=d._rateSeek?d._rateSeek-d._seek:0;return d._seek+(D+S*Math.abs(d._rate))}else return d._node.currentTime;return e},playing:function(e){var r=this;if(typeof e=="number"){var s=r._soundById(e);return s?!s._paused:!1}for(var c=0;c<r._sounds.length;c++)if(!r._sounds[c]._paused)return!0;return!1},duration:function(e){var r=this,s=r._duration,c=r._soundById(e);return c&&(s=r._sprite[c._sprite][1]/1e3),s},state:function(){return this._state},unload:function(){for(var e=this,r=e._sounds,s=0;s<r.length;s++)r[s]._paused||e.stop(r[s]._id),e._webAudio||(e._clearSound(r[s]._node),r[s]._node.removeEventListener("error",r[s]._errorFn,!1),r[s]._node.removeEventListener(t._canPlayEvent,r[s]._loadFn,!1),r[s]._node.removeEventListener("ended",r[s]._endFn,!1),t._releaseHtml5Audio(r[s]._node)),delete r[s]._node,e._clearTimer(r[s]._id);var c=t._howls.indexOf(e);c>=0&&t._howls.splice(c,1);var u=!0;for(s=0;s<t._howls.length;s++)if(t._howls[s]._src===e._src||e._src.indexOf(t._howls[s]._src)>=0){u=!1;break}return l&&u&&delete l[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,r,s,c){var u=this,_=u["_on"+e];return typeof r=="function"&&_.push(c?{id:s,fn:r,once:c}:{id:s,fn:r}),u},off:function(e,r,s){var c=this,u=c["_on"+e],_=0;if(typeof r=="number"&&(s=r,r=null),r||s)for(_=0;_<u.length;_++){var d=s===u[_].id;if(r===u[_].fn&&d||!r&&d){u.splice(_,1);break}}else if(e)c["_on"+e]=[];else{var g=Object.keys(c);for(_=0;_<g.length;_++)g[_].indexOf("_on")===0&&Array.isArray(c[g[_]])&&(c[g[_]]=[])}return c},once:function(e,r,s){var c=this;return c.on(e,r,s,1),c},_emit:function(e,r,s){for(var c=this,u=c["_on"+e],_=u.length-1;_>=0;_--)(!u[_].id||u[_].id===r||e==="load")&&(setTimeout((function(d){d.call(this,r,s)}).bind(c,u[_].fn),0),u[_].once&&c.off(e,u[_].fn,u[_].id));return c._loadQueue(e),c},_loadQueue:function(e){var r=this;if(r._queue.length>0){var s=r._queue[0];s.event===e&&(r._queue.shift(),r._loadQueue()),e||s.action()}return r},_ended:function(e){var r=this,s=e._sprite;if(!r._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(r._ended.bind(r,e),100),r;var c=!!(e._loop||r._sprite[s][2]);if(r._emit("end",e._id),!r._webAudio&&c&&r.stop(e._id,!0).play(e._id),r._webAudio&&c){r._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var u=(e._stop-e._start)*1e3/Math.abs(e._rate);r._endTimers[e._id]=setTimeout(r._ended.bind(r,e),u)}return r._webAudio&&!c&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,r._clearTimer(e._id),r._cleanBuffer(e._node),t._autoSuspend()),!r._webAudio&&!c&&r.stop(e._id,!0),r},_clearTimer:function(e){var r=this;if(r._endTimers[e]){if(typeof r._endTimers[e]!="function")clearTimeout(r._endTimers[e]);else{var s=r._soundById(e);s&&s._node&&s._node.removeEventListener("ended",r._endTimers[e],!1)}delete r._endTimers[e]}return r},_soundById:function(e){for(var r=this,s=0;s<r._sounds.length;s++)if(e===r._sounds[s]._id)return r._sounds[s];return null},_inactiveSound:function(){var e=this;e._drain();for(var r=0;r<e._sounds.length;r++)if(e._sounds[r]._ended)return e._sounds[r].reset();return new i(e)},_drain:function(){var e=this,r=e._pool,s=0,c=0;if(!(e._sounds.length<r)){for(c=0;c<e._sounds.length;c++)e._sounds[c]._ended&&s++;for(c=e._sounds.length-1;c>=0;c--){if(s<=r)return;e._sounds[c]._ended&&(e._webAudio&&e._sounds[c]._node&&e._sounds[c]._node.disconnect(0),e._sounds.splice(c,1),s--)}}},_getSoundIds:function(e){var r=this;if(typeof e>"u"){for(var s=[],c=0;c<r._sounds.length;c++)s.push(r._sounds[c]._id);return s}else return[e]},_refreshBuffer:function(e){var r=this;return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=l[r._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),r},_cleanBuffer:function(e){var r=this,s=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return r;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),s))try{e.bufferSource.buffer=t._scratchBuffer}catch{}return e.bufferSource=null,r},_clearSound:function(e){var r=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);r||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(e){this._parent=e,this.init()};i.prototype={init:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,r._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,s=t._muted||e._muted||e._parent._muted?0:e._volume;return r._webAudio?(e._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(s,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=r._src,e._node.preload=r._preload===!0?"auto":r._preload,e._node.volume=s*t.volume(),e._node.load()),e},reset:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,r=e._parent;r._duration=Math.ceil(e._node.duration*10)/10,Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,r=e._parent;r._duration===1/0&&(r._duration=Math.ceil(e._node.duration*10)/10,r._sprite.__default[1]===1/0&&(r._sprite.__default[1]=r._duration*1e3),r._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},f=function(e){var r=e._src;if(l[r]){e._duration=l[r].duration,v(e);return}if(/^data:[^;]+;base64,/.test(r)){for(var s=atob(r.split(",")[1]),c=new Uint8Array(s.length),u=0;u<s.length;++u)c[u]=s.charCodeAt(u);m(c.buffer,e)}else{var _=new XMLHttpRequest;_.open(e._xhr.method,r,!0),_.withCredentials=e._xhr.withCredentials,_.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(d){_.setRequestHeader(d,e._xhr.headers[d])}),_.onload=function(){var d=(_.status+"")[0];if(d!=="0"&&d!=="2"&&d!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}m(_.response,e)},_.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[r],e.load())},h(_)}},h=function(e){try{e.send()}catch{e.onerror()}},m=function(e,r){var s=function(){r._emit("loaderror",null,"Decoding audio data failed.")},c=function(u){u&&r._sounds.length>0?(l[r._src]=u,v(r,u)):s()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(e).then(c).catch(s):t.ctx.decodeAudioData(e,c,s)},v=function(e,r){r&&!e._duration&&(e._duration=r.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},y=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),r=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),s=r?parseInt(r[1],10):null;if(e&&s&&s<9){var c=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!c&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};o.Howler=t,o.Howl=a,typeof ue<"u"?(ue.HowlerGlobal=n,ue.Howler=t,ue.Howl=a,ue.Sound=i):typeof window<"u"&&(window.HowlerGlobal=n,window.Howler=t,window.Howl=a,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var a=this;if(!a.ctx||!a.ctx.listener)return a;for(var i=a._howls.length-1;i>=0;i--)a._howls[i].stereo(t);return a},HowlerGlobal.prototype.pos=function(t,a,i){var l=this;if(!l.ctx||!l.ctx.listener)return l;if(a=typeof a!="number"?l._pos[1]:a,i=typeof i!="number"?l._pos[2]:i,typeof t=="number")l._pos=[t,a,i],typeof l.ctx.listener.positionX<"u"?(l.ctx.listener.positionX.setTargetAtTime(l._pos[0],Howler.ctx.currentTime,.1),l.ctx.listener.positionY.setTargetAtTime(l._pos[1],Howler.ctx.currentTime,.1),l.ctx.listener.positionZ.setTargetAtTime(l._pos[2],Howler.ctx.currentTime,.1)):l.ctx.listener.setPosition(l._pos[0],l._pos[1],l._pos[2]);else return l._pos;return l},HowlerGlobal.prototype.orientation=function(t,a,i,l,f,h){var m=this;if(!m.ctx||!m.ctx.listener)return m;var v=m._orientation;if(a=typeof a!="number"?v[1]:a,i=typeof i!="number"?v[2]:i,l=typeof l!="number"?v[3]:l,f=typeof f!="number"?v[4]:f,h=typeof h!="number"?v[5]:h,typeof t=="number")m._orientation=[t,a,i,l,f,h],typeof m.ctx.listener.forwardX<"u"?(m.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),m.ctx.listener.forwardY.setTargetAtTime(a,Howler.ctx.currentTime,.1),m.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),m.ctx.listener.upX.setTargetAtTime(l,Howler.ctx.currentTime,.1),m.ctx.listener.upY.setTargetAtTime(f,Howler.ctx.currentTime,.1),m.ctx.listener.upZ.setTargetAtTime(h,Howler.ctx.currentTime,.1)):m.ctx.listener.setOrientation(t,a,i,l,f,h);else return v;return m},Howl.prototype.init=function(t){return function(a){var i=this;return i._orientation=a.orientation||[1,0,0],i._stereo=a.stereo||null,i._pos=a.pos||null,i._pannerAttr={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:360,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:360,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:0,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:"inverse",maxDistance:typeof a.maxDistance<"u"?a.maxDistance:1e4,panningModel:typeof a.panningModel<"u"?a.panningModel:"HRTF",refDistance:typeof a.refDistance<"u"?a.refDistance:1,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:1},i._onstereo=a.onstereo?[{fn:a.onstereo}]:[],i._onpos=a.onpos?[{fn:a.onpos}]:[],i._onorientation=a.onorientation?[{fn:a.onorientation}]:[],t.call(this,a)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,a){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,a)}}),i;var l=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof a>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var f=i._getSoundIds(a),h=0;h<f.length;h++){var m=i._soundById(f[h]);if(m)if(typeof t=="number")m._stereo=t,m._pos=[t,0,0],m._node&&(m._pannerAttr.panningModel="equalpower",(!m._panner||!m._panner.pan)&&n(m,l),l==="spatial"?typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):m._panner.setPosition(t,0,0):m._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",m._id);else return m._stereo}return i},Howl.prototype.pos=function(t,a,i,l){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"pos",action:function(){f.pos(t,a,i,l)}}),f;if(a=typeof a!="number"?0:a,i=typeof i!="number"?-.5:i,typeof l>"u")if(typeof t=="number")f._pos=[t,a,i];else return f._pos;for(var h=f._getSoundIds(l),m=0;m<h.length;m++){var v=f._soundById(h[m]);if(v)if(typeof t=="number")v._pos=[t,a,i],v._node&&((!v._panner||v._panner.pan)&&n(v,"spatial"),typeof v._panner.positionX<"u"?(v._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),v._panner.positionY.setValueAtTime(a,Howler.ctx.currentTime),v._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):v._panner.setPosition(t,a,i)),f._emit("pos",v._id);else return v._pos}return f},Howl.prototype.orientation=function(t,a,i,l){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"orientation",action:function(){f.orientation(t,a,i,l)}}),f;if(a=typeof a!="number"?f._orientation[1]:a,i=typeof i!="number"?f._orientation[2]:i,typeof l>"u")if(typeof t=="number")f._orientation=[t,a,i];else return f._orientation;for(var h=f._getSoundIds(l),m=0;m<h.length;m++){var v=f._soundById(h[m]);if(v)if(typeof t=="number")v._orientation=[t,a,i],v._node&&(v._panner||(v._pos||(v._pos=f._pos||[0,0,-.5]),n(v,"spatial")),typeof v._panner.orientationX<"u"?(v._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),v._panner.orientationY.setValueAtTime(a,Howler.ctx.currentTime),v._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):v._panner.setOrientation(t,a,i)),f._emit("orientation",v._id);else return v._orientation}return f},Howl.prototype.pannerAttr=function(){var t=this,a=arguments,i,l,f;if(!t._webAudio)return t;if(a.length===0)return t._pannerAttr;if(a.length===1)if(typeof a[0]=="object")i=a[0],typeof l>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return f=t._soundById(parseInt(a[0],10)),f?f._pannerAttr:t._pannerAttr;else a.length===2&&(i=a[0],l=parseInt(a[1],10));for(var h=t._getSoundIds(l),m=0;m<h.length;m++)if(f=t._soundById(h[m]),f){var v=f._pannerAttr;v={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:v.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:v.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:v.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:v.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:v.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:v.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:v.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:v.panningModel};var y=f._panner;y||(f._pos||(f._pos=t._pos||[0,0,-.5]),n(f,"spatial"),y=f._panner),y.coneInnerAngle=v.coneInnerAngle,y.coneOuterAngle=v.coneOuterAngle,y.coneOuterGain=v.coneOuterGain,y.distanceModel=v.distanceModel,y.maxDistance=v.maxDistance,y.refDistance=v.refDistance,y.rolloffFactor=v.rolloffFactor,y.panningModel=v.panningModel}return t},Sound.prototype.init=function(t){return function(){var a=this,i=a._parent;a._orientation=i._orientation,a._stereo=i._stereo,a._pos=i._pos,a._pannerAttr=i._pannerAttr,t.call(this),a._stereo?i.stereo(a._stereo):a._pos&&i.pos(a._pos[0],a._pos[1],a._pos[2],a._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var a=this,i=a._parent;return a._orientation=i._orientation,a._stereo=i._stereo,a._pos=i._pos,a._pannerAttr=i._pannerAttr,a._stereo?i.stereo(a._stereo):a._pos?i.pos(a._pos[0],a._pos[1],a._pos[2],a._id):a._panner&&(a._panner.disconnect(0),a._panner=void 0,i._refreshBuffer(a)),t.call(this)}}(Sound.prototype.reset);var n=function(t,a){a=a||"spatial",a==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(Le);var H,ae,J,W,I,De,M,Fe,et;class Mt{constructor(n){F(this,I);F(this,H);F(this,ae);F(this,J);F(this,W);R(this,H,n),R(this,ae,void 0),R(this,J,[]),R(this,W,{})}start(){R(this,ae,setInterval(()=>{const n=p(this,H).poll();n!==0&&(B(this,I,et).call(this,n),p(this,H).clear())},50))}stop(){clearInterval(p(this,ae))}}H=new WeakMap,ae=new WeakMap,J=new WeakMap,W=new WeakMap,I=new WeakSet,De=function(){return p(this,H).read("DS4QB2.DAT")},M=function(){const n=B(this,I,De).call(this);return new TextDecoder().decode(n).trim().split(/\s+/)},Fe=function(n){const t=new Uint8Array(n.length*4),a=new DataView(t.buffer);for(let i=0;i<n.length;++i)a.setUint32(i*4,n[i]);p(this,H).write("DS4QB2.DAT",t)},et=function(n){var t,a;switch(n){case 1:{const[i,l,f,h,m]=B(this,I,M).call(this);console.log("PlayMusic",{musicFile:i,musicType:l,musicChannel:f,mRepeat:h,m3d:m});const v=p(this,H).read(i),y=new Blob([v],{type:"audio/mp3"}),e=URL.createObjectURL(y);p(this,W)[f]=new Le.Howl({src:e,format:["mp3"],loop:!!Number(h)}),p(this,W)[f].play();break}case 2:{const[i]=B(this,I,M).call(this);console.log("ClearMusic",{musicChannel:i}),p(this,W)[i].stop();break}case 3:{const i=B(this,I,M).call(this);console.log("LoadSFX",i);for(const l of i){const f=p(this,H).read(l),h=new Blob([f],{type:"audio/wav"});URL.createObjectURL(h),p(this,J).push(new Le.Howl({src:[URL.createObjectURL(h)],format:["wav"]}))}break}case 4:{const[i,l,f]=B(this,I,M).call(this);console.log("SetVolume",{musicVol:i,sampleVol:l,streamVol:f});for(const h of p(this,J))h.volume(Number(l)/100);for(const h of Object.values(p(this,W)))h.volume(Number(i)/100);break}case 5:{const[i]=B(this,I,M).call(this);console.log("SetEAX",{eaxCode:i});break}case 6:{const[i]=B(this,I,M).call(this);console.log("StopSFX",{sfxChannel:i});break}case 7:{const[i,l,f,h,m,v,y]=B(this,I,M).call(this);console.log("Set3D",{musicChannel:i,posX:l,posY:f,posZ:h,velX:m,velY:v,velZ:y});break}case 8:{const[i,l,f,h]=B(this,I,M).call(this);console.log("SetChannel",{musicChannel:i,freq:l,volume:f,pan:h});break}case 9:{const[i,l,f,h]=B(this,I,M).call(this);console.log("Fade",{musicChannel:i,panPos:l,panEnd:f,panSpeed:h});break}case 10:{const[i,l,f,h]=B(this,I,M).call(this);console.log("Fade",{musicChannel:i,fadePos:l,fadeEnd:f,fadeSpeed:h});const m=Number(l),v=Number(f),y=Math.abs((v-m)/Number(h));p(this,W)[i].fade(m,v,y);break}case 13:{const i=B(this,I,De).call(this),l=new DataView(i.buffer),f=l.getUint32(0,!0),h=l.getUint32(4,!0),m=l.getUint32(8,!0);console.log("SetPosition",{musicChannel:f,cSetPos1:h,cSetPos2:m});break}case 11:{const[i]=B(this,I,M).call(this);console.log("FeedbackMOD",{musicChannel:i}),B(this,I,Fe).call(this,[0,0]);break}case 12:{const[i]=B(this,I,M).call(this);console.log("FeedbackMP3",{musicChannel:i}),B(this,I,Fe).call(this,[0,0]);break}case 55:{console.log("Exit",{});break}default:if(n>55){const i=n-55;console.log("PlaySFX",{sfxHandle:i}),(a=(t=p(this,J))==null?void 0:t[i])==null||a.play()}}};function Nt(o,n){return{read:t=>n.session(()=>n.readFile(t)),write:(t,a)=>n.session(()=>n.writeFile(t,a)),poll:()=>o.v86.cpu.io.port_read8(0),clear:()=>{o.v86.cpu.io.port_write8(0,0),o.v86.cpu.io.port_write8(0,0)}}}async function Ut(o,n){const t=[];n.addMouse&&t.push("A:\\MOUSE"),n.autoExe&&t.push(n.autoExe);const a=await Ct(n.fdaImageFile,t),{image:i,disk:l}=await Pt(n.content);var f=new o({screen_container:n.screenContainer,bios:n.biosFile,vga_bios:n.vgaBiosFile,fda:{buffer:a.buffer},hda:{buffer:i.buffer},boot_order:801,autostart:!0,wasm_path:n.v86WasmUrl});return f.add_listener("emulator-ready",async function(){const h=Nt(f,l);new Mt(h).start()}),"forceScreenRatio"in n&&setInterval(()=>{const m=`calc(${n.screenContainer.style.width} * ${n.forceScreenRatio})`;n.screenContainer.style.height=m},1e3),i}const Ht=window.V86,de=import.meta.url.split("/").slice(0,-2).join("/");let tt;window.addEventListener("load",async()=>{const o=document.getElementById("screen_container");if(o===null)throw new Error("screen container not found");tt=await Ut(Ht,{screenContainer:o,content:{url:`${de}/apps/SquealerTNT.zip`},biosFile:{url:`${de}/bios/seabios.bin`},vgaBiosFile:{url:`${de}/bios/VGABIOS-lgpl.bin`},fdaImageFile:{url:`${de}/img/Dos6.22.img`},addMouse:!1,forceScreenRatio:4/3,v86WasmUrl:`${de}/v86/v86.wasm`,autoExe:"SQUEALER"})});var ze;(ze=document.getElementById("download-img"))==null||ze.addEventListener("click",()=>{const o=new Blob([tt],{type:"application/octet-stream"}),n=window.URL.createObjectURL(o),t=document.createElement("a");t.href=n,t.download="hda.img",document.body.appendChild(t),t.style.display="none",t.click(),t.remove(),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)});
